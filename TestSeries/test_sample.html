<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UPSChub - Exam Portal</title>
  <link rel="icon" type="image/jpg" href="images/LOGO.jpg">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
  <style>
    /* All your CSS styles remain the same... */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; overflow: hidden; }
    body { font-family: 'Poppins', sans-serif; background: #f0f0f5; color: #333; transition: background-color 0.3s ease, color 0.3s ease; position: relative; }
    .dark { background: #1e1e2f; color: #eee; }
    body.exam-active::after {
        content: "UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \A           UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \A           UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \A           UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \A           UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \A           UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \A           UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \A           UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \A           UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \A           UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \A";
        position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; font-size: 8vw; font-weight: 700; color: rgba(0, 0, 0, 0.05); text-align: center; line-height: 2; transform-origin: center; transform: rotate(-30deg); z-index: 9999; pointer-events: none; white-space: pre-wrap; overflow: hidden;
    }
    .dark.exam-active::after { color: rgba(255, 255, 255, 0.04); }
    .site-header { position: relative; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; padding: 10px 15px; }
    .site-logo { max-height: 40px; }
    .site-copyright { font-family: "Trebuchet MS", "Segoe UI", Arial, sans-serif; font-size: 10px; font-weight: 600; letter-spacing: 0.8px; white-space: nowrap; transition: color 0.3s ease; }
    body.light-mode .site-copyright { color: rgba(0, 0, 0, 0.6); }
    body.dark-mode .site-copyright { color: rgba(255, 255, 255, 0.7); }
    @media (max-width: 600px) {
        .site-header { flex-direction: column; align-items: center; text-align: center; }
        .site-copyright { margin-top: 5px; position: static; }
    }
    .pre-exam-screen { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; padding: 20px; z-index: 5000; position: relative; background: #f0f0f5;}
    .dark .pre-exam-screen { background: #1e1e2f; }
    .login-card, .instructions-container { background: #ffffff; padding: 30px 40px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); width: 100%; text-align: center; }
    .dark .login-card, .dark .instructions-container { background: #2a2a3a; box-shadow: 0 4px 20px rgba(0,0,0,0.4); }
    #loginScreen .login-card { max-width: 450px; }
    .login-card h2 { margin-bottom: 25px; color: #3f51b5; font-size: 1.8em; }
    .dark .login-card h2 { color: #8ab4f8; }
    .input-group { margin-bottom: 20px; text-align: left; }
    .input-group label { display: block; margin-bottom: 5px; font-weight: 500; }
    .input-group input { width: 100%; padding: 12px 15px; border: 1px solid #ccc; border-radius: 6px; font-size: 1em; }
    .dark .input-group input { background: #1e1e2f; border-color: #555; color: #eee; }
    .btn-primary { width: 100%; padding: 12px; border: none; border-radius: 6px; background: #3f51b5; color: white; font-size: 1.1em; font-weight: 600; cursor: pointer; transition: background 0.3s; }
    .btn-primary:hover:not(:disabled) { opacity: 0.9; }
    #loginError { color: #f44336; height: 1.2em; margin-top: 15px; font-weight: 500; }
    #instructionsScreen { display: none; }
    #instructionsScreen .instructions-container { max-width: 800px; text-align: left; height: 90vh; display: flex; flex-direction: column; }
    #instructionsScreen h2 { color: #3f51b5; border-bottom: 2px solid #3f51b5; padding-bottom: 5px; margin-bottom: 15px; margin-top: 25px; }
    #instructionsScreen h2:first-of-type { margin-top: 0; }
    .dark #instructionsScreen h2 { color: #8ab4f8; border-bottom-color: #8ab4f8; }
    .instructions-content { flex-grow: 1; overflow-y: auto; padding-right: 15px; }
    .instructions-content ul { list-style: none; padding-left: 0; line-height: 1.8; }
    .instructions-content li { display: flex; align-items: flex-start; margin-bottom: 12px; }
    .instructions-content li i { color: #3f51b5; margin-right: 15px; font-size: 1.2em; margin-top: 5px; min-width: 20px; text-align: center; }
    .dark .instructions-content li i { color: #8ab4f8; }
    .instructions-content strong { color: #c62828; }
    .dark .instructions-content strong { color: #ef9a9a; }
    .instructions-footer { padding-top: 20px; border-top: 1px solid #eee; }
    .dark .instructions-footer { border-top-color: #444; }
    #offlineStatus { font-weight: 600; text-align: center; padding: 10px; border-radius: 6px; margin-bottom: 15px; }
    .status-waiting { background: #ffebee; color: #c62828; border: 1px solid #ef9a9a; }
    .status-ready { background: #e8f5e9; color: #2e7d32; border: 1px solid #a5d6a7; }
    .agreement-group { display: flex; align-items: center; margin-bottom: 15px; }
    #agreementCheckbox { width: 18px; height: 18px; margin-right: 10px; cursor: pointer; }
    #agreementCheckbox + label { font-size: 0.9em; cursor: pointer; }
    .btn-start-exam:disabled { background: #9fa8da; cursor: not-allowed; }
    .dark .btn-start-exam:disabled { background: #2c3a7a; }
    #startError { color: #d32f2f; text-align: center; height: 1.2em; font-weight: 500; }
    #examUIWrapper { display: none; flex-direction: column; height: 100%; position: relative; }
    .site-header { background: #ffffff; padding: 10px 20px; display: flex; align-items: center; gap: 15px; border-bottom: 1px solid #e0e0e0; box-shadow: 0 2px 4px rgba(0,0,0,0.05); z-index: 101; position: relative; }
    .site-logo { height: 40px; width: auto; }
    .site-branding .site-title { font-size: 1.4em; font-weight: 700; color: #3f51b5; line-height: 1.1; }
    .site-branding .site-tagline { font-size: 0.8em; color: #666; margin: 0; }
    .topbar { display: flex; align-items: center; justify-content: space-between; padding: 8px 20px; background: #3f51b5; color: white; gap: 10px; z-index: 100; position: relative; }
    .topbar-left-group, .topbar-right-group { display: flex; align-items: center; gap: 15px; }
    .navigation-tabs { display: flex; gap: 5px; background: rgba(0,0,0,0.15); border-radius: 6px; padding: 3px; position: absolute; left: 50%; transform: translateX(-50%); }
    .nav-tab { background: transparent; border: none; color: white; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-weight: 500; transition: all 0.3s; font-size: 0.85em; }
    .nav-tab:hover:not(.locked) { background: rgba(255,255,255,0.2); }
    .nav-tab.active { background: white; color: #3f51b5; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .nav-tab.locked { cursor: not-allowed; opacity: 0.6; position: relative; pointer-events: none; }
    .nav-tab.locked::after { content: '\f023'; font-family: "Font Awesome 6 Free"; font-weight: 900; margin-left: 8px; font-size: 0.9em; }
    .timer { font-size: 0.95em; font-weight: bold; white-space: nowrap; background: rgba(0,0,0,0.2); padding: 4px 8px; border-radius: 4px; }
    #stopwatchWrapper { display: none; align-items: center; gap: 10px; }
    #stopwatchDisplay { font-size: 0.95em; font-weight: bold; white-space: nowrap; background: rgba(0,0,0,0.2); padding: 4px 8px; border-radius: 4px; }
    .stopwatch-controls button { background: transparent; border: 1px solid rgba(255,255,255,0.3); color: white; cursor: pointer; font-size: 0.8em; padding: 5px; border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; transition: background-color 0.2s; margin-left: 5px; }
    .stopwatch-controls button:hover { background-color: rgba(255,255,255,0.2); }
    .dark-mode-toggle { display: flex; align-items: center; gap: 8px; }
    .toggle-switch { position: relative; display: inline-block; width: 50px; height: 26px; }
    .toggle-switch input { opacity: 0; width: 0; height: 0; }
    .toggle-slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
    .toggle-slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
    input:checked + .toggle-slider { background-color: #4caf50; }
    input:checked + .toggle-slider:before { transform: translateX(24px); }
    .toggle-label { font-size: 0.9em; white-space: nowrap; }
    .topbar #btnSubmitTest { background: #f44336; color: white; border: none; border-radius: 6px; font-weight: 500; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 6px; font-size: 0.85em; padding: 8px 15px; }
    .topbar #btnSubmitTest:hover { opacity: 0.85; }
    .main-content { flex: 1; display: flex; overflow: hidden; position: relative; z-index: 5; }
    .question-area { width: 100%; padding: 20px; overflow-y: auto; padding-bottom: 100px; transition: padding-right 0.3s ease, filter 0.3s ease; position: relative; z-index: 5; }
    .sidebar-open .question-area { filter: blur(4px); pointer-events: none; }
    .question-header { font-size: 1.2em; margin-bottom: 15px; font-weight: 600; }
    .question-timer-bar-container { width: 100%; height: 8px; background-color: #e0e0e0; border-radius: 4px; margin-bottom: 20px; overflow: hidden; }
    .question-timer-bar { height: 100%; width: 100%; background-color: #3f51b5; border-radius: 4px; }
    .dark .question-timer-bar-container { background-color: #3d3d4a; }
    .dark .question-timer-bar { background-color: #8ab4f8; }
    .question-content { margin-bottom: 20px; line-height: 1.6; font-size: 1em; }
    .options-list { list-style: none; display: grid; grid-template-columns: 1fr; gap: 10px; padding: 0; }
    .option { padding: 12px 15px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; transition: all 0.2s; background: white; display: flex; align-items: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); font-size: 0.95em; position: relative; }
    .option:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    .option.selected { background: #4caf50; color: white; border-color: #4caf50; box-shadow: 0 2px 5px rgba(76,175,80,0.3); }
    .option-radio { margin-right: 12px; min-width: 18px; height: 18px; border: 2px solid #ccc; border-radius: 50%; display: inline-block; position: relative; }
    .option.selected .option-radio { border-color: white; background: white; box-shadow: inset 0 0 0 4px #4caf50; }
    .sidebar { position: fixed; top: 111px; right: -300px; width: 300px; height: calc(100% - 111px); background: #f8f9fa; border-left: 1px solid #ccc; display: flex; flex-direction: column; transition: right 0.3s ease-in-out; z-index: 200; box-shadow: -5px 0 15px rgba(0,0,0,0.1); }
    .sidebar-open .sidebar { right: 0; }
    .sidebar-content { padding: 15px; overflow-y: auto; flex-grow: 1;}
    .palette-title { font-weight: 600; margin-bottom: 10px; color: #3f51b5; font-size: 1.1em; text-align: center; }
    .question-palette { display: grid; grid-template-columns: repeat(auto-fill, minmax(35px, 1fr)); gap: 8px; margin-bottom: 20px; }
    .question-number { width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; border-radius: 50%; border: 1px solid transparent; cursor: pointer; font-weight: 500; transition: all 0.2s; font-size: 13px; margin: 0 auto; }
    .question-number:hover { transform: scale(1.1); box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
    .answered { background: #4caf50; color: white; border: 1px solid #388e3c;}
    .not-answered { background: #f44336; color: white; border: 1px solid #d32f2f;}
    .marked { background: #ff9800; color: white; border: 1px solid #f57c00;}
    .marked-answered { background: linear-gradient(135deg, #4caf50 50%, #ff9800 50%); color: white; border: 1px solid #f57c00; }
    .not-visited { background: #e9ecef; color: #333; border: 1px solid #ddd;}
    .current { border: 2px solid #3f51b5; transform: scale(1.1); }
    .palette-summary { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 20px 0; padding: 12px; background: #e0e0e0; border-radius: 6px; font-size: 0.8em; }
    .summary-item { display: flex; align-items: center; gap: 8px; color: #333; }
    .summary-item span { font-weight: 700; background-color: #fff; border-radius: 50%; min-width: 24px; height: 24px; display: inline-flex; align-items: center; justify-content: center; text-align: center; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
    .legend { margin-top: 15px; padding-top: 15px; border-top: 1px solid #ddd;}
    .legend-title { font-weight: 600; margin-bottom: 12px; color: #3f51b5; font-size: 1em; }
    .legend-item { display: flex; align-items: center; margin-bottom: 8px; font-size: 0.85em; padding: 6px 8px; border-radius: 4px; }
    .legend-color { width: 16px; height: 16px; border-radius: 3px; margin-right: 10px; flex-shrink: 0; }
    .legend-answered { background: #4caf50; }
    .legend-not-answered { background: #f44336; }
    .legend-marked { background: #ff9800; }
    .legend-marked-answered { background: linear-gradient(135deg, #4caf50 50%, #ff9800 50%); }
    .legend-not-visited { background: #e9ecef; border: 1px solid #ccc; }
    .sidebar-toggle { background: transparent; border: 1px solid rgba(255,255,255,0.3); color: white; cursor: pointer; font-size: 0.9em; padding: 5px; border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; }
    .sidebar-toggle:hover { background-color: rgba(255,255,255,0.2); }
    .sidebar-open .sidebar-toggle { transform: rotate(180deg); }
    .fixed-action-area { position: fixed; bottom: 0; left: 0; width: 100%; background: #fff; border-top: 1px solid #ccc; padding: 10px 15px; z-index: 100; box-shadow: 0 -2px 5px rgba(0,0,0,0.05); }
    .action-buttons { display: flex; justify-content: center; align-items: center; gap: 8px; }
    .btn-action { padding: 8px; border: none; border-radius: 6px; font-weight: 500; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 5px; font-size: 0.85em; flex-grow: 1; flex-basis: 0; }
    .btn-action:hover { opacity: 0.85; }
    #btnPrevQuestion { background: #6c757d; color: white; }
    #btnSaveNext { background: #4caf50; color: white; }
    #btnMarkReview { background: #ff9800; color: white; }
    #btnClearResponse { background: #f44336; color: white; }
    .submit-button.btn-action { background: #3f51b5; color: white; padding: 10px 25px; flex-grow: 0; }
    #resultScreenWrapper { display: none; text-align: center; padding: 20px; flex-direction: column; align-items: center; justify-content: flex-start; flex: 1; overflow-y: auto; position: relative;}
    #resultScreenWrapper h2 { font-size: 2.5em; color: #3f51b5; margin-bottom: 5px; }
    #resultScreenWrapper p { font-size: 1.2em; margin-bottom: 20px; }
    .scorecard-details { width: 100%; max-width: 500px; margin: 25px auto; background: #ffffff; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
    .scorecard-table { width: 100%; border-collapse: collapse; font-size: 1.1em; }
    .scorecard-table td { padding: 12px 15px; border-bottom: 1px solid #f0f0f0; }
    .scorecard-table tr:last-child td { border-bottom: none; }
    .scorecard-table td:first-child { text-align: left; font-weight: 500; color: #555; }
    .scorecard-table td:last-child { text-align: right; font-weight: 700; }
    .scorecard-table .correct-val { color: #4caf50; }
    .scorecard-table .incorrect-val { color: #f44336; }
    .scorecard-table .unattempted-val { color: #ff9800; }
    .scorecard-table .total-row td { font-size: 1.2em; border-top: 2px solid #e0e0e0; padding-top: 15px; margin-top: 5px; }
    .scorecard-table .total-val { color: #3f51b5; }
    .dark .scorecard-details { background: #2a2a3a; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
    .dark .scorecard-table td { border-bottom-color: #3a3a4a; }
    .dark .scorecard-table td:first-child { color: #ccc; }
    .dark .scorecard-table .correct-val { color: #81c784; }
    .dark .scorecard-table .incorrect-val { color: #ef9a9a; }
    .dark .scorecard-table .unattempted-val { color: #ffd54f; }
    .dark .scorecard-table .total-row td { border-top-color: #555; }
    .dark .scorecard-table .total-val { color: #8ab4f8; }
    #finalScore { display: none; }
    .result-buttons { display: flex; gap: 15px; margin-top: 30px; margin-bottom: 30px; }
    #syncStatus { margin-top: 10px; font-weight: 500; font-size: 0.95em; padding: 8px 12px; border-radius: 6px; }
    #syncStatus.syncing { color: #1565c0; background-color: #e3f2fd; }
    #syncStatus.synced { color: #2e7d32; background-color: #e8f5e9; }
    #syncStatus.error { color: #c62828; background-color: #ffebee; }
    .performance-analysis-container { width: 100%; max-width: 800px; margin: 30px auto; background: #ffffff; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
    .chart-container { width: 100%; max-width: 800px; margin: 30px auto; background: #ffffff; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
    .performance-analysis-container h3 { text-align: center; margin-bottom: 20px; font-size: 1.5em; color: #3f51b5; }
    .table-wrapper { overflow-x: auto; }
    .performance-table { width: 100%; border-collapse: collapse; }
    .performance-table th, .performance-table td { padding: 14px 10px; text-align: center; border-bottom: 1px solid #e0e0e0; font-size: 0.95em; white-space: nowrap; }
    .performance-table th { background-color: #f8f9fa; font-weight: 600; color: #444; }
    .performance-table td:first-child { text-align: left; font-weight: 500; width: 40%; white-space: normal; }
    .accuracy-bar-container { background-color: #e9ecef; border-radius: 10px; position: relative; height: 22px; overflow: hidden; min-width: 100px; }
    .accuracy-bar { height: 100%; border-radius: 10px; transition: width 0.8s ease-in-out; }
    .accuracy-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-weight: 600; font-size: 0.9em; color: #333; text-shadow: 0 0 2px rgba(255,255,255,0.7); }
    #performanceChart { width: 100% !important; height: 350px !important; }
    #reviewScreenWrapper { display: none; width: 100%; flex-direction: column; position: relative;}
    .review-header { padding: 15px 20px; background: #fff; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 10; }
    #reviewContainer { padding: 20px; overflow-y: auto; flex-grow: 1; background-color: #f0f0f5; }
    .review-question { background: #fff; border: 1px solid #ddd; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    .review-option-list { list-style: none; padding: 0; margin-top: 15px; }
    .review-option { padding: 10px 15px; margin-bottom: 8px; border-radius: 6px; border: 1px solid #e0e0e0; display: flex; align-items: center; gap: 12px; }
    .review-option i { min-width: 1.2em; text-align: center; }
    .review-option.review-correct { background-color: #e8f5e9; border-color: #a5d6a7; color: #1b5e20; font-weight: 500; }
    .review-option.review-incorrect { background-color: #ffebee; border-color: #ef9a9a; color: #b71c1c; }
    .review-status { margin-top: 15px; padding: 8px 12px; border-radius: 6px; font-weight: 500; text-align: center; border: 1px solid transparent; }
    .review-status.correct { background-color: #e8f5e9; border-color: #a5d6a7; color: #1b5e20; }
    .review-status.incorrect { background-color: #ffebee; border-color: #ef9a9a; color: #c62828; }
    .review-status.unanswered { background-color: #fff3e0; border-color: #ffcc80; color: #e65100; }
    .review-explanation { margin-top: 20px; padding: 15px; background: #eef2ff; border-left: 4px solid #3f51b5; border-radius: 4px; font-size: 0.9em; line-height: 1.6; }
    .review-explanation strong { color: #3f51b5; }
    .password-modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); align-items: center; justify-content: center;}
    .modal-content { background-color: #fefefe; padding: 25px 35px; border: 1px solid #888; width: 90%; max-width: 420px; border-radius: 12px; text-align: center; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
    .close-modal { position: absolute; top: 10px; right: 20px; font-size: 1.8em; color: #aaa; cursor: pointer; transition: color 0.2s; }
    .close-modal:hover { color: #333; }
    #passwordRetestInput { width: 100%; padding: 10px; margin: 15px 0; border: 1px solid #ccc; border-radius: 4px; font-size: 1em; }
    #passwordError { color: #f44336; font-size: 0.9em; height: 1.2em; margin-bottom: 10px;}
    .contact-admin-text { margin-top: 20px; font-size: 0.9em; color: #666; }
    .contact-admin-text a { color: #3f51b5; text-decoration: none; font-weight: 500; }
    .contact-admin-text a:hover { text-decoration: underline; }
    #answerWritingWrapper { display: none; flex: 1; flex-direction: column; align-items: center; justify-content: flex-start; padding: 40px 20px; position: relative; overflow-y: auto; }
    #answerWritingWrapper h2 { color: #3f51b5; font-size: 1.8em; margin-bottom: 10px; }
    #answerWritingWrapper h3 { color: #4a4a4a; font-size: 1.4em; margin-top: 30px; margin-bottom: 15px; border-bottom: 2px solid #ccc; padding-bottom: 5px; }
    #answerWritingWrapper p { color: #555; font-size: 1.1em; line-height: 1.6; }
    #answerWritingWrapper ul, #answerWritingWrapper ol { max-width: 800px; width: 100%; margin: 20px auto; text-align: left; padding-left: 20px; }
    #answerWritingWrapper li { margin-bottom: 15px; line-height: 1.6; font-size: 1em; }
    #answerWritingWrapper strong { color: #3f51b5; }
    .dark .site-header { background: #2a2a3a; border-bottom-color: #3a3a4a; }
    .dark .site-branding .site-title { color: #8ab4f8; }
    .dark .site-branding .site-tagline { color: #aaa; }
    .dark .option { background: #2c2c3c; border-color: #444; color: #eee; }
    .dark .option:hover { background: #3d3d4a; }
    .dark .option.selected { background: #1b5e20; color: #c8e6c9; border-color: #81c784; }
    .dark .option.selected .option-radio { border-color: #c8e6c9; background: #c8e6c9; box-shadow: inset 0 0 0 4px #1b5e20; }
    .dark .option-radio { border-color: #555; }
    .dark .fixed-action-area { background: #1e1e2f; border-top-color: #444;}
    .dark .sidebar { background: #2a2a3a; border-left: 1px solid #444;}
    .dark .not-visited { background: #3d3d4a; color: #eee; border: 1px solid #555; }
    .dark .palette-summary { background: #1e1e2f; border: 1px solid #444;}
    .dark .summary-item { color: #ccc; }
    .dark .summary-item span { background-color: #3d3d4a; color: #eee; }
    .dark .legend, .dark .fixed-action-area { border-top-color: #444; }
    .dark .legend-item { background: rgba(255,255,255,0.05); }
    .dark .palette-title, .dark .legend-title { color: #8ab4f8; }
    .dark #resultScreenWrapper h2, .dark .performance-analysis-container h3, .dark .review-title, .dark #answerWritingWrapper h2, .dark #answerWritingWrapper h3 { color: #8ab4f8; }
    .dark #answerWritingWrapper p { color: #aaa; }
    .dark #answerWritingWrapper li strong { color: #8ab4f8; }
    .dark .performance-analysis-container, .dark .chart-container { background: #2a2a3a; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
    .dark .performance-table th { background-color: #1e1e2f; color: #ccc; }
    .dark .performance-table td { border-bottom: 1px solid #444; }
    .dark .accuracy-bar-container { background-color: #3d3d4a; }
    .dark .accuracy-text { color: #fff; text-shadow: none; }
    .dark .review-header { background: #2a2a3a; border-color: #444; }
    .dark #reviewContainer { background-color: #1e1e2f; }
    .dark .review-question { background: #2c2c3c; border-color: #444; }
    .dark .review-option { border-color: #555; }
    .dark .review-option.review-correct { background-color: #1a311b; border-color: #81c784; color: #c8e6c9; }
    .dark .review-option.review-incorrect { background-color: #3e1c1f; border-color: #ef9a9a; color: #ffcdd2; }
    .dark .review-status.correct { background-color: #1a311b; border-color: #4caf50; color: #c8e6c9; }
    .dark .review-status.incorrect { background-color: #3e1c1f; border-color: #f44336; color: #ffcdd2; }
    .dark .review-status.unanswered { background-color: #4a2c0f; border-color: #ff9800; color: #ffe0b2; }
    .dark .review-explanation { background: #262a42; border-left-color: #8ab4f8; color: #ccc; }
    .dark .review-explanation strong { color: #8ab4f8; }
    .dark .modal-content { background: #2c2c3c; border-color: #555; }
    .dark .close-modal:hover { color: #fff; }
    .dark .contact-admin-text { color: #aaa; }
    .dark .contact-admin-text a { color: #8ab4f8; }
    @media (max-width: 768px) {
        .site-header { flex-direction: column; text-align: center; gap: 5px; }
        .topbar { flex-wrap: wrap; justify-content: center; }
        .navigation-tabs { position: static; transform: none; order: 3; width: 100%; justify-content: center; margin-top: 10px; }
        .sidebar-open .question-area { padding-right: 20px; }
    }
    @media (max-width: 480px) {
        .btn-action span { display: none; }
    }
  </style>
</head>
<body>

        <div id="loginScreen" style="display: none;" class="pre-exam-screen">
        <div class="login-card">
            <h2>Exam Portal Login</h2>
            <div class="input-group">
                <label for="emailInput">Email Address</label>
                <input type="email" id="emailInput" placeholder="Enter your email" autocomplete="email">
            </div>
            <div class="input-group">
                <label for="passwordInput">Password</label>
                <input type="password" id="passwordInput" placeholder="Enter your password" autocomplete="current-password">
            </div>
            <button id="loginBtn" class="btn-primary">Login</button>
            <p id="loginError"></p>
        </div>
    </div>

    <div id="instructionsScreen" class="pre-exam-screen" style="display: none;">
        <div class="instructions-container">
            <div class="instructions-content">
                <h2 id="instructions-title">General Instructions:</h2>
                <ul>
                    <li><i class="fas fa-list-ol"></i><div>Total Questions: <strong id="totalQuestionsEl">--</strong>.</div></li>
                    <li><i class="fas fa-clock"></i><div id="durationEl">Total Duration: <strong>-- Minutes</strong>.</div></li>
                    <li><i class="fas fa-stopwatch-20"></i><div>Each question has a <strong>15-second timer</strong>. The test will automatically move to the next question when this timer ends.</div></li>
                    <li><i class="fas fa-calculator"></i><div>Marking Scheme: <strong>+1</strong> for a correct answer, <strong>-1</strong> for an incorrect answer, and <strong>0</strong> for an unattempted question.</div></li>
                </ul>
                <h2>Security & Environment:</h2>
                <ul>
                    <li><i class="fas fa-plane-departure"></i><div>You must take this exam in an offline environment. Please <strong>Enable Aeroplane/Flight Mode</strong> before starting.</div></li>
                    <li><i class="fas fa-wifi-slash"></i><div>If an internet connection is detected after starting, your test will be <strong>auto-submitted</strong>. This action is final.</div></li>
                    <li><i class="fas fa-window-close"></i><div>Do not close or refresh the browser window, as this will end your test.</div></li>
                </ul>
                <h2>Navigation Instructions:</h2>
                <ul>
                    <li><i class="fas fa-check" style="color:#4caf50;"></i><div>Click <strong>Save & Next</strong> to save your answer and move to the next question.</div></li>
                    <li><i class="fas fa-flag" style="color:#ff9800;"></i><div>Click <strong>Mark</strong> to mark a question for review.</div></li>
                    <li><i class="fas fa-square" style="color:#f44336;"></i><div>A <strong>Red</strong> number in the palette means you have visited but not answered the question.</div></li>
                </ul>
            </div>
            <div class="instructions-footer">
                <div id="offlineStatus" class="status-waiting"><i class="fas fa-wifi"></i> Please enable Aeroplane Mode/Mobile Data.</div>
                <div class="agreement-group">
                    <input type="checkbox" id="agreementCheckbox">
                    <label for="agreementCheckbox">I have read all the instructions and I am ready to begin.</label>
                </div>
                <button id="startExamBtn" class="btn-primary btn-start-exam" disabled>Start Exam</button>
                <div id="startError"></div>
            </div>
        </div>
    </div>
</body>
</html>
