<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UPSChub - Mock Test & Answer Writing</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      background: #f0f0f5;
      color: #333;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .dark {
      background: #1e1e2f;
      color: #eee;
    }

    .container {
      display: flex;
      flex-direction: column;
      height: 100vh;
      position: relative;
    }

    /* Site Header Styles */
    .site-header {
      background: #ffffff;
      padding: 10px 20px;
      display: flex;
      align-items: center;
      gap: 15px;
      border-bottom: 1px solid #e0e0e0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      z-index: 101;
    }
    .site-logo {
      height: 40px;
      width: auto;
    }
    .site-branding .site-title {
      font-size: 1.4em;
      font-weight: 700;
      color: #3f51b5;
      line-height: 1.1;
    }
    .site-branding .site-tagline {
      font-size: 0.8em;
      color: #666;
      margin: 0;
    }
    .dark .site-header {
      background: #2a2a3a;
      border-bottom-color: #3a3a4a;
    }
    .dark .site-branding .site-title {
      color: #8ab4f8;
    }
    .dark .site-branding .site-tagline {
      color: #aaa;
    }


    /* Watermark Styles */
    .watermark {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      opacity: 0.1;
      pointer-events: none;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      width: 100%;
    }
    .watermark-logo {
      max-width: 150px;
      margin-bottom: 10px;
      filter: grayscale(100%) brightness(0.8);
    }
    .watermark-text {
      font-size: 3.5em;
      font-weight: bold;
      color: #555;
      text-transform: uppercase;
      letter-spacing: 2px;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
    }
    .dark .watermark-text {
      color: #aaa;
    }

    /* Topbar Styles */
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 12px;
      background: #3f51b5;
      color: white;
      gap: 10px;
      flex-wrap: wrap;
      z-index: 100;
      position: relative;
    }
    .header-group { display: flex; align-items: center; gap: 12px; min-width: 0; }
    .navigation-tabs { display: flex; gap: 5px; background: rgba(0,0,0,0.15); border-radius: 6px; padding: 3px; }
    .nav-tab { background: transparent; border: none; color: white; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-weight: 500; transition: all 0.3s; font-size: 0.85em; }
    .nav-tab:hover:not(.locked) { background: rgba(255,255,255,0.2); }
    .nav-tab.active { background: white; color: #3f51b5; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .nav-tab.locked { cursor: not-allowed; opacity: 0.6; position: relative; }
    .nav-tab.locked::after { content: '\f023'; font-family: "Font Awesome 6 Free"; font-weight: 900; margin-left: 8px; font-size: 0.9em; }
    
    .timer { font-size: 0.95em; font-weight: bold; white-space: nowrap; background: rgba(0,0,0,0.2); padding: 4px 8px; border-radius: 4px; }

    /* Stopwatch Styles */
    #stopwatchWrapper { display: flex; align-items: center; gap: 10px; }
    .stopwatch-controls { display: flex; gap: 5px; }
    .stopwatch-btn { background: transparent; border: none; color: white; cursor: pointer; font-size: 1em; padding: 5px; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; transition: background-color 0.2s; }
    .stopwatch-btn:hover { background-color: rgba(255,255,255,0.2); }
    .stopwatch-btn.hidden { display: none; }

    /* Main Content */
    .main-content { flex: 1; display: flex; overflow-y: auto; position: relative; }
    .question-area { width: 100%; padding: 15px; overflow-y: auto; padding-bottom: 120px; transition: filter 0.3s ease; position: relative; z-index: 2; }
    
    /* Per-question timer styles */
    .question-timer-container {
      width: 100%;
      height: 8px;
      background-color: #e0e0e0;
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 15px;
    }
    .question-timer-bar {
      height: 100%;
      width: 100%;
      background-color: #2196f3;
      border-radius: 4px;
      transition: width 1s linear;
    }
    .dark .question-timer-container {
      background-color: #3d3d4a;
    }
    .dark .question-timer-bar {
      background-color: #8ab4f8;
    }

    .question-header { font-size: 1.2em; margin-bottom: 15px; font-weight: 600; }
    .question-content { margin-bottom: 15px; line-height: 1.5; font-size: 0.95em; }
    .instructions-box { background: #fff; border: 1px solid #ddd; border-left: 4px solid #3f51b5; padding: 15px; margin: 20px 0; border-radius: 6px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    .dark .instructions-box { background: #2c2c3c; border-color: #444; border-left-color: #8ab4f8; }
    .instructions-box h3 { margin-bottom: 10px; color: #3f51b5; }
    .dark .instructions-box h3 { color: #8ab4f8; }
    .instructions-box ul { list-style-position: inside; padding-left: 5px; line-height: 1.6; }
    .answer-writing-submit { margin-top: 20px; text-decoration: none; display: inline-flex; width: auto; padding: 12px 25px; }
    .options-list { list-style: none; display: grid; grid-template-columns: 1fr; gap: 8px; }
    .option { padding: 10px 12px; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; transition: all 0.2s; background: white; display: flex; align-items: center; box-shadow: 0 1px 3px rgba(0,0,0,0.05); font-size: 0.9em; position: relative; z-index: 2; }
    .option:hover { transform: translateY(-1px); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .option.selected { background: #4caf50; color: white; border-color: #4caf50; box-shadow: 0 1px 3px rgba(76,175,80,0.3); }
    .option-radio { margin-right: 10px; min-width: 16px; height: 16px; border: 2px solid #ccc; border-radius: 50%; display: inline-block; position: relative; }
    .option.selected .option-radio { border-color: white; background: white; box-shadow: inset 0 0 0 3px #4caf50; }
    
    /* Sidebar */
    .sidebar { position: fixed; top: 121px; right: -280px; width: 280px; height: calc(100% - 121px); background: #f8f9fa; border-left: 1px solid #ccc; padding: 15px; padding-right: 20px; overflow-y: auto; transition: transform 0.3s ease; z-index: 200; }
    .sidebar-open .sidebar { transform: translateX(-280px); box-shadow: -5px 0 15px rgba(0,0,0,0.1); }
    .sidebar-open .question-area { filter: blur(2px); pointer-events: none; }
    .question-palette { display: grid; grid-template-columns: repeat(6, 1fr); gap: 6px; margin-bottom: 15px; }
    .question-number { width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; border-radius: 4px; border: 1px solid transparent; cursor: pointer; font-weight: 500; transition: all 0.2s; font-size: 12px; margin: 0 auto; }
    .question-number:hover { transform: scale(1.05); }
    
    /* Palette Status Colors - LIGHT MODE */
    .answered { background: #4caf50; color: white; }
    .not-answered { background: #f44336; color: white; }
    .marked { background: #ff9800; color: white; }
    .current { border: 2px solid #3f51b5; background: #3f51b5; color: white; }
    .not-visited { background: #e9ecef; color: #333; border: 1px solid #ddd;}
    
    .palette-summary {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin: 15px 0;
        padding: 12px;
        background: #e0e0e0;
        border-radius: 6px;
        font-size: 0.85em;
    }
    .summary-item { display: flex; align-items: center; gap: 8px; color: #333; }
    .summary-item span {
        font-weight: 700;
        background-color: #fff;
        border-radius: 50%;
        padding: 2px;
        min-width: 24px;
        height: 24px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    
    .legend { margin-top: 15px; padding-top: 15px; border-top: 1px solid #ddd; }
    .legend-title { font-weight: 600; margin-bottom: 12px; color: #3f51b5; font-size: 0.9em; }
    .legend-item { display: flex; align-items: center; margin-bottom: 8px; font-size: 0.85em; padding: 6px 8px; border-radius: 4px; background: rgba(255,255,255,0.7); }
    .legend-color { width: 16px; height: 16px; border-radius: 3px; margin-right: 8px; flex-shrink: 0; }
    .legend-answered { background: #4caf50; }
    .legend-not-answered { background: #f44336; }
    .legend-marked { background: #ff9800; }
    .legend-not-visited { background: #e9ecef; border: 1px solid #ccc; }
    .legend-current { background: #3f51b5; }
    
    /* Fixed Action Area */
    .fixed-action-area { position: fixed; bottom: 0; left: 0; right: 0; background: #fff; border-top: 1px solid #ccc; padding: 10px 12px; z-index: 100; }
    .action-buttons { display: flex; gap: 6px; margin-bottom: 8px; flex-wrap: wrap; }
    .btn-action { flex: 1; padding: 8px; border: none; border-radius: 4px; font-weight: 500; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 5px; font-size: 0.85em; min-width: 0; }
    .btn-action:hover { opacity: 0.9; }
    #btnPrevQuestion { background: #2196f3; color: white; }
    #btnSaveNext { background: #4caf50; color: white; }
    #btnMarkReview { background: #ff9800; color: white; }
    #btnClearResponse { background: #f44336; color: white; }
    .submit-button { width: 100%; padding: 10px; background: #3f51b5; color: white; border: none; border-radius: 4px; font-weight: 500; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 6px; font-size: 0.9em; }
    .submit-button:hover { background: #303f9f; }
    .powered-by { text-align: center; font-size: 0.8em; color: #666; margin-bottom: 5px; }

    /* Dark Mode */
    .dark .sidebar, .dark .option { background: #2c2c3c; border-color: #444; }
    .dark .sidebar { border-left: 1px solid #444; }
    .dark .option:hover { background: #3d3d4a; }
    
    .dark .question-number.not-visited { background: #3d3d4a; color: #eee; border-color: #555; }
    .dark .question-number.answered { background-color: #4caf50; color: white; border-color: #4caf50; }
    .dark .question-number.not-answered { background-color: #f44336; color: white; border-color: #f44336; }
    .dark .question-number.marked { background-color: #ff9800; color: white; border-color: #ff9800; }
    .dark .question-number.current { background-color: #3f51b5; color: white; border: 2px solid #8ab4f8; }
    
    .dark .legend-not-visited { background: #3d3d4a; border: 1px solid #555; }
    .dark .palette-summary { background: #1e1e2f; border: 1px solid #444; }
    .dark .summary-item { color: #ccc; }
    .dark .summary-item span { background-color: #3d3d4a; color: #eee; }

    .dark .legend, .dark .fixed-action-area { border-top-color: #444; }
    .dark .legend-item { background: rgba(255,255,255,0.05); }
    .dark .legend-title { color: #8ab4f8; }
    .dark .fixed-action-area { background: #1e1e2f; }
    .dark .powered-by { color: #aaa; }
    .dark-mode-toggle { display: flex; align-items: center; gap: 8px; }
    .toggle-switch { position: relative; display: inline-block; width: 50px; height: 26px; }
    .toggle-switch input { opacity: 0; width: 0; height: 0; }
    .toggle-slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
    .toggle-slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
    input:checked + .toggle-slider { background-color: #3f51b5; }
    input:checked + .toggle-slider:before { transform: translateX(24px); }
    .toggle-label { font-size: 0.9em; white-space: nowrap; }

    /* Sidebar Toggle */
    .sidebar-toggle { position: fixed; top: 130px; right: 15px; z-index: 300; background: #3f51b5; border: none; border-radius: 50%; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2); color: white; font-size: 1em; transition: all 0.3s ease; }
    .sidebar-open .sidebar-toggle { right: calc(90% + 15px); }
    
    /* Result & Review Screens */
    #resultScreenWrapper { display: none; text-align: center; padding: 40px 20px; flex-direction: column; align-items: center; justify-content: center; flex: 1; }
    #resultScreenWrapper h2 { font-size: 2.5em; color: #3f51b5; margin-bottom: 10px; }
    #resultScreenWrapper p { font-size: 1.2em; margin-bottom: 25px; }
    #finalScore { font-weight: 600; font-size: 1.8em; color: #4caf50; }
    .result-buttons { display: flex; gap: 15px; margin-top: 20px; }
    #retestButton, #reviewAnswersButton { padding: 12px 30px; background-color: #3f51b5; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1em; transition: background-color 0.3s; }
    #reviewAnswersButton { background-color: #2196f3; }
    #retestButton:hover { background-color: #303f9f; }
    #reviewAnswersButton:hover { background-color: #1976d2; }
    .dark #resultScreenWrapper h2 { color: #8ab4f8; }
    .dark #finalScore { color: #81c784; }

    #reviewScreenWrapper { display: none; width: 100%; flex-direction: column; }
    .review-header { padding: 15px 20px; background: #fff; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center; }
    .review-title { font-size: 1.3em; font-weight: 600; color: #3f51b5; }
    #backToResultsBtn { background-color: #6c757d; color: white; padding: 8px 15px; border-radius: 5px; flex-shrink: 0; }
    #reviewContainer { padding: 20px; overflow-y: auto; flex-grow: 1; background-color: #f0f0f5; }
    .review-question { background: #fff; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    .review-question h4 { font-size: 1em; font-weight: 600; margin-bottom: 12px; line-height: 1.4; }
    .review-option-list { list-style: none; padding: 0; margin: 0 0 10px 0; }
    .review-option { padding: 8px 12px; margin-bottom: 5px; border-radius: 5px; border: 1px solid #e0e0e0; display: flex; align-items: center; gap: 10px; }
    .review-option i { font-size: 1.1em; }
    .review-option.review-correct { background-color: #e8f5e9; border-color: #4caf50; color: #1b5e20; font-weight: 500; }
    .review-option.review-incorrect { background-color: #ffebee; border-color: #f44336; color: #b71c1c; text-decoration: line-through; }
    .review-status { font-size: 0.9em; font-weight: 500; padding: 5px 10px; border-radius: 4px; display: inline-block; margin-top: 10px; }
    .review-status.correct { background: #4caf50; color: white; }
    .review-status.incorrect { background: #f44336; color: white; }
    .review-status.unanswered { background: #ff9800; color: white; }
    .dark .review-header { background: #2a2a3a; border-color: #444; }
    .dark .review-title { color: #8ab4f8; }
    .dark #reviewContainer { background-color: #1e1e2f; }
    .dark .review-question { background: #2c2c3c; border-color: #444; }
    .dark .review-option { border-color: #555; }
    .dark .review-option.review-correct { background-color: #1a311b; border-color: #81c784; color: #c8e6c9; }
    .dark .review-option.review-incorrect { background-color: #3e1c1f; border-color: #ef9a9a; color: #ffcdd2; }

    /* Password Modal */
    .password-modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5); }
    .modal-content { background-color: #fefefe; margin: 15% auto; padding: 20px 30px; border: 1px solid #888; width: 90%; max-width: 400px; border-radius: 8px; text-align: center; position: relative; }
    .close-modal { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; }
    #passwordInput { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px; }
    #passwordError { color: #f44336; font-size: 0.9em; height: 1.2em; margin-bottom: 10px;}
    .contact-admin-text { font-size: 0.9em; margin-top: 20px; color: #666; }
    .contact-admin-text a { color: #3f51b5; text-decoration: none; font-weight: 600; }
    .dark .modal-content, .dark #passwordInput { background-color: #2c2c3c; border-color: #555; color: #eee; }
    .dark .contact-admin-text { color: #aaa; }
    .dark .contact-admin-text a { color: #8ab4f8; }

    /* Unlock Popup */
    .unlock-popup {
      display: none;
      position: fixed;
      z-index: 2000;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #2c2c3c;
      color: #fff;
      padding: 15px 25px;
      border-radius: 8px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      animation: slideDown 0.5s ease-out, fadeOut 0.5s ease-in 3.5s forwards;
    }
    .unlock-popup i { margin-right: 10px; color: #4caf50; }
    
    /* Animation Keyframes */
    @keyframes slideDown { from { top: -100px; opacity: 0; } to { top: 20px; opacity: 1; } }
    @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; top: 20px; } }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* NEW: Empty State for Answer Writing */
    #answerWritingEmptyWrapper {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex: 1;
      text-align: center;
      padding: 40px 20px;
      animation: fadeIn 0.5s ease-in-out;
    }
    .empty-state-card {
      background: #fff;
      padding: 40px 50px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
      max-width: 450px;
      width: 90%;
    }
    .empty-state-svg {
      width: 120px;
      height: 120px;
      margin-bottom: 25px;
    }
    .empty-state-svg .calendar-base { stroke: #333; }
    .empty-state-svg .cross-mark { stroke: #f44336; }
    .empty-state-title {
      font-size: 2em;
      color: #3f51b5;
      margin-bottom: 10px;
    }
    .empty-state-text {
      font-size: 1.1em;
      color: #666;
      margin-bottom: 30px;
    }
    #backToScoreFromAnswerWriting {
      padding: 12px 30px;
      width: auto;
    }
    .dark .empty-state-card {
      background: #2c2c3c;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }
    .dark .empty-state-svg .calendar-base { stroke: #aaa; }
    .dark .empty-state-svg .cross-mark { stroke: #ef9a9a; }
    .dark .empty-state-title { color: #8ab4f8; }
    .dark .empty-state-text { color: #aaa; }

    /* Responsive */
    @media (max-width: 768px) {
        .navigation-tabs { order: -1; margin-bottom: 5px; width: 100%; justify-content: center; }
        .topbar { justify-content: space-around; }
        .site-header { flex-direction: column; text-align: center; gap: 5px; padding: 10px; }
        .sidebar { top: 170px; height: calc(100% - 170px); }
        .sidebar-toggle { top: 180px; }
        .result-buttons { flex-direction: column; width: 80%; }
        .empty-state-card { padding: 30px 20px; }
        .empty-state-title { font-size: 1.8em; }
        .empty-state-text { font-size: 1em; }
        .empty-state-svg { width: 100px; height: 100px; }
    }
    @media (max-width: 480px) {
      .sidebar { width: 90%; right: -90%; padding-right: 15px; }
      .sidebar-open .sidebar { transform: translateX(-90%); }
      .question-palette { grid-template-columns: repeat(5, 1fr); }
      .option, .btn-action, .legend-item { font-size: 0.85em; }
      .watermark-text { font-size: 2em; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="site-header">
        <img src="images\LOGO.jpg" alt="UPSChub Logo" class="site-logo">
        <div class="site-branding">
            <div class="site-title">UPSChub</div>
            <p class="site-tagline">Civil Services Exam Preparation</p>
        </div>
    </header>

    <header class="topbar">
      <div class="header-group">
        <div id="countdownWrapper"><div class="timer" id="timer">150:00</div></div>
        <div id="stopwatchWrapper" style="display: none;">
            <div class="timer" id="stopwatchDisplay">00:00:00</div>
            <div class="stopwatch-controls">
                <button id="stopwatchStart" class="stopwatch-btn" title="Start"><i class="fas fa-play"></i></button>
                <button id="stopwatchStop" class="stopwatch-btn hidden" title="Pause"><i class="fas fa-pause"></i></button>
                <button id="stopwatchReset" class="stopwatch-btn" title="Reset"><i class="fas fa-sync-alt"></i></button>
            </div>
        </div>
      </div>
      
      <div class="navigation-tabs">
        <button id="showMockTestTab" class="nav-tab active">Mock Test</button>
        <button id="showAnswerWritingTab" class="nav-tab">Answer Writing</button>
      </div>

      <div class="dark-mode-toggle">
        <span class="toggle-label" id="toggleLabel">Dark</span>
        <label class="toggle-switch">
          <input type="checkbox" id="darkModeToggle">
          <span class="toggle-slider"></span>
        </label>
      </div>
    </header>

    <div class="main-content">
        <div id="mockTestWrapper" style="display: flex; width: 100%;">
            <button id="btnToggleSidebar" class="sidebar-toggle" title="Toggle Sidebar"><i class="fas fa-bars"></i></button>
            <div class="watermark"><img src="images\LOGO.jpg" alt="UPSChub Logo" class="watermark-logo" /><div class="watermark-text">UPSChub</div></div>
            <section class="question-area">
                <div class="question-timer-container">
                    <div id="questionTimerBar" class="question-timer-bar"></div>
                </div>
                <h2 class="question-header" id="questionNumber"></h2>
                <div class="question-content" id="questionText"></div>
                <ul class="options-list" id="optionsList"></ul>
            </section>
            <aside class="sidebar">
                <div class="palette-title">Question Palette</div>
                <div class="question-palette" id="questionPalette"></div>
                <div class="palette-summary">
                    <div class="summary-item"><span id="summaryAnswered">0</span> Answered</div>
                    <div class="summary-item"><span id="summaryMarked">0</span> Marked</div>
                    <div class="summary-item"><span id="summaryNotAnswered">0</span> Not Answered</div>
                    <div class="summary-item"><span id="summaryNotVisited">0</span> Not Visited</div>
                </div>
                <div class="legend">
                    <div class="legend-title">Answer Status Legend:</div>
                    <div class="legend-item"><div class="legend-color legend-answered"></div><span>Answered</span></div>
                    <div class="legend-item"><div class="legend-color legend-not-answered"></div><span>Not Answered</span></div>
                    <div class="legend-item"><div class="legend-color legend-marked"></div><span>Marked for Review</span></div>
                    <div class="legend-item"><div class="legend-color legend-not-visited"></div><span>Not Visited</span></div>
                    <div class="legend-item"><div class="legend-color legend-current"></div><span>Current Question</span></div>
                </div>
            </aside>
        </div>

        <!-- This wrapper is now legacy and will not be shown -->
        <div id="answerWritingWrapper" style="display: none; width: 100%;">
            <section class="question-area">
                <h2 class="question-header">Answer Writing Practice</h2>
                <div class="question-content"><p><strong>Question:</strong> "The Indian Constitution is a 'bag of borrowings,' but it is more than a mere patchwork. It is a beautiful tapestry woven with threads of nationalistic ideals." Critically analyze the statement. (250 words)</p></div>
            </section>
        </div>
        
        <!-- NEW: Empty state for Answer Writing section -->
        <div id="answerWritingEmptyWrapper" style="display: none; width: 100%;">
            <div class="empty-state-card">
                <svg class="empty-state-svg" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path class="calendar-base" d="M8 7V3M16 7V3M7 11H17M5 21H19C20.1046 21 21 20.1046 21 19V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V19C3 20.1046 3.89543 21 5 21Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path class="cross-mark" d="M14.1213 13.1213L9.87868 17.364M9.87868 13.1213L14.1213 17.364" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <h2 class="empty-state-title">No Test Today</h2>
                <p class="empty-state-text">The Answer Writing section is not available today. Please check back later.</p>
                <button id="backToScoreFromAnswerWriting" class="submit-button">Go Back to Score</button>
            </div>
        </div>

        <div id="resultScreenWrapper" style="display: none; width: 100%;">
            <h2>Test Completed!</h2>
            <p>Your final score is:</p>
            <p id="finalScore">0/10</p>
            <div class="result-buttons">
              <button id="retestButton" class="submit-button"><i class="fas fa-redo"></i> Retest</button>
              <button id="reviewAnswersButton" class="submit-button"><i class="fas fa-search"></i> Review Answers</button>
            </div>
        </div>

        <div id="reviewScreenWrapper" style="display: none; width: 100%;">
            <div class="review-header">
                <h2 class="review-title">Review Your Answers</h2>
                <button id="backToResultsBtn" class="submit-button btn-action"><i class="fas fa-arrow-left"></i> Back to Score</button>
            </div>
            <div id="reviewContainer"></div>
        </div>
    </div>

    <div class="fixed-action-area" id="mcqFooter">
        <div class="powered-by">Powered by UPSChub | Pratyush Swain</div>
        <div class="action-buttons" id="actionButtons">
            <button class="btn-action" id="btnPrevQuestion"><i class="fas fa-arrow-left"></i> Prev</button>
            <button class="btn-action" id="btnSaveNext"><i class="fas fa-save"></i> Save & Next</button>
            <button class="btn-action" id="btnMarkReview"><i class="fas fa-flag"></i> Mark</button>
            <button class="btn-action" id="btnClearResponse"><i class="fas fa-ban"></i> Clear</button>
        </div>
        <button id="btnSubmit" class="submit-button" style="display: none;"><i class="fas fa-paper-plane"></i> Submit Test</button>
    </div>

    <div id="passwordModal" class="password-modal">
        <div class="modal-content">
            <span id="closeModal" class="close-modal">×</span>
            <h3>Enter Password to Retest</h3>
            <input type="password" id="passwordInput" placeholder="Enter password...">
            <div id="passwordError"></div>
            <button id="verifyPasswordButton" class="submit-button">Verify</button>
            <p class="contact-admin-text">Don't have a password? <a href="https://api.whatsapp.com/send?phone=918658567727&text=I%20need%20the%20password%20for%20the%20mock%20test." target="_blank">Contact Admin</a></p>
        </div>
    </div>
    
    <div id="unlockPopup" class="unlock-popup">
        <i class="fas fa-check-circle"></i> <strong>Answer Writing Tab Unlocked!</strong>
    </div>

  </div>

 <script>
    // ### CONFIGURATION ###
    const RETEST_PASSWORD = "UPSC2024";
    const TEST_DURATION_SECONDS = 150 * 60; // 120 minutes
    const questions = [
        // Chapter 3: Salient Features of the Constitution (60 MCQs)
        { text: "The Indian Constitution is the lengthiest written constitution due to:", options: ["Geographical factors", "Historical factors (e.g., GoI Act 1935)", "Single constitution for Centre & states", "All of the above"], answer: 3 },
        { text: "The concept of 'Federation with a strong Centre' was borrowed from:", options: ["USA", "Canada", "Australia", "UK"], answer: 1 },
        { text: "The Parliamentary form of government is also known as:", options: ["Westminster model", "Cabinet government", "Responsible government", "All of the above"], answer: 3 },
        { text: "The Indian Constitution establishes a synthesis of:", options: ["Parliamentary Sovereignty & Presidential System", "Parliamentary Sovereignty & Judicial Supremacy", "Federal & Unitary systems", "Republicanism & Monarchy"], answer: 1 },
        { text: "The feature of 'Integrated and Independent Judiciary' means:", options: ["Supreme Court controls all courts", "A single system of courts enforces both central and state laws", "The President appoints all judges", "Judiciary is free from legislative control only"], answer: 1 },
        { text: "Who described the Directive Principles of State Policy (DPSP) as ‘novel features’?", options: ["Jawaharlal Nehru", "B.R. Ambedkar", "K.M. Munshi", "Granville Austin"], answer: 1 },
        { text: "Fundamental Duties were added by the 42nd Amendment Act, 1976, on the recommendation of the:", options: ["Sarkaria Commission", "Swaran Singh Committee", "Fazl Ali Commission", "Rajamannar Committee"], answer: 1 },
        { text: "The term ‘Secular’ in the Indian context implies:", options: ["State is anti-religion", "State has its own religion", "State gives equal respect to all religions", "State is pro-Hinduism"], answer: 2 },
        { text: "Universal Adult Franchise means every citizen not less than ____ years has a right to vote:", options: ["21", "20", "18", "25"], answer: 2 },
        { text: "India opted for Single Citizenship to promote:", options: ["Federalism", "Regionalism", "Fraternity and unity", "States' rights"], answer: 2 },
        { text: "Which is an independent body established by the Constitution?", options: ["NITI Aayog", "Election Commission", "National Human Rights Commission", "Central Vigilance Commission"], answer: 1 },
        { text: "Emergency provisions convert the federal structure into a unitary one without a formal amendment. This feature is borrowed from:", options: ["USA", "Weimar Constitution of Germany", "Australia", "South Africa"], answer: 1 },
        { text: "The 73rd and 74th Amendment Acts gave constitutional recognition to:", options: ["Two-tier government", "Three-tier government (local self-government)", "Zonal Councils", "Inter-State Council"], answer: 1 },
        { text: "Who described Indian federalism as 'quasi-federal'?", options: ["Morris Jones", "Granville Austin", "K.C. Wheare", "Ivor Jennings"], answer: 2 },
        { text: "A 'rigid' constitution requires what for its amendment?", options: ["Simple majority", "Executive order", "Special procedure", "Referendum"], answer: 2 },
        { text: "The structural part of the Indian Constitution is largely derived from the:", options: ["US Constitution", "British Constitution", "Government of India Act, 1935", "Irish Constitution"], answer: 2 },
        { text: "The concept of 'Procedure established by Law' is from the:", options: ["British Constitution", "US Constitution", "Japanese Constitution", "South African Constitution"], answer: 2 },
        { text: "Which is NOT a federal feature of the Indian Constitution?", options: ["Written Constitution", "Division of Powers", "All-India Services", "Independent Judiciary"], answer: 2 },
        { text: "Which is a unitary or non-federal feature?", options: ["Bicameralism", "Single Constitution", "Rigidity of Constitution", "Supremacy of Constitution"], answer: 1 },
        { text: "The ideal of ‘liberty, equality, and fraternity’ in our Preamble is from the:", options: ["Russian Revolution", "American Revolution", "French Revolution", "Irish Revolution"], answer: 2 },
        { text: "The inspiration for Fundamental Duties came from the Constitution of:", options: ["Germany", "Former USSR", "USA", "Australia"], answer: 1 },
        { text: "A key difference between the Indian and British parliamentary systems is:", options: ["Presence of a Prime Minister", "Collective responsibility", "India has an elected head (Republic), UK has a hereditary head (Monarchy)", "Bicameralism"], answer: 2 },
        { text: "The office of the Comptroller and Auditor General (CAG) is an example of a/an:", options: ["Independent Body", "Subordinate office", "Statutory body", "Executive body"], answer: 0 },
        { text: "The power of ‘Judicial Review’ is primarily derived from the practice in:", options: ["UK", "USA", "Canada", "Ireland"], answer: 1 },
        { text: "Fundamental Rights operate as:", options: ["Positive commands to the state", "Limitations on the tyranny of the executive and arbitrary laws of the legislature", "Guidelines for governance", "A source of power for the PMO"], answer: 1 },
        { text: "The 61st Constitutional Amendment Act, 1989 did what?", options: ["Added Fundamental Duties", "Lowered the voting age to 18", "Created Panchayats", "Banned defections"], answer: 1 },
        { text: "The concept of a ‘welfare state’ is an objective found in the:", options: ["Preamble", "Fundamental Rights", "Directive Principles of State Policy", "Seventh Schedule"], answer: 2 },
        { text: "The 97th Amendment Act, 2011, gave constitutional status to:", options: ["Tribunals", "Co-operative societies", "Municipalities", "National Commission for BCs"], answer: 1 },
        { text: "The appointment of the State Governor by the Centre is a:", options: ["Federal feature", "Unitary feature", "Feature of Presidential system", "Democratic feature"], answer: 1 },
        { text: "The 'instrument of instructions' from the GoI Act, 1935, was incorporated as:", options: ["Fundamental Rights", "DPSP", "Emergency Provisions", "Writs"], answer: 1 },
        { text: "Who called the Constitution a ‘lawyer’s paradise’?", options: ["B.R. Ambedkar", "K.C. Wheare", "Ivor Jennings", "Granville Austin"], answer: 2 },
        { text: "The suspension of Fundamental Rights during an Emergency is from the:", options: ["South African Constitution", "Weimar Constitution of Germany", "Irish Constitution", "Japanese Constitution"], answer: 1 },
        { text: "A 'Republic' means the head of the state is:", options: ["Hereditary", "Nominated for life", "Elected for a fixed period", "The Prime Minister"], answer: 2 },
        { text: "The 11th Schedule (Panchayats) was added by which amendment?", options: ["71st", "72nd", "73rd", "74th"], answer: 2 },
        { text: "The 'Concurrent List' concept was borrowed from:", options: ["Canada", "Germany", "Ireland", "Australia"], answer: 3 },
        { text: "Bicameralism at the Centre (Lok Sabha & Rajya Sabha) is a feature that promotes:", options: ["Unitary government", "Regional representation in a federal system", "Presidential system", "Direct democracy"], answer: 1 },
        { text: "The President's veto over state bills is an example of:", options: ["State supremacy", "Unitary bias", "Separation of powers", "Judicial review"], answer: 1 },
        { text: "The phrase 'dignity of the individual' is mentioned in the:", options: ["Preamble", "Article 17", "Article 21", "Article 51A"], answer: 0 },
        { text: "The provision for a National Emergency is under:", options: ["Article 352", "Article 358", "Article 360", "Article 365"], answer: 0 },
        { text: "Granville Austin described Indian federalism as:", options: ["Quasi-federal", "Bargaining federalism", "Cooperative federalism", "Centralised federalism"], answer: 2 },
        { text: "The procedure for Constitutional amendment (Article 368) is from:", options: ["USA", "Australia", "South Africa", "Canada"], answer: 2 },
        { text: "Unlike the American constitution, the Indian constitution provides for:", options: ["A written constitution", "A single integrated judicial system", "A federal government", "A supreme court"], answer: 1 },
        { text: "The philosophical part of the Constitution (FRs and DPSPs) is inspired by:", options: ["American and Irish Constitutions", "Canadian and Australian Constitutions", "British and French Constitutions", "German and Japanese Constitutions"], answer: 0 },
        { text: "The principle of Cabinet Government is drawn from the:", options: ["American Constitution", "British Constitution", "Irish Constitution", "GoI Act, 1935"], answer: 1 },
        { text: "Which reflects Gandhian ideology?", options: ["Organising village panchayats", "Promoting cottage industries", "Prohibiting slaughter of cows", "All of the above"], answer: 3 },
        { text: "The Constitution's flexibility is shown by the fact that some provisions can be amended by:", options: ["Simple majority of Parliament", "Referendum", "Judicial order", "Presidential decree"], answer: 0 },
        { text: "The Union Public Service Commission (UPSC) is a:", options: ["Statutory body", "Constitutional body", "Executive body", "Non-profit organisation"], answer: 1 },
        { text: "The Indian system of government is:", options: ["Federal in form and unitary in spirit", "Unitary in form and federal in spirit", "Purely federal", "Purely unitary"], answer: 0 },
        { text: "A nominal and a real executive are features of:", options: ["Presidential system", "Dictatorship", "Parliamentary system", "Monarchy"], answer: 2 },
        { text: "The supremacy of the Constitution is a key feature of:", options: ["The British system", "The Indian system", "Both systems", "Unwritten constitutions"], answer: 1 },
        { text: "The 'basic structure' doctrine was established in the:", options: ["Golaknath case", "Kesavananda Bharati case", "Minerva Mills case", "Shankari Prasad case"], answer: 1 },
        { text: "The provision for a Financial Emergency (Article 360) is based on:", options: ["GoI Act, 1935", "American Constitution", "British financial codes", "An original Indian innovation"], answer: 0 },
        { text: "The 12th Schedule (Municipalities) was added by the:", options: ["73rd Amendment", "74th Amendment", "86th Amendment", "91st Amendment"], answer: 1 },
        { text: "Which is NOT a major criticism of the Indian Constitution?", options: ["It is a borrowed constitution", "It is un-Gandhian", "It is too flexible", "It is a lawyer's paradise"], answer: 2 },
        { text: "The concept of 'Due Process of Law' is not explicitly mentioned, but what is?", options: ["Rule of Law", "Procedure Established by Law", "Natural Justice", "King's Prerogative"], answer: 1 },
        { text: "The term 'federation' is:", options: ["Used in Article 1", "Used in Part III", "Used in the Preamble", "Nowhere used in the Constitution"], answer: 3 },
        { text: "Which article allows Parliament to make laws on state list subjects for the national interest?", options: ["Art 249", "Art 250", "Art 252", "Art 356"], answer: 0 },
        { text: "The provision for 'joint sitting of the two Houses of Parliament' is from:", options: ["Australia", "Canada", "Britain", "USA"], answer: 0 },
        { text: "The Indian Constitution is often called a 'paradise of lawyers' because of its:", options: ["Simplicity and brevity", "Use of legalistic and complicated language", "Rigidity", "Flexibility"], answer: 1 },
        { text: "The emergency provision of Financial Emergency has been used:", options: ["Once", "Twice", "Thrice", "Never"], answer: 3 },
        // Chapter 4: Preamble of the Constitution (60 MCQs)
        { text: "The Preamble is based on the 'Objectives Resolution' moved by:", options: ["B.R. Ambedkar", "Jawaharlal Nehru", "Rajendra Prasad", "Sardar Patel"], answer: 1 },
        { text: "The Preamble has been amended only once, by the:", options: ["24th Amendment", "44th Amendment", "42nd Amendment", "61st Amendment"], answer: 2 },
        { text: "Which words were added by the 42nd Amendment?", options: ["Socialist, Secular, Republic", "Socialist, Secular, Integrity", "Sovereign, Socialist, Democratic", "Justice, Liberty, Equality"], answer: 1 },
        { text: "The Preamble states that the Constitution derives its authority from:", options: ["The Parliament", "The President", "The People of India", "The Constituent Assembly"], answer: 2 },
        { text: "What is the correct sequence of words in the Preamble?", options: ["Sovereign, Socialist, Secular, Democratic, Republic", "Sovereign, Democratic, Socialist, Secular, Republic", "Sovereign, Socialist, Democratic, Secular, Republic", "Sovereign, Secular, Democratic, Socialist, Republic"], answer: 0 },
        { text: "The term 'Sovereign' implies:", options: ["India is a colony", "India is a dominion of another country", "India is an independent state, free to conduct its own affairs", "India must obey UN directives"], answer: 2 },
        { text: "The Indian brand of 'Socialism' is:", options: ["Communist socialism", "Democratic socialism", "State-controlled socialism", "Anarchist socialism"], answer: 1 },
        { text: "The term 'Secular' means the state:", options: ["Is irreligious", "Is anti-religion", "Protects all religions equally", "Promotes a new common religion"], answer: 2 },
        { text: "'Democratic' in the Preamble refers to:", options: ["Political democracy only", "Social democracy only", "Economic democracy only", "Political, social, and economic democracy"], answer: 3 },
        { text: "A 'Republic' means the head of the state is:", options: ["A monarch", "A hereditary ruler", "An elected head", "Nominated by the previous head"], answer: 2 },
        { text: "The Preamble secures to all citizens 'Justice' in which forms?", options: ["Social and Economic", "Social, Economic, and Political", "Social and Political", "Cultural and Economic"], answer: 1 },
        { text: "The ideal of 'Justice—social, economic and political' has been taken from:", options: ["American Revolution", "French Revolution", "Russian Revolution", "Japanese Constitution"], answer: 2 },
        { text: "'Liberty' in the Preamble means:", options: ["Absolute freedom", "Absence of restraint on the activities of individuals with certain reasonable restrictions", "Freedom to do anything", "Protection against the state only"], answer: 1 },
        { text: "'Equality' in the Preamble refers to the absence of special privileges and provision of adequate opportunities for all, relating to:", options: ["Status and wealth", "Status and opportunity", "Life and liberty", "Religion and caste"], answer: 1 },
        { text: "The term 'Fraternity' aims to assure:", options: ["The dignity of the individual", "The unity and integrity of the nation", "Both a and b", "Only the unity of the nation"], answer: 2 },
        { text: "In which case did the Supreme Court hold that the Preamble is NOT a part of the Constitution?", options: ["Berubari Union case (1960)", "Kesavananda Bharati case (1973)", "LIC of India case (1995)", "Golaknath case (1967)"], answer: 0 },
        { text: "In which case did the Supreme Court hold that the Preamble IS a part of the Constitution?", options: ["Berubari Union case (1960)", "Kesavananda Bharati case (1973)", "A.K. Gopalan case (1950)", "Menaka Gandhi case (1978)"], answer: 1 },
        { text: "Can the Preamble be amended under Article 368?", options: ["No, it is not part of the constitution", "Yes, but its basic features cannot be altered", "Yes, without any limitation", "Only by a referendum"], answer: 1 },
        { text: "The Preamble is:", options: ["Justiciable, meaning its provisions are enforceable in courts", "Non-justiciable, meaning its provisions are not enforceable in courts", "Justiciable only on President's order", "Enforceable by police"], answer: 1 },
        { text: "The Preamble is useful in constitutional interpretation because it:", options: ["Is legally binding", "Contains the enacting clause", "Embodies the basic philosophy and fundamental values of the Constitution", "Can override specific provisions of the Constitution"], answer: 2 },
        { text: "Who called the Preamble the 'horoscope of our sovereign democratic republic'?", options: ["B.R. Ambedkar", "N.A. Palkhivala", "K.M. Munshi", "Thakurdas Bhargava"], answer: 2 },
        { text: "Who called the Preamble the 'identity card of the Constitution'?", options: ["B.R. Ambedkar", "N.A. Palkhivala", "K.M. Munshi", "Ernest Barker"], answer: 1 },
        { text: "Who described the Preamble as the 'soul of the Constitution'?", options: ["B.R. Ambedkar", "N.A. Palkhivala", "K.M. Munshi", "Thakurdas Bhargava"], answer: 3 },
        { text: "The date of adoption of the Constitution mentioned in the Preamble is:", options: ["26 January 1950", "15 August 1947", "26 November 1949", "9 December 1946"], answer: 2 },
        { text: "The Preamble declares India as a 'Sovereign' state. This means India acquired full independent status from:", options: ["15 Aug 1947", "26 Jan 1950", "26 Nov 1949", "3 June 1947"], answer: 1 },
        { text: "India's membership of the Commonwealth of Nations affects its sovereignty:", options: ["Greatly", "Partially", "Not at all", "Makes it a dominion"], answer: 2 },
        { text: "The goal of 'economic justice' in the Preamble is complemented by:", options: ["Fundamental Rights", "Directive Principles of State Policy", "Fundamental Duties", "Emergency provisions"], answer: 1 },
        { text: "The Preamble itself is a:", options: ["Law", "Resolution", "Declaration", "Part of the oath of office"], answer: 2 },
        { text: "The word 'Integrity' was added to the Preamble to prevent:", options: ["Fissiparous tendencies", "Economic disparity", "Social inequality", "Religious conflicts"], answer: 0 },
        { text: "The Preamble starts with the phrase:", options: ["We, the Constituent Assembly...", "We, the People of India...", "In the name of God...", "On this day, 26th November...."], answer: 1 },
        { text: "The term 'Democratic' encompasses:", options: ["Direct democracy", "Indirect democracy", "Both, depending on the context", "Only representative parliamentary democracy"], answer: 3 },
        { text: "The Preamble's objective of 'Liberty of thought, expression, belief, faith and worship' is guaranteed as a Fundamental Right in:", options: ["Art 14-18", "Art 19-22", "Art 25-28", "Both b and c"], answer: 3 },
        { text: "The Preamble is considered the 'key to the minds of the makers of the Constitution' because:", options: ["It was written by all of them", "It was the first part to be enacted", "It reflects the ideals they wanted to achieve", "It is legally binding"], answer: 2 },
        { text: "The Preamble's objective of 'Equality of status and of opportunity' is furthered by which articles?", options: ["Art 14, 15, 16", "Art 19", "Art 21", "Art 32"], answer: 0 },
        { text: "The word 'Socialist' in the Preamble implies a commitment to:", options: ["State ownership of all means of production", "A mixed economy with a goal to end poverty and inequality", "A classless society through revolution", "Abolition of private property"], answer: 1 },
        { text: "The Preamble is a source of:", options: ["Power to the legislature", "Prohibition upon the powers of the legislature", "Neither a source of power nor a prohibition", "Power to the judiciary"], answer: 2 },
        { text: "In the S.R. Bommai case (1994), the Supreme Court held that _______ is a 'basic feature' of the Constitution.", options: ["Socialism", "Secularism", "Republic", "Sovereignty"], answer: 1 },
        { text: "The Preamble aims to establish a society based on:", options: ["Individualism", "Totalitarianism", "Egalitarianism", "Anarchy"], answer: 2 },
        { text: "The only part of the Preamble that has a date is the:", options: ["Enacting formula", "Declaration", "Objectives", "The very end"], answer: 3 },
        { text: "The Preamble was enacted by the Constituent Assembly:", options: ["Before the rest of the Constitution", "After the rest of the Constitution was already enacted", "Simultaneously with Article 1", "It was never formally enacted"], answer: 1 },
        { text: "The ideals of liberty, equality, and fraternity in the Preamble are inspired by the:", options: ["French Revolution", "Russian Revolution", "American War of Independence", "Glorious Revolution"], answer: 0 },
        { text: "The Preamble helps in clarifying ambiguity in the interpretation of the Constitution, acting as a:", options: ["Guiding star", "Binding rule", "Historical document only", "Political speech"], answer: 0 },
        { text: "The phrase 'unity and integrity of the Nation' implies:", options: ["Territorial integrity only", "Psychological feeling of oneness among citizens", "Both territorial dimension and psychological dimension", "Unity among states only"], answer: 2 },
        { text: "The term 'political justice' means:", options: ["One person one vote", "Equal access to political offices", "Equal voice in government", "All of the above"], answer: 3 },
        { text: "The term 'social justice' denotes:", options: ["Equal treatment of all citizens without any social distinction", "Abolition of poverty", "Equal pay for equal work", "Reservation for women in Parliament"], answer: 0 },
        { text: "The Preamble clarifies the objectives which the Constitution seeks to establish and promote, thereby defining the:", options: ["Structure of government", "Powers of the judiciary", "Ultimate goals of the nation", "Limits on government power"], answer: 2 },
        { text: "The term 'fraternity' was proposed for the Preamble by:", options: ["Sardar Patel", "J.L. Nehru", "B.R. Ambedkar", "K.M. Munshi"], answer: 2 },
        { text: "The Indian Constitution is fundamentally:", options: ["Social", "Political", "Socio-political", "A document of social revolution"], answer: 3 },
        { text: "The Preamble is essentially a/an:", options: ["Legal contract", "Political testament", "Statement of intent and a pledge", "Historical preface"], answer: 2 },
        { text: "What does the term 'economic justice' seek to eliminate?", options: ["Social discrimination", "Glaring inequalities in wealth, income, and property", "Political oppression", "Religious intolerance"], answer: 1 },
        { text: "The Preamble's ideals are further elaborated in which parts of the Constitution?", options: ["Part III (FRs) & Part IV (DPSP)", "Part V (Union) & Part VI (States)", "Schedules 1 & 2", "The amendment procedure"], answer: 0 },
        { text: "The Preamble's declaration of India as a 'Republic' became a reality on:", options: ["15 Aug 1947", "26 Nov 1949", "26 Jan 1950", "1 Jan 1948"], answer: 2 },
        { text: "The Preamble is a part of the Constitution's:", options: ["Enforceable provisions", "Basic structure", "Annexe", "Introduction only"], answer: 1 },
        { text: "The concept of 'liberty' in the Preamble is not absolute but qualified, meaning it is subject to:", options: ["Presidential discretion", "Parliamentary vote", "Reasonable restrictions", "Judicial veto"], answer: 2 },
        { text: "The Preamble promotes fraternity by establishing a system of:", options: ["Double citizenship", "Single citizenship", "Economic zones", "Separate electorates"], answer: 1 },
        { text: "The text of the Preamble aims for a balance between:", options: ["Individual liberty and social control", "State rights and central authority", "Executive and legislative power", "FRs and FDs"], answer: 0 },
        { text: "In the LIC of India case (1995), the Supreme Court again held that the Preamble is a/an _______ part of the Constitution.", options: ["Integral", "Non-essential", "Historical", "Redundant"], answer: 0 },
        { text: "The Indian concept of 'Secularism' is a:", options: ["Negative concept (separation of religion and state)", "Positive concept (equal respect for all religions)", "A mix of both", "A concept borrowed from the USA"], answer: 1 },
        { text: "The Preamble's objective to secure 'dignity of the individual' is reflected in which Fundamental Right?", options: ["Art 14", "Art 17", "Art 21", "All of the above"], answer: 3 },
        { text: "The ultimate source of political authority in India, according to the Preamble, is the:", options: ["Constitution", "Parliament", "President", "People"], answer: 3 },
        // Chapter 5: Union and its Territory (60 MCQs)
        { text: "Article 1 of the Constitution describes India as a:", options: ["Federation of States", "Union of States", "Confederation of States", "Quasi-Federal State"], answer: 1 },
        { text: "The term 'Union of States' has been preferred over 'Federation of States' because:", options: ["The Indian Federation is not the result of an agreement among the states", "The states have no right to secede from the federation", "Both a and b", "It sounds better"], answer: 2 },
        { text: "The power to admit into the Union of India new states which are not part of India is given to Parliament by:", options: ["Article 1", "Article 2", "Article 3", "Article 4"], answer: 1 },
        { text: "The power to form new states by altering the boundaries of existing states rests with:", options: ["The President", "The Parliament", "The State Legislature", "The Supreme Court"], answer: 1 },
        { text: "A bill for the purpose of altering state boundaries can be introduced in Parliament only with the prior recommendation of the:", options: ["Prime Minister", "President", "Speaker of Lok Sabha", "Concerned State Governor"], answer: 1 },
        { text: "Before recommending a bill for altering state boundaries, the President has to refer it to the:", options: ["Supreme Court", "State legislature concerned for expressing its views", "Cabinet", "Inter-State Council"], answer: 1 },
        { text: "Is the Parliament bound by the views of the state legislature on a bill altering its boundary?", options: ["Yes, always", "Yes, if passed by a special majority", "No, Parliament is not bound", "Only if it's a Union Territory"], answer: 2 },
        { text: "Laws made for admission or establishment of new states (under Art 2) and formation of new states (under Art 3) are not to be considered as amendments of the Constitution under:", options: ["Article 368", "Article 356", "Article 248", "Article 1"], answer: 0 },
        { text: "This means such laws can be passed by a:", options: ["Special majority", "Simple majority", "Special majority with ratification by states", "Referendum"], answer: 1 },
        { text: "The integration of princely states into the Indian union was mainly the work of:", options: ["Jawaharlal Nehru", "Sardar Vallabhbhai Patel", "B.R. Ambedkar", "Lord Mountbatten"], answer: 1 },
        { text: "Which commission was appointed in 1948 to examine the feasibility of reorganising states on a linguistic basis?", options: ["Fazl Ali Commission", "JVP Committee", "Dhar Commission", "States Reorganisation Commission"], answer: 2 },
        { text: "The Dhar Commission recommended reorganisation of states on the basis of:", options: ["Linguistic factor", "Administrative convenience", "Geographical contiguity", "Religion"], answer: 1 },
        { text: "The JVP committee, consisting of Nehru, Patel, and Pattabhi Sitaramayya, had what view on linguistic reorganisation?", options: ["Formally rejected language as the basis", "Accepted it immediately", "Suggested a 10-year delay", "Accepted it for South India only"], answer: 0 },
        { text: "Which was the first linguistic state to be created in India?", options: ["Kerala", "Tamil Nadu", "Andhra State", "Karnataka"], answer: 2 },
        { text: "The creation of Andhra state in 1953 was a result of the death of _______ after a 56-day hunger strike.", options: ["C. Rajagopalachari", "Potti Sriramulu", "T. Prakasam", "K. Kamaraj"], answer: 1 },
        { text: "The Fazl Ali Commission (1953) broadly accepted language as the basis of reorganisation but rejected the theory of:", options: ["'one language-one state'", "'administrative convenience'", "'financial viability'", "'national unity'"], answer: 0 },
        { text: "The States Reorganisation Act was passed in:", options: ["1953", "1955", "1956", "1960"], answer: 2 },
        { text: "The States Reorganisation Act of 1956 created:", options: ["16 States and 3 UTs", "14 States and 6 UTs", "22 States and 9 UTs", "15 States and 5 UTs"], answer: 1 },
        { text: "The state of Bombay was bifurcated into Maharashtra and Gujarat in:", options: ["1956", "1960", "1966", "1971"], answer: 1 },
        { text: "Nagaland was created as a separate state in:", options: ["1960", "1963", "1966", "1972"], answer: 1 },
        { text: "The state of Haryana was carved out of Punjab in 1966 on the recommendation of the:", options: ["Fazl Ali Commission", "Shah Commission", "Sarkaria Commission", "Dhar Commission"], answer: 1 },
        { text: "Himachal Pradesh was elevated from a Union Territory to a state in:", options: ["1966", "1971", "1975", "1987"], answer: 1 },
        { text: "The states of Manipur, Tripura, and Meghalaya were created in:", options: ["1971", "1972", "1975", "1987"], answer: 1 },
        { text: "Sikkim was made a full-fledged state of the Union of India by the:", options: ["35th Amendment", "36th Amendment", "42nd Amendment", "22nd Amendment"], answer: 1 },
        { text: "Mizoram, Arunachal Pradesh, and Goa became states in:", options: ["1972", "1975", "1987", "2000"], answer: 2 },
        { text: "The states of Chhattisgarh, Uttarakhand, and Jharkhand were created in the year:", options: ["1999", "2000", "2001", "2014"], answer: 1 },
        { text: "Telangana was created as the 29th state by bifurcating:", options: ["Karnataka", "Tamil Nadu", "Andhra Pradesh", "Maharashtra"], answer: 2 },
        { text: "The power to cede Indian territory to a foreign country vests with:", options: ["The President", "The Prime Minister", "The Parliament through a constitutional amendment", "A treaty signed by the executive"], answer: 2 },
        { text: "In which case did the Supreme Court hold that ceding territory requires a constitutional amendment under Art 368?", options: ["Kesavananda Bharati case", "Berubari Union case (1960)", "Golaknath case", "Maneka Gandhi case"], answer: 1 },
        { text: "Does the settlement of a boundary dispute with another country require a constitutional amendment?", options: ["Yes, always", "No, it can be done by an executive action", "Yes, but only with a simple majority", "It requires a referendum"], answer: 1 },
        { text: "The acquisition of foreign territories by India is governed by:", options: ["Article 2", "Article 3", "International law", "A specific Act of Parliament"], answer: 2 },
        { text: "The term 'Territory of India' in Article 1 is a wider expression than the 'Union of India' because it includes:", options: ["States only", "UTs only", "States, UTs, and territories that may be acquired", "States and UTs only"], answer: 2 },
        { text: "Article 3 empowers Parliament to increase or diminish the ______ of any state.", options: ["Area", "Population", "Financial resources", "Political power"], answer: 0 },
        { text: "The consent of the state legislature for a bill altering its name or boundary is:", options: ["Mandatory and binding", "A mere formality", "Required only for UTs", "Binding if passed unanimously"], answer: 1 },
        { text: "Zonal Councils were created to promote inter-state cooperation. They are:", options: ["Constitutional bodies", "Statutory bodies", "Executive bodies", "Ad-hoc bodies"], answer: 1 },
        { text: "Zonal councils were established by the:", options: ["Constitution of India", "States Reorganisation Act, 1956", "A Presidential Order", "42nd Amendment Act"], answer: 1 },
        { text: "The Chairman of each Zonal Council is the:", options: ["Prime Minister", "President", "Union Home Minister", "Chief Minister of a state by rotation"], answer: 2 },
        { text: "The North-Eastern Council was created by a separate Act of Parliament in:", options: ["1956", "1963", "1971", "1987"], answer: 2 },
        { text: "The reorganisation of states in India has primarily been driven by the principle of:", options: ["Language and culture", "Economic viability", "Administrative convenience", "All of the above"], answer: 3 },
        { text: "The territory of Puducherry (Pondicherry) was a former colony of the:", options: ["British", "Portuguese", "Dutch", "French"], answer: 3 },
        { text: "Goa, Daman and Diu were liberated from Portuguese rule in 1961 by:", options: ["A referendum", "Police action", "A treaty", "A UN resolution"], answer: 1 },
        { text: "The name of the state 'Madras' was changed to 'Tamil Nadu' in:", options: ["1956", "1969", "1973", "1992"], answer: 1 },
        { text: "The name 'Mysore' was changed to 'Karnataka' in:", options: ["1956", "1969", "1973", "2001"], answer: 2 },
        { text: "The name 'Uttaranchal' was changed to 'Uttarakhand' in:", options: ["2000", "2004", "2007", "2011"], answer: 2 },
        { text: "The change of name of a state requires:", options: ["A Constitutional Amendment under Art 368", "An Act of Parliament passed by a simple majority", "An executive order of the President", "A resolution by the state assembly only"], answer: 1 },
        { text: "Which Article states that the territory of India shall comprise the territories of the states, the UTs, and any acquired territories?", options: ["Article 1", "Article 2", "Article 3", "Article 4"], answer: 0 },
        { text: "The Parliament can redraw the political map of India according to its will. This makes India a/an:", options: ["Indestructible union of indestructible states", "Indestructible union of destructible states", "Destructible union of indestructible states", "Destructible union of destructible states"], answer: 1 },
        { text: "The USA, in contrast to India, is described as a/an:", options: ["Indestructible union of indestructible states", "Indestructible union of destructible states", "Destructible union of indestructible states", "Union with seceding rights"], answer: 0 },
        { text: "The demand for creation of new states is often linked to:", options: ["Perceived regional disparity", "Distinct culture or ethnicity", "Administrative problems of large states", "All of the above"], answer: 3 },
        { text: "Can Parliament diminish the area of a state to zero, effectively abolishing it?", options: ["No, it's a basic feature", "Yes, the power under Article 3 is absolute", "Only with Supreme Court permission", "Only with a 2/3rds majority in the state assembly"], answer: 1 },
        { text: "The exchange of enclaves with Bangladesh was actualised by the:", options: ["99th Amendment", "100th Amendment", "101st Amendment", "An executive order"], answer: 1 },
        { text: "The former princely state of Jammu & Kashmir was integrated into India through a/an:", options: ["Police action", "Referendum", "Instrument of Accession", "War"], answer: 2 },
        { text: "The integration of Hyderabad was achieved through:", options: ["A referendum", "A treaty", "Police Action (Operation Polo)", "An Instrument of Accession"], answer: 2 },
        { text: "The integration of Junagarh was achieved through:", options: ["Police Action", "A referendum", "An Instrument of Accession", "A treaty"], answer: 1 },
        { text: "The Laccadive, Minicoy and Amindivi Islands were renamed as 'Lakshadweep' in:", options: ["1956", "1971", "1973", "1991"], answer: 2 },
        { text: "The administration of Union Territories is handled by:", options: ["The Prime Minister directly", "A Chief Minister in all cases", "The President through an administrator", "The Union Home Ministry"], answer: 2 },
        { text: "Article 3 gives Parliament the power to form a new state by:", options: ["Separation of territory from any state", "Uniting two or more states", "Uniting any territory to a part of any state", "All of the above"], answer: 3 },
        { text: "The process of state reorganisation under Article 3 begins with:", options: ["A bill in Parliament", "A resolution in the state assembly", "A Presidential reference to the state", "A Supreme Court order"], answer: 0 },
        { text: "The Dadra and Nagar Haveli territory was under ______ rule before its liberation in 1954.", options: ["French", "British", "Portuguese", "Dutch"], answer: 2 },
        { text: "The reorganisation of North-Eastern states in 1972 was done under the:", options: ["States Reorganisation Act", "North-Eastern Areas (Reorganisation) Act, 1971", "22nd Constitutional Amendment", "27th Constitutional Amendment"], answer: 1 },
        // Chapter 6: Citizenship (60 MCQs)
        { text: "Citizenship is covered in which Part of the Constitution?", options: ["Part I", "Part II", "Part III", "Part IV"], answer: 1 },
        { text: "The articles dealing with citizenship are:", options: ["Articles 1-4", "Articles 5-11", "Articles 12-35", "Articles 36-51"], answer: 1 },
        { text: "The Constitution of India provides for:", options: ["Single citizenship", "Dual citizenship", "Multiple citizenships", "No citizenship"], answer: 0 },
        { text: "The power to make any provision with respect to the acquisition and termination of citizenship rests with:", options: ["The President", "The Parliament", "The Supreme Court", "The State Legislatures"], answer: 1 },
        { text: "Indian citizenship can be acquired through:", options: ["Birth", "Descent", "Registration and Naturalisation", "All of the above"], answer: 3 },
        { text: "A person born in India on or after 26th January 1950 but before 1st July 1987 is a citizen by birth:", options: ["Irrespective of the nationality of his parents", "Only if his father is a citizen", "Only if his mother is a citizen", "Only if both parents are citizens"], answer: 0 },
        { text: "The Citizenship Act of 1955 has been amended how many times?", options: ["Twice", "Four times", "Six times", "Nine times (as of recent amendments)"], answer: 3 },
        { text: "Loss of citizenship can occur through:", options: ["Renunciation", "Termination", "Deprivation", "All of the above"], answer: 3 },
        { text: "'Renunciation' of citizenship is a/an:", options: ["Compulsory act", "Voluntary act", "Judicial act", "Automatic act"], answer: 1 },
        { text: "'Termination' of citizenship occurs when an Indian citizen:", options: ["Criticises the government", "Voluntarily acquires the citizenship of another country", "Stays abroad for more than 7 years", "Commits a crime"], answer: 1 },
        { text: "'Deprivation' is a compulsory termination of citizenship obtained by:", options: ["Birth", "Descent", "Fraud or misrepresentation", "Marriage"], answer: 2 },
        { text: "The concept of single citizenship is borrowed from:", options: ["USA", "Canada", "UK", "Australia"], answer: 2 },
        { text: "In India, a person who is not a citizen is either a/an:", options: ["Friend or Foe", "Alien or Stateless person", "Friendly alien or enemy alien", "Refugee or Asylum seeker"], answer: 2 },
        { text: "An 'enemy alien' is a citizen of a country that:", options: ["India does not have diplomatic relations with", "Is a member of an opposing military bloc", "India is at war with", "Is a communist state"], answer: 2 },
        { text: "Enemy aliens are denied protection against arrest and detention under which article?", options: ["Article 19", "Article 21", "Article 22", "Article 14"], answer: 2 },
        { text: "The Citizenship (Amendment) Act, 2019, provides a path to citizenship for persecuted religious minorities from which countries?", options: ["Pakistan, Bangladesh, Nepal", "Pakistan, Bangladesh, Afghanistan", "Pakistan, Afghanistan, Myanmar", "Pakistan, China, Bangladesh"], answer: 1 },
        { text: "The cut-off date for eligibility under the CAA, 2019 is:", options: ["Dec 31, 2014", "Aug 15, 1947", "Jan 26, 1950", "Dec 31, 2000"], answer: 0 },
        { text: "Which of the following rights is available only to citizens of India?", options: ["Right to equality before law", "Right to freedom of religion", "Right against discrimination on grounds of religion, race, caste, sex or place of birth", "Right to life and personal liberty"], answer: 2 },
        { text: "Which article of the Constitution deals with the rights of citizenship of certain persons who have migrated to India from Pakistan?", options: ["Article 5", "Article 6", "Article 7", "Article 8"], answer: 1 },
        { text: "The PIO (Persons of Indian Origin) and OCI (Overseas Citizen of India) card schemes were merged in:", options: ["2005", "2010", "2015", "2019"], answer: 2 },
        { text: "An Overseas Citizen of India (OCI) cardholder does NOT have the right to:", options: ["Own property in India", "Visit India without a visa", "Vote in elections", "Practice a profession"], answer: 2 },
        { text: "The term 'domicile' for the purpose of citizenship means:", options: ["A temporary residence", "A permanent home with the intention of staying indefinitely", "The place of birth", "The place of parents' residence"], answer: 1 },
        { text: "Citizenship by 'Naturalisation' requires a person to reside in India for a certain period, which is generally:", options: ["5 years", "7 years", "10 years", "12 years (11 out of last 14)"], answer: 3 },
        { text: "A person can become a citizen of India even if born outside India if his/her:", options: ["Father is a citizen of India", "Mother is a citizen of India", "Either father or mother is a citizen of India at the time of the person's birth", "Grandfather was a citizen"], answer: 2 },
        { text: "Dual citizenship is a feature of:", options: ["Unitary governments", "Federal governments like the USA", "Monarchies", "All democracies"], answer: 1 },
        { text: "The constitutional provisions on citizenship (Art 5-11) are:", options: ["A permanent and exhaustive code", "Provisions that identify persons who became citizens at the commencement of the Constitution", "Applicable to all post-1950 acquisitions", "Meant for UTs only"], answer: 1 },
        { text: "The details of acquiring and terminating citizenship are provided in the:", options: ["Constitution itself", "Citizenship Act, 1955", "Representation of the People Act, 1951", "Presidential Orders"], answer: 1 },
        { text: "The 'Commonwealth Citizenship' provision in the Citizenship Act, 1955 was repealed in:", options: ["1986", "1992", "2003", "2015"], answer: 2 },
        { text: "A person is deemed to be of 'Indian Origin' if he, or either of his parents or any of his grandparents, was born in:", options: ["British India", "Post-1947 India", "Undivided India", "The Indian subcontinent"], answer: 2 },
        { text: "The National Register of Citizens (NRC) is a register containing names of all:", options: ["Voters", "Taxpayers", "Genuine Indian citizens", "Residents of a state"], answer: 2 },
        { text: "The NRC was first prepared for which state in 1951?", options: ["West Bengal", "Punjab", "Assam", "Jammu & Kashmir"], answer: 2 },
        { text: "The update of the NRC in Assam was monitored by the:", options: ["Parliament", "High Court of Assam", "Supreme Court of India", "Election Commission"], answer: 2 },
        { text: "Can a person who has voluntarily renounced Indian citizenship re-acquire it?", options: ["No, never", "Yes, through registration or naturalisation", "Yes, automatically after 5 years", "Only by a special act of Parliament"], answer: 1 },
        { text: "The President of India must be:", options: ["A citizen by birth only", "A citizen of India (can be naturalised)", "A citizen who has resided in India for 10 years", "A citizen born in India to Indian parents"], answer: 1 },
        { text: "In contrast, the President of which country must be a 'natural-born' citizen?", options: ["UK", "France", "USA", "Canada"], answer: 2 },
        { text: "Citizenship by 'incorporation of territory' occurs when:", options: ["A new island emerges", "A foreign territory becomes a part of India", "A state is reorganised", "A UT is created"], answer: 1 },
        { text: "A minor child whose Indian parent(s) renounce citizenship:", options: ["Also loses citizenship automatically", "Can resume Indian citizenship within one year of attaining full age", "Remains an Indian citizen", "Becomes a stateless person"], answer: 1 },
        { text: "Which fundamental right is exclusively available to citizens?", options: ["Art 21 (Right to Life)", "Art 19 (Six Freedoms)", "Art 25 (Freedom of Religion)", "Art 14 (Equality before Law)"], answer: 1 },
        { text: "The right to hold certain public offices (like President, VP, Judge) is reserved for:", options: ["All residents", "Citizens only", "Citizens by birth only", "OCI cardholders"], answer: 1 },
        { text: "Article 9 of the Constitution states that a person who voluntarily acquires citizenship of a foreign state shall:", options: ["Have dual citizenship", "Be allowed to vote", "No longer be a citizen of India", "Be deported immediately"], answer: 2 },
        { text: "The Citizenship Act, 1955, was enacted by Parliament using its powers under:", options: ["Article 10", "Article 11", "Article 368", "The Preamble"], answer: 1 },
        { text: "A person born in India after July 1, 1987, is a citizen only if:", options: ["He has lived in India for 7 years", "Either of his parents is a citizen of India at the time of his birth", "He renounces other potential citizenships", "He applies for it"], answer: 1 },
        { text: "A person born in India after Dec 3, 2004, is a citizen only if:", options: ["Both parents are citizens, or one is a citizen and the other is not an illegal migrant", "Both parents were born in India", "The person registers with the local authority", "The person is of Indian ethnicity"], answer: 0 },
        { text: "Deprivation of citizenship can happen if a person shows disloyalty to the:", options: ["Government of the day", "Ruling political party", "Constitution of India", "President of India"], answer: 2 },
        { text: "An OCI cardholder is exempted from:", options: ["Paying income tax", "Police reporting for any length of stay", "Following Indian laws", "Needing a student visa to study"], answer: 1 },
        { text: "The concept of 'Non-Resident Indian' (NRI) is defined under the:", options: ["Citizenship Act", "Income Tax Act", "Foreign Exchange Management Act (FEMA)", "Representation of the People Act"], answer: 2 },
        { text: "Which committee recommended the introduction of the Pravasi Bharatiya Divas (NRI Day)?", options: ["L.M. Singhvi Committee", "Sarkaria Commission", "Swaran Singh Committee", "Punchhi Commission"], answer: 0 },
        { text: "Pravasi Bharatiya Divas is celebrated on January 9 to commemorate:", options: ["The start of the freedom struggle", "Mahatma Gandhi's return from South Africa", "The enactment of the Citizenship Act", "The first NRI investment summit"], answer: 1 },
        { text: "Article 8 deals with the citizenship rights of:", options: ["People who migrated from Pakistan", "People who migrated to Pakistan", "Persons of Indian origin residing outside India", "People in incorporated territories"], answer: 2 },
        { text: "Can an OCI cardholder acquire agricultural land in India?", options: ["Yes, freely", "No, it is prohibited", "Yes, but only in specific states", "Yes, if they are also an NRI"], answer: 1 },
        { text: "The citizenship of a person can be deprived if they have been ordinarily resident out of India for ___ years continuously.", options: ["3", "5", "7", "10"], answer: 2 },
        { text: "The authority to grant or reject citizenship applications lies with the:", options: ["President's Office", "Prime Minister's Office", "Ministry of Home Affairs", "Ministry of External Affairs"], answer: 2 },
        { text: "The principle of *jus soli* (right of the soil) means citizenship by:", options: ["Birth", "Bloodline", "Naturalisation", "Marriage"], answer: 0 },
        { text: "The principle of *jus sanguinis* (right of blood) means citizenship by:", options: ["Place of birth", "Descent/ancestry", "Place of residence", "A legal declaration"], answer: 1 },
        { text: "India's citizenship laws have moved from a pure *jus soli* principle towards:", options: ["A pure *jus sanguinis* principle", "A mixed principle of *jus soli* and *jus sanguinis*", "Abolition of citizenship by birth", "Citizenship based on religion"], answer: 1 },
        { text: "Which right is available to both citizens and friendly aliens?", options: ["Right to vote", "Right to contest elections", "Right to life and personal liberty (Art 21)", "Right to hold public office"], answer: 2 },
        { text: "Article 10 states that a person's citizenship shall continue subject to:", options: ["The pleasure of the President", "The provisions of any law made by Parliament", "Good moral character", "An annual review"], answer: 1 },
        { text: "The constitutional provisions regarding citizenship at its commencement were:", options: ["Forward-looking", "Temporary and transitional in nature", "Comprehensive and final", "Meant only for 10 years"], answer: 1 },
        { text: "The L.M. Singhvi Committee (2000) recommended the grant of:", options: ["Voting rights to NRIs", "Dual citizenship to PIOs of certain countries", "A separate ministry for overseas Indians", "Free education for children of NRIs"], answer: 1 },
        { text: "The Citizenship (Amendment) Act of 1986 made the acquisition of citizenship by birth:", options: ["Easier", "More restrictive", "Automatic for everyone", "Dependent on religion"], answer: 1 },
        // Chapter 7: Fundamental Rights (60 MCQs)
        { text: "Fundamental Rights are enshrined in which Part of the Constitution?", options: ["Part II", "Part III", "Part IV", "Part IVA"], answer: 1 },
        { text: "The Fundamental Rights are covered in Articles:", options: ["5-11", "12-35", "36-51", "51A"], answer: 1 },
        { text: "The concept of Fundamental Rights is borrowed from the Constitution of:", options: ["UK", "USA (Bill of Rights)", "Ireland", "Canada"], answer: 1 },
        { text: "Fundamental Rights are described as the _________ of the Indian Constitution.", options: ["Preamble", "Conscience", "Magna Carta", "Soul"], answer: 2 },
        { text: "Fundamental Rights are:", options: ["Not justiciable", "Justiciable", "Justiciable only for citizens", "Justiciable only during an emergency"], answer: 1 },
        { text: "Article 12 defines the term 'State' for the purpose of Part III. It includes:", options: ["Government and Parliament of India", "Government and Legislature of states", "Local authorities like municipalities, panchayats", "All of the above"], answer: 3 },
        { text: "Article 13 declares that laws inconsistent with Fundamental Rights shall be:", options: ["Void", "Valid", "Valid if passed by a 2/3 majority", "Voidable at the option of the President"], answer: 0 },
        { text: "The power of the judiciary to declare a law unconstitutional is called:", options: ["Judicial Activism", "Judicial Review", "Judicial Oversight", "Judicial Supremacy"], answer: 1 },
        { text: "Originally, the Constitution provided for how many Fundamental Rights?", options: ["5", "6", "7", "8"], answer: 2 },
        { text: "The Right to Property was removed from the list of Fundamental Rights by the:", options: ["42nd Amendment", "44th Amendment", "24th Amendment", "1st Amendment"], answer: 1 },
        { text: "Currently, the Right to Property is a:", options: ["Fundamental Right", "Legal Right under Article 300-A", "DPSP", "Customary Right"], answer: 1 },
        { text: "The Right to Equality is guaranteed from Articles:", options: ["14 to 18", "19 to 22", "23 to 24", "25 to 28"], answer: 0 },
        { text: "Article 14 guarantees:", options: ["Equality before law and equal protection of laws", "Equality of opportunity", "Abolition of titles", "Prohibition of discrimination"], answer: 0 },
        { text: "The concept of 'Equality before Law' is of _______ origin.", options: ["American", "British", "French", "Irish"], answer: 1 },
        { text: "The concept of 'Equal Protection of Laws' is of _______ origin.", options: ["American", "British", "French", "Japanese"], answer: 0 },
        { text: "Article 15 prohibits discrimination on grounds of:", options: ["Religion, race, caste, sex or place of birth", "Religion, race, residence", "Sex, age, wealth", "Caste, class, language"], answer: 0 },
        { text: "Article 16 guarantees equality of opportunity in matters of:", options: ["Private employment", "Public employment", "Social gatherings", "Political appointments"], answer: 1 },
        { text: "Article 17 deals with the abolition of:", options: ["Titles", "Slavery", "Untouchability", "Child Labour"], answer: 2 },
        { text: "Article 18 deals with the abolition of:", options: ["Titles", "Untouchability", "Taxes", "Dowry"], answer: 0 },
        { text: "The Right to Freedom is guaranteed from Articles:", options: ["14 to 18", "19 to 22", "23 to 24", "25 to 28"], answer: 1 },
        { text: "Article 19 guarantees six rights, including:", options: ["Freedom of speech and expression", "Freedom to assemble peaceably", "Freedom to form associations", "All of the above"], answer: 3 },
        { text: "The Freedom of the Press is implied in which Article?", options: ["Article 19(1)(a)", "Article 21", "Article 14", "Article 32"], answer: 0 },
        { text: "The rights under Article 19 are suspended during an external emergency on the grounds of:", options: ["War or armed rebellion", "War or external aggression", "Financial instability", "Failure of constitutional machinery"], answer: 1 },
        { text: "Article 20 provides protection in respect of:", options: ["Conviction for offences", "Life and liberty", "Arrest and detention", "Religious freedom"], answer: 0 },
        { text: "Article 20 protects against:", options: ["Ex-post-facto law", "Double jeopardy", "Self-incrimination", "All of the above"], answer: 3 },
        { text: "Which Article is described as the 'most important article' and the 'procedural magna carta'?", options: ["Article 19", "Article 20", "Article 21", "Article 22"], answer: 2 },
        { text: "Article 21 guarantees:", options: ["Right to life and personal liberty", "Right to property", "Right to freedom of speech", "Right to travel abroad"], answer: 0 },
        { text: "The Right to Education for children between 6 and 14 years was made a Fundamental Right by which amendment?", options: ["42nd", "44th", "86th", "91st"], answer: 2 },
        { text: "The Right to Education is now part of which article?", options: ["Article 19", "Article 21A", "Article 29", "Article 45"], answer: 1 },
        { text: "Article 22 provides protection against:", options: ["Conviction", "Arrest and detention", "Double jeopardy", "Ex-post-facto law"], answer: 1 },
        { text: "The Right against Exploitation is covered in Articles:", options: ["19-20", "21-22", "23-24", "25-28"], answer: 2 },
        { text: "Article 23 prohibits:", options: ["Child labour", "Traffic in human beings and forced labour (begar)", "Untouchability", "Religious instruction in state schools"], answer: 1 },
        { text: "Article 24 prohibits the employment of children below the age of ___ in hazardous industries.", options: ["12", "14", "16", "18"], answer: 1 },
        { text: "The Right to Freedom of Religion is guaranteed from Articles:", options: ["23-24", "25-28", "29-30", "31-32"], answer: 1 },
        { text: "Article 25 guarantees freedom of:", options: ["Conscience and free profession, practice, and propagation of religion", "Managing religious affairs", "Paying taxes for religion", "Attending religious instruction"], answer: 0 },
        { text: "Cultural and Educational Rights are guaranteed in Articles:", options: ["25-28", "29-30", "31", "32"], answer: 1 },
        { text: "Article 29 protects the interests of:", options: ["All citizens", "Minorities", "Scheduled Castes", "Women"], answer: 1 },
        { text: "Article 30 grants minorities the right to:", options: ["Establish and administer educational institutions of their choice", "Propagate their religion", "Get government jobs", "Form political parties"], answer: 0 },
        { text: "The term 'minority' in Article 30 is defined based on:", options: ["Religion or language", "Race or ethnicity", "Region or culture", "Caste or class"], answer: 0 },
        { text: "Which Article is called the 'heart and soul' of the Constitution by Dr. Ambedkar?", options: ["Article 14", "Article 19", "Article 21", "Article 32"], answer: 3 },
        { text: "Article 32 provides the Right to:", options: ["Constitutional Remedies", "Property", "Education", "Equality"], answer: 0 },
        { text: "Under Article 32, the Supreme Court can issue writs. Which of the following is NOT a writ?", options: ["Habeas Corpus", "Mandamus", "Injunction", "Quo-Warranto"], answer: 2 },
        { text: "The writ of 'Habeas Corpus' literally means:", options: ["'We command'", "'To have the body of'", "'To forbid'", "'By what authority'"], answer: 1 },
        { text: "The writ of 'Mandamus' is issued to:", options: ["Produce a person", "Command a public official to perform his official duty", "Quash an order", "Enquire into the legality of a claim to a public office"], answer: 1 },
        { text: "The writ of 'Certiorari' is issued by a higher court to a lower court to:", options: ["Transfer a case pending with the latter to itself or to quash the order of the latter", "Stop proceedings in a case", "Command it to perform a duty", "Release a detained person"], answer: 0 },
        { text: "Which fundamental rights cannot be suspended even during a National Emergency?", options: ["Article 19 and 20", "Article 20 and 21", "Article 21 and 22", "Article 14 and 19"], answer: 1 },
        { text: "Article 33 empowers the Parliament to restrict the Fundamental Rights of members of:", options: ["The armed forces", "Para-military forces", "Police forces", "All of the above"], answer: 3 },
        { text: "Article 34 provides for the restriction of Fundamental Rights while ________ is in force in any area.", options: ["A financial emergency", "President's Rule", "Martial Law", "A public holiday"], answer: 2 },
        { text: "Article 35 gives the power to make laws on certain Fundamental Rights to:", options: ["The Parliament only", "The State Legislatures only", "Both Parliament and State Legislatures", "The President"], answer: 0 },
        { text: "The 'Doctrine of Severability' related to Article 13 means:", options: ["The entire law is void", "Only the inconsistent part of a law is void", "The law is void from the beginning", "The law is temporarily invalid"], answer: 1 },
        { text: "The 'Doctrine of Eclipse' means a pre-constitutional law inconsistent with FRs:", options: ["Becomes dead", "Becomes dormant and can be revived if the FR is amended", "Is removed from the statute book", "Applies to non-citizens"], answer: 1 },
        { text: "Which case is related to the 'basic structure' doctrine of the Constitution?", options: ["Golaknath case", "Kesavananda Bharati case", "Menaka Gandhi case", "A.K. Gopalan case"], answer: 1 },
        { text: "In the Menaka Gandhi case (1978), the Supreme Court ruled that the 'procedure' in Article 21 must be:", options: ["Quick and efficient", "Followed strictly", "Fair, just, and reasonable", "Decided by Parliament"], answer: 2 },
        { text: "The concept of 'reasonable restrictions' on Fundamental Rights is aimed at striking a balance between:", options: ["Individual liberty and social control", "Centre and state powers", "Fundamental Rights and DPSPs", "Executive and Judiciary"], answer: 0 },
        { text: "Can Fundamental Rights be amended?", options: ["No, they are part of the basic structure", "Yes, but without affecting the basic structure", "Yes, by a simple majority", "Only by a referendum"], answer: 1 },
        { text: "Which writ is issued to prevent a lower court from exceeding its jurisdiction?", options: ["Habeas Corpus", "Mandamus", "Prohibition", "Quo-Warranto"], answer: 2 },
        { text: "Which writ is issued to inquire into the legality of a person's claim to a public office?", options: ["Habeas Corpus", "Mandamus", "Prohibition", "Quo-Warranto"], answer: 3 },
        { text: "The right to form co-operative societies was made a fundamental right under Article 19 by the:", options: ["42nd Amendment", "44th Amendment", "86th Amendment", "97th Amendment"], answer: 3 },
        { text: "Some Fundamental Rights are available only to citizens, while others are available to:", options: ["All persons (citizens and foreigners)", "Foreigners only", "NRIs only", "OCI cardholders only"], answer: 0 },
        { text: "The writ jurisdiction of the High Courts under Article 226 is ________ than that of the Supreme Court under Article 32.", options: ["Narrower", "The same as", "Wider", "More powerful"], answer: 2 },
        // Chapter 8: Directive Principles of State Policy (60 MCQs)
        { text: "Directive Principles of State Policy (DPSP) are in which Part of the Constitution?", options: ["Part III", "Part IV", "Part V", "Part II"], answer: 1 },
        { text: "DPSPs are covered in Articles:", options: ["12-35", "36-51", "5-11", "52-78"], answer: 1 },
        { text: "The concept of DPSP was borrowed from the Constitution of:", options: ["USA", "UK", "Ireland", "Canada"], answer: 2 },
        { text: "The Irish Constitution had borrowed it from:", options: ["USA", "Spain", "France", "Russia"], answer: 1 },
        { text: "Dr. B.R. Ambedkar described DPSPs as:", options: ["'Novel features'", "'Instruments of Instruction'", "'Check on the government'", "'Pious superfluities'"], answer: 0 },
        { text: "Unlike Fundamental Rights, DPSPs are:", options: ["Justiciable", "Negative in character", "Non-justiciable", "Automatically enforced"], answer: 2 },
        { text: "Article 37 declares that DPSPs are _______ in the governance of the country.", options: ["Fundamental", "Optional", "Irrelevant", "Secondary"], answer: 0 },
        { text: "The DPSPs aim to establish a _______ state.", options: ["Laissez-faire", "Theocratic", "Police", "Welfare"], answer: 3 },
        { text: "DPSPs are broadly classified into:", options: ["Socialistic, Gandhian, and Liberal-Intellectual", "Political, Economic, and Social", "National and International", "Mandatory and Discretionary"], answer: 0 },
        { text: "Which DPSP directs the state to secure a social order for the promotion of the welfare of the people?", options: ["Article 36", "Article 37", "Article 38", "Article 39"], answer: 2 },
        { text: "Article 39A directs the state to provide:", options: ["Free legal aid to the poor", "Uniform Civil Code", "Village panchayats", "Free education"], answer: 0 },
        { text: "Article 40, which reflects Gandhian principles, directs the state to:", options: ["Prohibit cow slaughter", "Promote cottage industries", "Organize village panchayats", "Prohibit intoxicating drinks"], answer: 2 },
        { text: "Which Article calls for a Uniform Civil Code (UCC) for all citizens?", options: ["Article 41", "Article 42", "Article 43", "Article 44"], answer: 3 },
        { text: "Article 45, as amended by the 86th Act, provides for:", options: ["Early childhood care and education for all children until they complete the age of six years", "Free and compulsory education for 6-14 year olds", "Adult education", "Higher education"], answer: 0 },
        { text: "Article 48A, which deals with the protection of the environment, was added by the:", options: ["44th Amendment", "42nd Amendment", "24th Amendment", "86th Amendment"], answer: 1 },
        { text: "Which DPSP calls for the separation of the judiciary from the executive?", options: ["Article 49", "Article 50", "Article 51", "Article 48"], answer: 1 },
        { text: "Article 51 directs the state to promote:", options: ["International peace and security", "Cottage industries", "Scientific temper", "A uniform civil code"], answer: 0 },
        { text: "Which of the following is a Socialistic Principle among DPSPs?", options: ["Article 44 (UCC)", "Article 40 (Panchayats)", "Article 39 (equal pay for equal work)", "Article 50 (separation of judiciary)"], answer: 2 },
        { text: "Which of the following is a Liberal-Intellectual Principle?", options: ["Article 43B (co-operative societies)", "Article 40 (Panchayats)", "Article 48 (prohibit cow slaughter)", "Article 44 (UCC)"], answer: 3 },
        { text: "The 42nd Amendment Act of 1976 added which new DPSPs?", options: ["Art 39A, 43A, 48A", "Art 40, 44, 51", "Art 38, 45", "Art 47, 48"], answer: 0 },
        { text: "The 97th Amendment Act of 2011 added a DPSP related to:", options: ["Environment", "Free Legal Aid", "Co-operative societies (Article 43B)", "Monuments"], answer: 2 },
        { text: "Who described DPSPs as a 'cheque on a bank, payable only when the resources of the bank permit'?", options: ["B.R. Ambedkar", "K.T. Shah", "Jawaharlal Nehru", "N.G. Ranga"], answer: 1 },
        { text: "In the case of a conflict between Fundamental Rights and DPSPs, which should prevail?", options: ["DPSPs always", "The Supreme Court has held that FRs will prevail, but Parliament can amend FRs to implement DPSPs", "They are equal", "The one added later prevails"], answer: 1 },
        { text: "The 'doctrine of harmonious construction' is often used by the Supreme Court to:", options: ["Decide Centre-state disputes", "Balance FRs and DPSPs", "Interpret the Preamble", "Decide election disputes"], answer: 1 },
        { text: "In which case did the Supreme Court hold that the 'Indian Constitution is founded on the bedrock of the balance between the FRs and DPSPs'?", options: ["Golaknath case", "Kesavananda Bharati case", "Minerva Mills case", "Champakam Dorairajan case"], answer: 2 },
        { text: "DPSPs are in the nature of:", options: ["Positive directions to the state", "Negative prohibitions on the state", "Legally enforceable rights", "A mere declaration of intent"], answer: 0 },
        { text: "The implementation of which DPSP led to the establishment of the Panchayati Raj system?", options: ["Article 39A", "Article 40", "Article 44", "Article 48"], answer: 1 },
        { text: "The Maternity Benefit Act and the Minimum Wages Act are examples of the implementation of:", options: ["Gandhian principles", "Liberal principles", "Socialistic principles", "International principles"], answer: 2 },
        { text: "The Wildlife (Protection) Act, 1972 and Forest (Conservation) Act, 1980 were enacted to implement:", options: ["Article 47", "Article 48", "Article 48A", "Article 49"], answer: 2 },
        { text: "The establishment of the Law Commission and Legal Services Authorities implements:", options: ["Article 44", "Article 50", "Article 39A", "Article 51"], answer: 2 },
        { text: "The Criminal Procedure Code (1973) implemented the DPSP in:", options: ["Article 44 (UCC)", "Article 50 (Separation of judiciary from executive)", "Article 40 (Panchayats)", "Article 47 (Nutrition)"], answer: 1 },
        { text: "Which critic described the DPSPs as 'illogically arranged' and lacking a consistent philosophy?", options: ["K.C. Wheare", "Ivor Jennings", "T.T. Krishnamachari", "B.R. Ambedkar"], answer: 1 },
        { text: "T.T. Krishnamachari described the DPSPs as:", options: ["A set of New Year resolutions", "A veritable dustbin of sentiments", "Pious superfluities", "An instrument of social revolution"], answer: 1 },
        { text: "The DPSPs facilitate:", options: ["Stability and continuity in domestic and foreign policies", "Frequent changes in policy", "The overthrow of the government", "The suspension of the constitution"], answer: 0 },
        { text: "DPSPs serve as a crucial test for the performance of the government for the:", options: ["Judiciary", "President", "Opposition and the electorate", "Bureaucracy"], answer: 2 },
        { text: "Are there any Directives outside of Part IV of the Constitution?", options: ["No, they are all in Part IV", "Yes, such as Article 335 and Article 350A", "Yes, in the Preamble", "Yes, in the Fundamental Duties"], answer: 1 },
        { text: "Article 335 directs that claims of SCs and STs shall be considered in making appointments, consistent with:", options: ["The majority population", "The efficiency of administration", "The demands of the community", "The financial position of the state"], answer: 1 },
        { text: "Article 350A directs every state to provide adequate facilities for instruction in the ________ at the primary stage.", options: ["English language", "Hindi language", "Mother-tongue", "Sanskrit language"], answer: 2 },
        { text: "Article 351 directs the Union to promote the spread of the ______ language.", options: ["English", "Sanskrit", "Hindi", "Tamil"], answer: 2 },
        { text: "The DPSPs are essentially the state's _________ objectives.", options: ["Political", "Economic and Social", "Religious", "Military"], answer: 1 },
        { text: "In the Champakam Dorairajan case (1951), the Supreme Court ruled that:", options: ["DPSPs can override FRs", "FRs can be amended to implement DPSPs", "FRs would prevail over DPSPs in case of conflict", "Both are equal"], answer: 2 },
        { text: "The 25th Amendment Act (1971) sought to give primacy to which DPSPs over certain FRs?", options: ["Article 39 (b) and (c)", "Article 40", "Article 44", "Article 51"], answer: 0 },
        { text: "The Supreme Court upheld the validity of the 25th Amendment Act in the:", options: ["Golaknath case", "Kesavananda Bharati case", "Minerva Mills case", "Waman Rao case"], answer: 1 },
        { text: "The 42nd Amendment Act gave supremacy to all DPSPs over which FRs?", options: ["Art 14, 19, & 31", "Art 14 & 19", "Art 21 & 22", "All FRs"], answer: 1 },
        { text: "The Supreme Court struck down the above provision of the 42nd Amendment in the:", options: ["Golaknath case", "Kesavananda Bharati case", "Minerva Mills case", "S.R. Bommai case"], answer: 2 },
        { text: "The main value of DPSPs lies in their:", options: ["Legal force", "Political force and educational value", "Enforceability by the President", "Binding nature on the judiciary"], answer: 1 },
        { text: "Article 41 directs the state to secure the right to:", options: ["Work, education, and public assistance in certain cases", "A living wage", "A uniform civil code", "Early childhood care"], answer: 0 },
        { text: "Article 43 deals with securing a living wage and decent standard of life for:", options: ["All citizens", "All workers", "Government employees only", "Unemployed youth"], answer: 1 },
        { text: "Article 46 promotes the educational and economic interests of:", options: ["Minorities", "Women and children", "SCs, STs, and other weaker sections", "All citizens"], answer: 2 },
        { text: "Article 47 mentions the state's duty to raise the level of nutrition and the standard of living and to improve:", options: ["Public health", "Public transport", "Public education", "Public infrastructure"], answer: 0 },
        { text: "Article 49 directs the state to protect:", options: ["The environment", "Wildlife", "Monuments and places of national importance", "Weaker sections"], answer: 2 },
        { text: "The ideals of a 'welfare state' in the Constitution are enshrined in its:", options: ["Preamble", "DPSP", "Fundamental Rights", "Seventh Schedule"], answer: 1 },
        { text: "The DPSP concerning the prohibition of intoxicating drinks and drugs is a ________ principle.", options: ["Socialistic", "Liberal-Intellectual", "Gandhian", "International"], answer: 2 },
        { text: "The phrase 'economic and social democracy' is best reflected by the provisions in:", options: ["Fundamental Rights", "DPSP", "Emergency Provisions", "Citizenship"], answer: 1 },
        { text: "The DPSP which aims to prevent the concentration of wealth is part of:", options: ["Article 38", "Article 39", "Article 41", "Article 43"], answer: 1 },
        { text: "The source of the DPSP, the Irish Constitution, was itself framed in:", options: ["1921", "1937", "1947", "1950"], answer: 1 },
        { text: "Which part of the constitution has been referred to as the 'conscience of the Constitution' by Granville Austin?", options: ["Preamble", "FRs and DPSP together", "Fundamental Duties", "The Schedules"], answer: 1 },
        { text: "The concept of 'equal pay for equal work' for both men and women is a:", options: ["Fundamental Right", "DPSP", "Fundamental Duty", "Legal right under a separate act"], answer: 1 },
        { text: "The DPSP for securing the participation of workers in the management of industries (Art 43A) is a ________ principle.", options: ["Gandhian", "Liberal", "Socialistic", "Humanistic"], answer: 2 },
        { text: "The moral obligation on the state authorities for the implementation of DPSP is due to:", options: ["The fear of judicial action", "The pressure from international bodies", "The fact that they are answerable to the people in the ultimate resort", "The President's directive"], answer: 2 },
    ];
    const TIME_PER_QUESTION = Math.floor(TEST_DURATION_SECONDS / questions.length);

    // ### GLOBAL STATE ###
    let state = {};
    let timerInterval;
    let questionTimerInterval;
    let timeLeft = TEST_DURATION_SECONDS;
    let isTestCompleted = false;

    // ### DOM ELEMENTS ###
    const mockTestWrapper = document.getElementById('mockTestWrapper');
    const answerWritingWrapper = document.getElementById('answerWritingWrapper');
    const answerWritingEmptyWrapper = document.getElementById('answerWritingEmptyWrapper'); // NEW
    const resultScreenWrapper = document.getElementById('resultScreenWrapper');
    const reviewScreenWrapper = document.getElementById('reviewScreenWrapper');
    const passwordModal = document.getElementById('passwordModal');
    const mcqFooter = document.getElementById('mcqFooter');
    const questionText = document.getElementById('questionText');
    const questionNumber = document.getElementById('questionNumber');
    const optionsList = document.getElementById('optionsList');
    const questionPalette = document.getElementById('questionPalette');
    const questionTimerBar = document.getElementById('questionTimerBar');
    const btnSubmit = document.getElementById('btnSubmit');
    const actionButtons = document.getElementById('actionButtons');
    const btnPrevQuestion = document.getElementById('btnPrevQuestion');
    const btnSaveNext = document.getElementById('btnSaveNext');
    const countdownWrapper = document.getElementById('countdownWrapper');
    const timerElement = document.getElementById('timer');
    const stopwatchWrapper = document.getElementById('stopwatchWrapper');
    const stopwatchDisplay = document.getElementById('stopwatchDisplay');
    const stopwatchStartBtn = document.getElementById('stopwatchStart');
    const stopwatchStopBtn = document.getElementById('stopwatchStop');
    const stopwatchResetBtn = document.getElementById('stopwatchReset');
    const reviewAnswersButton = document.getElementById('reviewAnswersButton');
    const backToResultsBtn = document.getElementById('backToResultsBtn');
    const reviewContainer = document.getElementById('reviewContainer');
    const showMockTestTab = document.getElementById('showMockTestTab');
    const showAnswerWritingTab = document.getElementById('showAnswerWritingTab');
    const unlockPopup = document.getElementById('unlockPopup');

    const summaryAnswered = document.getElementById('summaryAnswered');
    const summaryNotAnswered = document.getElementById('summaryNotAnswered');
    const summaryMarked = document.getElementById('summaryMarked');
    const summaryNotVisited = document.getElementById('summaryNotVisited');

    // ### STOPWATCH LOGIC ###
    let stopwatchInterval;
    let stopwatchSeconds = 0;
    let isStopwatchRunning = false;
    function formatTime(sec) {
        const hours = Math.floor(sec / 3600);
        const minutes = Math.floor((sec % 3600) / 60);
        const seconds = sec % 60;
        return [hours, minutes, seconds].map(v => v.toString().padStart(2, '0')).join(':');
    }
    function updateStopwatchDisplay() { stopwatchDisplay.textContent = formatTime(stopwatchSeconds); }
    function startStopwatch() {
        if (isStopwatchRunning) return;
        isStopwatchRunning = true;
        stopwatchStartBtn.classList.add('hidden');
        stopwatchStopBtn.classList.remove('hidden');
        stopwatchInterval = setInterval(() => { stopwatchSeconds++; updateStopwatchDisplay(); }, 1000);
    }
    function stopStopwatch() {
        if (!isStopwatchRunning) return;
        isStopwatchRunning = false;
        stopwatchStartBtn.classList.remove('hidden');
        stopwatchStopBtn.classList.add('hidden');
        clearInterval(stopwatchInterval);
    }
    function resetStopwatch() { stopStopwatch(); stopwatchSeconds = 0; updateStopwatchDisplay(); }
    stopwatchStartBtn.addEventListener('click', startStopwatch);
    stopwatchStopBtn.addEventListener('click', stopStopwatch);
    stopwatchResetBtn.addEventListener('click', resetStopwatch);

    // ### MOCK TEST LOGIC ###
    function resetState() { state = { current: 0, answers: Array(questions.length).fill(null), marked: Array(questions.length).fill(false), visited: Array(questions.length).fill(false) }; }
    
    function updatePaletteSummary() {
      if (!state.answers) return;
      let answeredCount = 0, notAnsweredCount = 0, markedCount = 0, notVisitedCount = 0;
      for (let i = 0; i < questions.length; i++) {
        if (state.answers[i] !== null) { answeredCount++; } 
        else if (state.marked[i]) { markedCount++; } 
        else if (state.visited[i]) { notAnsweredCount++; } 
        else { notVisitedCount++; }
      }
      summaryAnswered.textContent = answeredCount;
      summaryNotAnswered.textContent = notAnsweredCount;
      summaryMarked.textContent = markedCount;
      summaryNotVisited.textContent = notVisitedCount;
    }

    function initTest() {
      resetState();
      timeLeft = TEST_DURATION_SECONDS;
      isTestCompleted = false;
      showAnswerWritingTab.classList.add('locked');
      showAnswerWritingTab.setAttribute('title', 'Complete the Mock Test to unlock this section.');
      state.visited[0] = true;
      loadQuestion(0);
      updateNavigationButtons();
      startTimer();
    }

    function loadQuestion(index) {
      clearInterval(questionTimerInterval);
      const q = questions[index];
      questionText.textContent = q.text;
      questionNumber.textContent = `Question ${index + 1} of ${questions.length}`;
      optionsList.innerHTML = '';
      q.options.forEach((opt, i) => {
        const li = document.createElement('li');
        li.className = 'option';
        if (state.answers[index] === i) li.classList.add('selected');
        li.innerHTML = `<span class="option-radio"></span><span class="option-text">${opt}</span>`;
        li.onclick = () => selectOption(index, i);
        optionsList.appendChild(li);
      });
      
      let questionTimeLeft = TIME_PER_QUESTION;
      questionTimerBar.style.transition = 'none';
      questionTimerBar.style.width = '100%';
      void questionTimerBar.offsetWidth;
      questionTimerBar.style.transition = 'width 1s linear';

      questionTimerInterval = setInterval(() => {
        questionTimeLeft--;
        const widthPercentage = Math.max(0, (questionTimeLeft / TIME_PER_QUESTION) * 100);
        questionTimerBar.style.width = `${widthPercentage}%`;
        if (questionTimeLeft <= 0) {
            clearInterval(questionTimerInterval);
            if (state.current < questions.length - 1) { loadQuestion(state.current + 1); }
        }
      }, 1000);

      state.current = index;
      state.visited[index] = true;
      updatePalette();
      updatePaletteSummary();
      updateNavigationButtons();
    }

    function selectOption(qIndex, optIndex) {
      state.answers[qIndex] = optIndex;
      const options = optionsList.querySelectorAll('.option');
      options.forEach((opt, i) => opt.classList.toggle('selected', i === optIndex));
      updatePalette();
      updatePaletteSummary();
    }

    function updatePalette() {
      questionPalette.innerHTML = '';
      questions.forEach((_, i) => {
        const btn = document.createElement('div');
        btn.className = 'question-number';
        if (state.answers[i] !== null) { btn.classList.add('answered'); } 
        else if (state.marked[i]) { btn.classList.add('marked'); } 
        else if (state.visited[i]) { btn.classList.add('not-answered'); } 
        else { btn.classList.add('not-visited'); }
        if (i === state.current) { btn.classList.add('current'); }
        btn.textContent = i + 1;
        btn.onclick = () => { loadQuestion(i); document.body.classList.remove('sidebar-open'); };
        questionPalette.appendChild(btn);
      });
    }

    function updateNavigationButtons() {
      btnPrevQuestion.style.display = state.current === 0 ? 'none' : 'flex';
      actionButtons.style.display = state.current === questions.length - 1 ? 'none' : 'flex';
      btnSubmit.style.display = state.current === questions.length - 1 ? 'flex' : 'none';
    }

    function startTimer() {
      clearInterval(timerInterval);
      timerInterval = setInterval(() => {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        if (timeLeft-- <= 0) { clearInterval(timerInterval); submitTest(); }
      }, 1000);
    }

    function stopTimer() { 
        clearInterval(timerInterval); 
        clearInterval(questionTimerInterval);
    }

    function submitTest() {
      stopTimer();
      isTestCompleted = true;
      showAnswerWritingTab.classList.remove('locked');
      showAnswerWritingTab.removeAttribute('title');
      
      const score = state.answers.reduce((acc, ans, i) => (ans === questions[i].answer ? acc + 1 : acc), 0);
      const scoreText = `${score}/${questions.length}`;
      localStorage.setItem('testTaken', 'true');
      localStorage.setItem('lastScore', scoreText);
      localStorage.setItem('lastAnswers', JSON.stringify(state.answers));
      
      showResultScreen(scoreText);
      showUnlockPopup();
    }
    
    function showUnlockPopup() {
        unlockPopup.style.display = 'block';
        setTimeout(() => { unlockPopup.style.display = 'none'; }, 4000);
    }

    function showResultScreen(scoreText) {
        mockTestWrapper.style.display = 'none';
        answerWritingWrapper.style.display = 'none';
        answerWritingEmptyWrapper.style.display = 'none'; // NEW
        reviewScreenWrapper.style.display = 'none';
        resultScreenWrapper.style.display = 'flex';
        mcqFooter.style.display = 'none';
        countdownWrapper.style.display = 'none';
        stopwatchWrapper.style.display = 'none';
        document.getElementById('finalScore').textContent = scoreText;
    }

    function showReviewScreen() {
      resultScreenWrapper.style.display = 'none';
      reviewScreenWrapper.style.display = 'flex';
      populateReviewScreen();
    }

    function populateReviewScreen() {
        reviewContainer.innerHTML = '';
        const userAnswers = JSON.parse(localStorage.getItem('lastAnswers')) || state.answers;
        questions.forEach((q, index) => {
            const userAnswer = userAnswers[index];
            const correctAnswer = q.answer;
            const isCorrect = userAnswer === correctAnswer;
            const questionDiv = document.createElement('div');
            questionDiv.className = 'review-question';
            let optionsHTML = '';
            q.options.forEach((opt, optIndex) => {
                let classes = 'review-option';
                let icon = '<i class="far fa-circle"></i>';
                if (optIndex === correctAnswer) { classes += ' review-correct'; icon = '<i class="fas fa-check-circle" style="color: #4caf50;"></i>'; }
                if (optIndex === userAnswer && !isCorrect) { classes += ' review-incorrect'; icon = '<i class="fas fa-times-circle" style="color: #f44336;"></i>'; }
                optionsHTML += `<li class="${classes}">${icon}<span>${opt}</span></li>`;
            });
            let statusHTML = '';
            if(userAnswer === null) { statusHTML = '<div class="review-status unanswered">Status: Unanswered</div>'; } 
            else if (isCorrect) { statusHTML = '<div class="review-status correct">Status: Correct</div>'; } 
            else { statusHTML = '<div class="review-status incorrect">Status: Incorrect</div>'; }
            questionDiv.innerHTML = `<h4>Q${index + 1}: ${q.text}</h4><ul class="review-option-list">${optionsHTML}</ul>${statusHTML}`;
            reviewContainer.appendChild(questionDiv);
        });
    }
    
    // ### PAGE & NAVIGATION LOGIC ###
    document.addEventListener('DOMContentLoaded', () => {
        if (localStorage.getItem('testTaken') === 'true') {
            isTestCompleted = true;
            showAnswerWritingTab.classList.remove('locked');
            showResultScreen(localStorage.getItem('lastScore'));
        } else {
            initTest();
        }
    });

    const sidebarToggleButton = document.getElementById('btnToggleSidebar');

    showMockTestTab.addEventListener('click', () => {
        showMockTestTab.classList.add('active');
        showAnswerWritingTab.classList.remove('active');
        countdownWrapper.style.display = 'flex';
        stopwatchWrapper.style.display = 'none';
        stopStopwatch();
        
        if (isTestCompleted) {
            showResultScreen(localStorage.getItem('lastScore'));
        } else {
            answerWritingEmptyWrapper.style.display = 'none';
            resultScreenWrapper.style.display = 'none';
            reviewScreenWrapper.style.display = 'none';
            mockTestWrapper.style.display = 'flex';
            mcqFooter.style.display = 'block';
            sidebarToggleButton.style.display = 'flex';
            startTimer();
            loadQuestion(state.current);
        }
    });

    showAnswerWritingTab.addEventListener('click', (e) => {
        if (showAnswerWritingTab.classList.contains('locked')) {
            e.preventDefault();
            return;
        }
        showAnswerWritingTab.classList.add('active');
        showMockTestTab.classList.remove('active');
        mockTestWrapper.style.display = 'none';
        resultScreenWrapper.style.display = 'none';
        reviewScreenWrapper.style.display = 'none';
        answerWritingWrapper.style.display = 'none';
        answerWritingEmptyWrapper.style.display = 'flex'; // Show the new page
        mcqFooter.style.display = 'none';
        sidebarToggleButton.style.display = 'none';
        document.body.classList.remove('sidebar-open');
        stopTimer();
        countdownWrapper.style.display = 'none';
        stopwatchWrapper.style.display = 'none'; // Hide stopwatch too
    });

    // NEW: Event listener for the "Go Back" button on the empty answer writing page
    document.getElementById('backToScoreFromAnswerWriting').addEventListener('click', () => {
        answerWritingEmptyWrapper.style.display = 'none';
        showResultScreen(localStorage.getItem('lastScore'));
        showMockTestTab.classList.add('active');
        showAnswerWritingTab.classList.remove('active');
    });

    reviewAnswersButton.addEventListener('click', showReviewScreen);
    backToResultsBtn.addEventListener('click', () => showResultScreen(localStorage.getItem('lastScore')));

    document.getElementById('retestButton').addEventListener('click', () => { passwordModal.style.display = 'block'; });
    document.getElementById('closeModal').addEventListener('click', () => { passwordModal.style.display = 'none'; document.getElementById('passwordError').textContent = ''; });
    document.getElementById('verifyPasswordButton').addEventListener('click', () => {
        const input = document.getElementById('passwordInput');
        const error = document.getElementById('passwordError');
        if (input.value === RETEST_PASSWORD) {
            localStorage.removeItem('testTaken');
            localStorage.removeItem('lastScore');
            localStorage.removeItem('lastAnswers');
            passwordModal.style.display = 'none';
            input.value = '';
            error.textContent = '';
            resultScreenWrapper.style.display = 'none';
            reviewScreenWrapper.style.display = 'none';
            answerWritingEmptyWrapper.style.display = 'none';
            mockTestWrapper.style.display = 'flex';
            mcqFooter.style.display = 'block';
            countdownWrapper.style.display = 'flex';
            initTest();
        } else {
            error.textContent = 'Incorrect password. Please try again.';
        }
    });
    
    sidebarToggleButton.addEventListener('click', () => document.body.classList.toggle('sidebar-open'));
    document.getElementById('darkModeToggle').addEventListener('change', (e) => { document.body.classList.toggle('dark', e.target.checked); document.getElementById('toggleLabel').textContent = e.target.checked ? 'Light' : 'Dark'; });
    btnSaveNext.addEventListener('click', () => { if (state.current < questions.length - 1) loadQuestion(state.current + 1); });
    btnPrevQuestion.addEventListener('click', () => { if (state.current > 0) loadQuestion(state.current - 1); });
    document.getElementById('btnMarkReview').addEventListener('click', () => { 
        state.marked[state.current] = !state.marked[state.current]; 
        updatePalette(); 
        updatePaletteSummary();
    });
    document.getElementById('btnClearResponse').addEventListener('click', () => { 
        state.answers[state.current] = null; 
        loadQuestion(state.current);
    });
    btnSubmit.addEventListener('click', submitTest);
  </script>
</body>
</html>
