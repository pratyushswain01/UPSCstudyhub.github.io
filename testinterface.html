<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UPSChub - Exam Portal</title>
  <link rel="icon" type="images\jpg" href="images\LOGO.jpg">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* General Styles & Reset */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; overflow: hidden; }
    body { font-family: 'Poppins', sans-serif; background: #f0f0f5; color: #333; transition: background-color 0.3s ease, color 0.3s ease; position: relative; }
    .dark { background: #1e1e2f; color: #eee; }

    /* Full-Page Watermark - Activated During Exam */
    body.exam-active::after {
        content: "UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \AUPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \AUPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \AUPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \AUPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \AUPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \AUPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \AUPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \AUPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \AUPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \AUPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \AUPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \AUPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub UPSChub \A";
        position: fixed; top: -50%; left: -50%; width: 200%; height: 200%;
        font-size: 7vw; font-weight: 700; color: rgba(0, 0, 0, 0.04); text-align: center;
        line-height: 2.2; transform-origin: center; transform: rotate(-30deg);
        z-index: 1; pointer-events: none; white-space: pre;
    }
    .dark.exam-active::after { color: rgba(255, 255, 255, 0.04); }

    /* STAGE 1 & 2: Login & Instructions Screens */
    .pre-exam-screen { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; padding: 20px; z-index: 5000; position: relative; background: #f0f0f5;}
    .dark .pre-exam-screen { background: #1e1e2f; }

    .login-card, .instructions-container {
        background: #ffffff; padding: 30px 40px; border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); width: 100%; text-align: center;
    }
    .dark .login-card, .dark .instructions-container { background: #2a2a3a; box-shadow: 0 4px 20px rgba(0,0,0,0.4); }

    #loginScreen .login-card { max-width: 450px; }
    .login-card h2 { margin-bottom: 25px; color: #3f51b5; font-size: 1.8em; }
    .dark .login-card h2 { color: #8ab4f8; }
    .input-group { margin-bottom: 20px; text-align: left; }
    .input-group label { display: block; margin-bottom: 5px; font-weight: 500; }
    .input-group input { width: 100%; padding: 12px 15px; border: 1px solid #ccc; border-radius: 6px; font-size: 1em; }
    .dark .input-group input { background: #1e1e2f; border-color: #555; color: #eee; }
    .btn-primary { width: 100%; padding: 12px; border: none; border-radius: 6px; background: #3f51b5; color: white; font-size: 1.1em; font-weight: 600; cursor: pointer; transition: background 0.3s; }
    .btn-primary:hover:not(:disabled) { opacity: 0.9; }
    #loginError { color: #f44336; height: 1.2em; margin-top: 15px; font-weight: 500; }

    #instructionsScreen { display: none; }
    #instructionsScreen .instructions-container { max-width: 800px; text-align: left; height: 90vh; display: flex; flex-direction: column; }
    #instructionsScreen h2 { color: #3f51b5; border-bottom: 2px solid #3f51b5; padding-bottom: 5px; margin-bottom: 15px; margin-top: 25px; }
    #instructionsScreen h2:first-of-type { margin-top: 0; }
    .dark #instructionsScreen h2 { color: #8ab4f8; border-bottom-color: #8ab4f8; }
    .instructions-content { flex-grow: 1; overflow-y: auto; padding-right: 15px; }
    .instructions-content ul { list-style: none; padding-left: 0; line-height: 1.8; }
    .instructions-content li { display: flex; align-items: flex-start; margin-bottom: 12px; }
    .instructions-content li i { color: #3f51b5; margin-right: 15px; font-size: 1.2em; margin-top: 5px; min-width: 20px; text-align: center; }
    .dark .instructions-content li i { color: #8ab4f8; }
    .instructions-content strong { color: #c62828; }
    .dark .instructions-content strong { color: #ef9a9a; }
    .instructions-footer { padding-top: 20px; border-top: 1px solid #eee; }
    .dark .instructions-footer { border-top-color: #444; }
    #offlineStatus { font-weight: 600; text-align: center; padding: 10px; border-radius: 6px; margin-bottom: 15px; }
    .status-waiting { background: #ffebee; color: #c62828; border: 1px solid #ef9a9a; }
    .status-ready { background: #e8f5e9; color: #2e7d32; border: 1px solid #a5d6a7; }
    .agreement-group { display: flex; align-items: center; margin-bottom: 15px; }
    #agreementCheckbox { width: 18px; height: 18px; margin-right: 10px; cursor: pointer; }
    #agreementCheckbox + label { font-size: 0.9em; cursor: pointer; }
    .btn-start-exam:disabled { background: #9fa8da; cursor: not-allowed; }
    .dark .btn-start-exam:disabled { background: #2c3a7a; }
    #startError { color: #d32f2f; text-align: center; height: 1.2em; font-weight: 500; }

    /* STAGE 3: EXAM UI STYLES */
    #examUIWrapper { display: none; flex-direction: column; height: 100%; position: relative; }
    .site-header { background: #ffffff; padding: 10px 20px; display: flex; align-items: center; gap: 15px; border-bottom: 1px solid #e0e0e0; box-shadow: 0 2px 4px rgba(0,0,0,0.05); z-index: 101; position: relative; }
    .site-logo { height: 40px; width: auto; }
    .site-branding .site-title { font-size: 1.4em; font-weight: 700; color: #3f51b5; line-height: 1.1; }
    .site-branding .site-tagline { font-size: 0.8em; color: #666; margin: 0; }
    .topbar { display: flex; align-items: center; justify-content: space-between; padding: 8px 20px; background: #3f51b5; color: white; gap: 10px; z-index: 100; position: relative; }
    .topbar-left-group, .topbar-right-group { display: flex; align-items: center; gap: 15px; }
    .navigation-tabs { display: flex; gap: 5px; background: rgba(0,0,0,0.15); border-radius: 6px; padding: 3px; position: absolute; left: 50%; transform: translateX(-50%); }
    .nav-tab { background: transparent; border: none; color: white; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-weight: 500; transition: all 0.3s; font-size: 0.85em; }
    .nav-tab:hover:not(.locked) { background: rgba(255,255,255,0.2); }
    .nav-tab.active { background: white; color: #3f51b5; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .nav-tab.locked { cursor: not-allowed; opacity: 0.6; position: relative; pointer-events: none; }
    .nav-tab.locked::after { content: '\f023'; font-family: "Font Awesome 6 Free"; font-weight: 900; margin-left: 8px; font-size: 0.9em; }
    .timer { font-size: 0.95em; font-weight: bold; white-space: nowrap; background: rgba(0,0,0,0.2); padding: 4px 8px; border-radius: 4px; }
    #stopwatchWrapper { display: none; align-items: center; gap: 10px; }
    #stopwatchDisplay { font-size: 0.95em; font-weight: bold; white-space: nowrap; background: rgba(0,0,0,0.2); padding: 4px 8px; border-radius: 4px; }
    .stopwatch-controls button { background: transparent; border: 1px solid rgba(255,255,255,0.3); color: white; cursor: pointer; font-size: 0.8em; padding: 5px; border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; transition: background-color 0.2s; margin-left: 5px; }
    .stopwatch-controls button:hover { background-color: rgba(255,255,255,0.2); }
    .dark-mode-toggle { display: flex; align-items: center; gap: 8px; }
    .toggle-switch { position: relative; display: inline-block; width: 50px; height: 26px; }
    .toggle-switch input { opacity: 0; width: 0; height: 0; }
    .toggle-slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
    .toggle-slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
    input:checked + .toggle-slider { background-color: #4caf50; }
    input:checked + .toggle-slider:before { transform: translateX(24px); }
    .toggle-label { font-size: 0.9em; white-space: nowrap; }
    .topbar #btnSubmitTest { background: #f44336; color: white; border: none; border-radius: 6px; font-weight: 500; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 6px; font-size: 0.85em; padding: 8px 15px; }
    .topbar #btnSubmitTest:hover { opacity: 0.85; }
    .main-content { flex: 1; display: flex; overflow: hidden; position: relative; z-index: 5; }
    .question-area { width: 100%; padding: 20px; overflow-y: auto; padding-bottom: 100px; transition: padding-right 0.3s ease, filter 0.3s ease; position: relative; z-index: 5; }
    .sidebar-open .question-area { filter: blur(4px); pointer-events: none; }
    .question-header { font-size: 1.2em; margin-bottom: 15px; font-weight: 600; }
    .question-timer-bar-container { width: 100%; height: 8px; background-color: #e0e0e0; border-radius: 4px; margin-bottom: 20px; overflow: hidden; }
    .question-timer-bar { height: 100%; width: 100%; background-color: #3f51b5; border-radius: 4px; }
    .dark .question-timer-bar-container { background-color: #3d3d4a; }
    .dark .question-timer-bar { background-color: #8ab4f8; }
    .question-content { margin-bottom: 20px; line-height: 1.6; font-size: 1em; }
    .options-list { list-style: none; display: grid; grid-template-columns: 1fr; gap: 10px; padding: 0; }
    .option { padding: 12px 15px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; transition: all 0.2s; background: white; display: flex; align-items: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); font-size: 0.95em; position: relative; }
    .option:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    .option.selected { background: #4caf50; color: white; border-color: #4caf50; box-shadow: 0 2px 5px rgba(76,175,80,0.3); }
    .option-radio { margin-right: 12px; min-width: 18px; height: 18px; border: 2px solid #ccc; border-radius: 50%; display: inline-block; position: relative; }
    .option.selected .option-radio { border-color: white; background: white; box-shadow: inset 0 0 0 4px #4caf50; }
    
    .sidebar { position: fixed; top: 111px; /* This will be set by JS */ right: -300px; width: 300px; height: calc(100% - 111px); /* This will be set by JS */ background: #f8f9fa; border-left: 1px solid #ccc; display: flex; flex-direction: column; transition: right 0.3s ease-in-out; z-index: 200; box-shadow: -5px 0 15px rgba(0,0,0,0.1); }
    .sidebar-open .sidebar { right: 0; }
    .sidebar-content { padding: 15px; overflow-y: auto; flex-grow: 1;}
    .palette-title { font-weight: 600; margin-bottom: 10px; color: #3f51b5; font-size: 1.1em; text-align: center; }
    .question-palette { display: grid; grid-template-columns: repeat(auto-fill, minmax(35px, 1fr)); gap: 8px; margin-bottom: 20px; }
    .question-number { width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; border-radius: 50%; border: 1px solid transparent; cursor: pointer; font-weight: 500; transition: all 0.2s; font-size: 13px; margin: 0 auto; }
    .question-number:hover { transform: scale(1.1); box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
    .answered { background: #4caf50; color: white; border: 1px solid #388e3c;}
    .not-answered { background: #f44336; color: white; border: 1px solid #d32f2f;}
    .marked { background: #ff9800; color: white; border: 1px solid #f57c00;}
    .marked-answered { background: linear-gradient(135deg, #4caf50 50%, #ff9800 50%); color: white; border: 1px solid #f57c00; }
    .not-visited { background: #e9ecef; color: #333; border: 1px solid #ddd;}
    .current { border: 2px solid #3f51b5; transform: scale(1.1); }
    .palette-summary { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 20px 0; padding: 12px; background: #e0e0e0; border-radius: 6px; font-size: 0.8em; }
    .summary-item { display: flex; align-items: center; gap: 8px; color: #333; }
    .summary-item span { font-weight: 700; background-color: #fff; border-radius: 50%; min-width: 24px; height: 24px; display: inline-flex; align-items: center; justify-content: center; text-align: center; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
    .legend { margin-top: 15px; padding-top: 15px; border-top: 1px solid #ddd;}
    .legend-title { font-weight: 600; margin-bottom: 12px; color: #3f51b5; font-size: 1em; }
    .legend-item { display: flex; align-items: center; margin-bottom: 8px; font-size: 0.85em; padding: 6px 8px; border-radius: 4px; }
    .legend-color { width: 16px; height: 16px; border-radius: 3px; margin-right: 10px; flex-shrink: 0; }
    .legend-answered { background: #4caf50; }
    .legend-not-answered { background: #f44336; }
    .legend-marked { background: #ff9800; }
    .legend-marked-answered { background: linear-gradient(135deg, #4caf50 50%, #ff9800 50%); }
    .legend-not-visited { background: #e9ecef; border: 1px solid #ccc; }
    
    .sidebar-toggle { background: transparent; border: 1px solid rgba(255,255,255,0.3); color: white; cursor: pointer; font-size: 0.9em; padding: 5px; border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; }
    .sidebar-toggle:hover { background-color: rgba(255,255,255,0.2); }
    .sidebar-open .sidebar-toggle { transform: rotate(180deg); }

    .fixed-action-area { position: fixed; bottom: 0; left: 0; width: 100%; background: #fff; border-top: 1px solid #ccc; padding: 10px 15px; z-index: 100; box-shadow: 0 -2px 5px rgba(0,0,0,0.05); }
    .action-buttons { display: flex; justify-content: center; align-items: center; gap: 8px; }
    .btn-action { padding: 8px; border: none; border-radius: 6px; font-weight: 500; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 5px; font-size: 0.85em; flex-grow: 1; flex-basis: 0; }
    .btn-action:hover { opacity: 0.85; }
    #btnPrevQuestion { background: #6c757d; color: white; }
    #btnSaveNext { background: #4caf50; color: white; }
    #btnMarkReview { background: #ff9800; color: white; }
    #btnClearResponse { background: #f44336; color: white; }
    .submit-button.btn-action { background: #3f51b5; color: white; padding: 10px 25px; flex-grow: 0; }
    
    /* Result Screen & Animated Scorecard Styles */
    #resultScreenWrapper { display: none; text-align: center; padding: 20px; flex-direction: column; align-items: center; justify-content: flex-start; flex: 1; overflow-y: auto; position: relative;}
    #resultScreenWrapper h2 { font-size: 2.5em; color: #3f51b5; margin-bottom: 5px; }
    #resultScreenWrapper p { font-size: 1.2em; margin-bottom: 20px; }
    .scorecard-details { width: 100%; max-width: 500px; margin: 25px auto; background: #ffffff; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
    .scorecard-table { width: 100%; border-collapse: collapse; font-size: 1.1em; }
    .scorecard-table td { padding: 12px 15px; border-bottom: 1px solid #f0f0f0; }
    .scorecard-table tr:last-child td { border-bottom: none; }
    .scorecard-table td:first-child { text-align: left; font-weight: 500; color: #555; }
    .scorecard-table td:last-child { text-align: right; font-weight: 700; }
    .scorecard-table .correct-val { color: #4caf50; }
    .scorecard-table .incorrect-val { color: #f44336; }
    .scorecard-table .unattempted-val { color: #ff9800; }
    .scorecard-table .total-row td { font-size: 1.2em; border-top: 2px solid #e0e0e0; padding-top: 15px; margin-top: 5px; }
    .scorecard-table .total-val { color: #3f51b5; }
    .dark .scorecard-details { background: #2a2a3a; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
    .dark .scorecard-table td { border-bottom-color: #3a3a4a; }
    .dark .scorecard-table td:first-child { color: #ccc; }
    .dark .scorecard-table .correct-val { color: #81c784; }
    .dark .scorecard-table .incorrect-val { color: #ef9a9a; }
    .dark .scorecard-table .unattempted-val { color: #ffd54f; }
    .dark .scorecard-table .total-row td { border-top-color: #555; }
    .dark .scorecard-table .total-val { color: #8ab4f8; }

    #finalScore { display: none; }
    .result-buttons { display: flex; gap: 15px; margin-top: 30px; margin-bottom: 30px; }
    .performance-analysis-container { width: 100%; max-width: 800px; margin: 30px auto; background: #ffffff; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
    .chart-container { width: 100%; max-width: 800px; margin: 30px auto; background: #ffffff; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
    .performance-analysis-container h3 { text-align: center; margin-bottom: 20px; font-size: 1.5em; color: #3f51b5; }
    .table-wrapper { overflow-x: auto; }
    .performance-table { width: 100%; border-collapse: collapse; }
    .performance-table th, .performance-table td { padding: 14px 10px; text-align: center; border-bottom: 1px solid #e0e0e0; font-size: 0.95em; white-space: nowrap; }
    .performance-table th { background-color: #f8f9fa; font-weight: 600; color: #444; }
    .performance-table td:first-child { text-align: left; font-weight: 500; width: 40%; white-space: normal; }
    .accuracy-bar-container { background-color: #e9ecef; border-radius: 10px; position: relative; height: 22px; overflow: hidden; min-width: 100px; }
    .accuracy-bar { height: 100%; border-radius: 10px; transition: width 0.8s ease-in-out; }
    .accuracy-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-weight: 600; font-size: 0.9em; color: #333; text-shadow: 0 0 2px rgba(255,255,255,0.7); }
    #performanceChart { width: 100% !important; height: 350px !important; }
    
    /* Review Screen & Explanation Styles */
    #reviewScreenWrapper { display: none; width: 100%; flex-direction: column; position: relative;}
    .review-header { padding: 15px 20px; background: #fff; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 10; }
    #reviewContainer { padding: 20px; overflow-y: auto; flex-grow: 1; background-color: #f0f0f5; }
    .review-question { background: #fff; border: 1px solid #ddd; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    .review-option-list { list-style: none; padding: 0; margin-top: 15px; }
    .review-option { padding: 10px 15px; margin-bottom: 8px; border-radius: 6px; border: 1px solid #e0e0e0; display: flex; align-items: center; gap: 12px; }
    .review-option i { min-width: 1.2em; text-align: center; }
    .review-option.review-correct { background-color: #e8f5e9; border-color: #a5d6a7; color: #1b5e20; font-weight: 500; }
    .review-option.review-incorrect { background-color: #ffebee; border-color: #ef9a9a; color: #b71c1c; }
    .review-status { margin-top: 15px; padding: 8px 12px; border-radius: 6px; font-weight: 500; text-align: center; border: 1px solid transparent; }
    .review-status.correct { background-color: #e8f5e9; border-color: #a5d6a7; color: #1b5e20; }
    .review-status.incorrect { background-color: #ffebee; border-color: #ef9a9a; color: #c62828; }
    .review-status.unanswered { background-color: #fff3e0; border-color: #ffcc80; color: #e65100; }
    .review-explanation { margin-top: 20px; padding: 15px; background: #eef2ff; border-left: 4px solid #3f51b5; border-radius: 4px; font-size: 0.9em; line-height: 1.6; }
    .review-explanation strong { color: #3f51b5; }

    .password-modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); align-items: center; justify-content: center;}
    .modal-content { background-color: #fefefe; padding: 25px 35px; border: 1px solid #888; width: 90%; max-width: 420px; border-radius: 12px; text-align: center; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
    .close-modal { position: absolute; top: 10px; right: 20px; font-size: 1.8em; color: #aaa; cursor: pointer; transition: color 0.2s; }
    .close-modal:hover { color: #333; }
    #passwordRetestInput { width: 100%; padding: 10px; margin: 15px 0; border: 1px solid #ccc; border-radius: 4px; font-size: 1em; }
    #passwordError { color: #f44336; font-size: 0.9em; height: 1.2em; margin-bottom: 10px;}
    .contact-admin-text { margin-top: 20px; font-size: 0.9em; color: #666; }
    .contact-admin-text a { color: #3f51b5; text-decoration: none; font-weight: 500; }
    .contact-admin-text a:hover { text-decoration: underline; }
    
    #answerWritingWrapper { display: none; flex: 1; align-items: center; justify-content: center; text-align: center; padding: 40px 20px; position: relative;}
    #answerWritingWrapper h2 { color: #3f51b5; font-size: 1.8em; margin-bottom: 10px; }
    #answerWritingWrapper p { color: #555; font-size: 1.1em; }

    /* Dark Mode Overrides */
    .dark .site-header { background: #2a2a3a; border-bottom-color: #3a3a4a; }
    .dark .site-branding .site-title { color: #8ab4f8; }
    .dark .site-branding .site-tagline { color: #aaa; }
    .dark .option { background: #2c2c3c; border-color: #444; color: #eee; }
    .dark .option:hover { background: #3d3d4a; }
    .dark .option.selected { background: #1b5e20; color: #c8e6c9; border-color: #81c784; }
    .dark .option.selected .option-radio { border-color: #c8e6c9; background: #c8e6c9; box-shadow: inset 0 0 0 4px #1b5e20; }
    .dark .option-radio { border-color: #555; }
    .dark .fixed-action-area { background: #1e1e2f; border-top-color: #444;}
    .dark .sidebar { background: #2a2a3a; border-left: 1px solid #444;}
    .dark .not-visited { background: #3d3d4a; color: #eee; border: 1px solid #555; }
    .dark .palette-summary { background: #1e1e2f; border: 1px solid #444;}
    .dark .summary-item { color: #ccc; }
    .dark .summary-item span { background-color: #3d3d4a; color: #eee; }
    .dark .legend, .dark .fixed-action-area { border-top-color: #444; }
    .dark .legend-item { background: rgba(255,255,255,0.05); }
    .dark .palette-title, .dark .legend-title { color: #8ab4f8; }
    .dark #resultScreenWrapper h2, .dark .performance-analysis-container h3, .dark .review-title, .dark #answerWritingWrapper h2 { color: #8ab4f8; }
    .dark #answerWritingWrapper p { color: #aaa; }
    .dark .performance-analysis-container, .dark .chart-container { background: #2a2a3a; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
    .dark .performance-table th { background-color: #1e1e2f; color: #ccc; }
    .dark .performance-table td { border-bottom: 1px solid #444; }
    .dark .accuracy-bar-container { background-color: #3d3d4a; }
    .dark .accuracy-text { color: #fff; text-shadow: none; }
    .dark .review-header { background: #2a2a3a; border-color: #444; }
    .dark #reviewContainer { background-color: #1e1e2f; }
    .dark .review-question { background: #2c2c3c; border-color: #444; }
    .dark .review-option { border-color: #555; }
    .dark .review-option.review-correct { background-color: #1a311b; border-color: #81c784; color: #c8e6c9; }
    .dark .review-option.review-incorrect { background-color: #3e1c1f; border-color: #ef9a9a; color: #ffcdd2; }
    .dark .review-status.correct { background-color: #1a311b; border-color: #4caf50; color: #c8e6c9; }
    .dark .review-status.incorrect { background-color: #3e1c1f; border-color: #f44336; color: #ffcdd2; }
    .dark .review-status.unanswered { background-color: #4a2c0f; border-color: #ff9800; color: #ffe0b2; }
    .dark .review-explanation { background: #262a42; border-left-color: #8ab4f8; color: #ccc; }
    .dark .review-explanation strong { color: #8ab4f8; }
    .dark .modal-content { background: #2c2c3c; border-color: #555; }
    .dark .close-modal:hover { color: #fff; }
    .dark .contact-admin-text { color: #aaa; }
    .dark .contact-admin-text a { color: #8ab4f8; }

    @media (max-width: 768px) {
        .site-header { flex-direction: column; text-align: center; gap: 5px; }
        .topbar { flex-wrap: wrap; justify-content: center; }
        .navigation-tabs { position: static; transform: none; order: 3; width: 100%; justify-content: center; margin-top: 10px; }
        .sidebar-open .question-area { padding-right: 20px; }
    }
    @media (max-width: 480px) {
        .btn-action span { display: none; }
        .btn-action .fas { font-size: 1.1em; margin: 0 5px; }
    }
  </style>
</head>
<body>

  <!-- STAGE 1: LOGIN SCREEN (Visible by default) -->
  <div id="loginScreen" class="pre-exam-screen" style="display: flex;">
    <div class="login-card">
        <h2>Exam Portal Login</h2>
        <div class="input-group"> <label for="userIdInput">User ID</label> <input type="text" id="userIdInput" value="UPSC2025"> </div>
        <div class="input-group"> <label for="passwordLoginInput">Password</label> <input type="password" id="passwordLoginInput" value="UPSChub@123"> </div>
        <button id="loginBtn" class="btn-primary">Login</button>
        <p id="loginError"></p>
    </div>
  </div>

  <!-- STAGE 2: INSTRUCTIONS & SYSTEM CHECK SCREEN (Hidden by default) -->
  <div id="instructionsScreen" class="pre-exam-screen">
      <div class="instructions-container">
          <div class="instructions-content">
              <h2>General Instructions:</h2>
              <ul>
                  <li><i class="fas fa-list-ol"></i><div>Total Questions: <strong id="totalQuestionsEl">300</strong>.</div></li>
                  <li><i class="fas fa-clock"></i><div>Total Duration: <strong>150 Minutes</strong>.</div></li>
                  <li><i class="fas fa-stopwatch-20"></i><div>Each question has a <strong>12-second timer</strong>. The test will automatically move to the next question when this timer ends.</div></li>
                   <li><i class="fas fa-calculator"></i><div>Marking Scheme: <strong>+1</strong> for a correct answer, <strong>-1</strong> for an incorrect answer, and <strong>0</strong> for an unattempted question.</div></li>
              </ul>
              <h2>Security & Environment:</h2>
              <ul>
                  <li><i class="fas fa-plane-departure"></i><div>You must take this exam in an offline environment. Please <strong>Enable Aeroplane/Flight Mode</strong> before starting.</div></li>
                  <li><i class="fas fa-wifi-slash"></i><div>If an internet connection is detected after starting, your test will be <strong>auto-submitted</strong>. This action is final.</div></li>
                  <li><i class="fas fa-window-close"></i><div>Do not close or refresh the browser window, as this will end your test.</div></li>
              </ul>
              <h2>Navigation Instructions:</h2>
              <ul>
                  <li><i class="fas fa-check" style="color:#4caf50;"></i><div>Click <strong>Save & Next</strong> to save your answer and move to the next question.</div></li>
                  <li><i class="fas fa-flag" style="color:#ff9800;"></i><div>Click <strong>Mark</strong> to mark a question for review.</div></li>
                  <li><i class="fas fa-square" style="color:#f44336;"></i><div>A <strong>Red</strong> number in the palette means you have visited but not answered the question.</div></li>
              </ul>
          </div>
          <div class="instructions-footer">
              <div id="offlineStatus" class="status-waiting"><i class="fas fa-wifi"></i> Please enable Aeroplane Mode.</div>
              <div class="agreement-group">
                  <input type="checkbox" id="agreementCheckbox">
                  <label for="agreementCheckbox">I have read all the instructions and I am ready to begin.</label>
              </div>
              <button id="startExamBtn" class="btn-primary btn-start-exam" disabled>Start Exam</button>
              <div id="startError"></div>
          </div>
      </div>
  </div>

  <!-- STAGE 3: EXAM UI WRAPPER (Hidden by default) -->
  <div id="examUIWrapper">
    <header class="site-header" id="siteHeader">
        <img src="images\LOGO.jpg" alt="UPSChub Logo" class="site-logo">
        <div class="site-branding">
            <div class="site-title">UPSChub</div>
            <p class="site-tagline">Civil Services Exam Preparation</p>
        </div>
    </header>
    <header class="topbar" id="topbar">
      <div class="topbar-left-group">
        <button id="btnToggleSidebar" class="sidebar-toggle" title="Toggle Palette"><i class="fas fa-chevron-left"></i></button>
        <div class="timer" id="timer">02:30:00</div>
        <div id="stopwatchWrapper">
          <span id="stopwatchDisplay">00:00:00</span>
          <div class="stopwatch-controls">
            <button id="stopwatchPlayPause" title="Play/Pause"><i class="fas fa-play"></i></button>
            <button id="stopwatchReset" title="Reset"><i class="fas fa-rotate-left"></i></button>
          </div>
        </div>
      </div>
      <div class="navigation-tabs">
        <button id="showMockTestTab" class="nav-tab active">Mock Test</button>
        <button id="showAnswerWritingTab" class="nav-tab locked">Answer Writing</button>
      </div>
      <div class="topbar-right-group">
        <div class="dark-mode-toggle">
          <span class="toggle-label" id="toggleLabel">Dark</span>
          <label class="toggle-switch"><input type="checkbox" id="darkModeToggle"><span class="toggle-slider"></span></label>
        </div>
        <button id="btnSubmitTest" style="display: none;"><i class="fas fa-paper-plane"></i> Submit</button>
      </div>
    </header>
    <div class="main-content">
        <div id="mockTestWrapper" style="display: flex; width: 100%;">
            <section class="question-area">
                <h2 class="question-header" id="questionNumber"></h2>
                <div class="question-timer-bar-container"><div id="questionTimerBar" class="question-timer-bar"></div></div>
                <div class="question-content" id="questionText"></div>
                <ul class="options-list" id="optionsList"></ul>
            </section>
            <aside class="sidebar" id="sidebar">
              <div class="sidebar-content">
                <div class="palette-title">Question Palette</div>
                <div class="question-palette" id="questionPalette"></div>
                <div class="palette-summary">
                    <div class="summary-item"><span id="summaryAnswered">0</span> Answered</div>
                    <div class="summary-item"><span id="summaryNotAnswered">0</span> Not Answered</div>
                    <div class="summary-item"><span id="summaryMarked">0</span> Marked Review</div>
                    <div class="summary-item"><span id="summaryNotVisited">0</span> Not Visited</div>
                </div>
                <div class="legend">
                    <div class="legend-title">Legend</div>
                    <div class="legend-item"><div class="legend-color answered"></div><span>Answered</span></div>
                    <div class="legend-item"><div class="legend-color not-answered"></div><span>Not Answered</span></div>
                    <div class="legend-item"><div class="legend-color marked"></div><span>Marked</span></div>
                    <div class="legend-item"><div class="legend-color marked-answered"></div><span>Marked & Answered</span></div>
                    <div class="legend-item"><div class="legend-color not-visited"></div><span>Not Visited</span></div>
                </div>
              </div>
            </aside>
        </div>
        <div id="resultScreenWrapper">
            <h2>Test Completed!</h2>
            <p>Here is your score summary:</p>
            <p id="finalScore"></p> <!-- Kept for data storage but hidden -->

            <div class="scorecard-details">
                <table class="scorecard-table">
                    <tbody>
                        <tr>
                            <td><i class="fas fa-check-circle" style="color: #4caf50; margin-right: 8px;"></i>Correct Answers</td>
                            <td class="correct-val"><span id="correctCount">0</span> (<span id="correctMarks">0</span> Marks)</td>
                        </tr>
                        <tr>
                            <td><i class="fas fa-times-circle" style="color: #f44336; margin-right: 8px;"></i>Incorrect Answers</td>
                            <td class="incorrect-val"><span id="incorrectCount">0</span> (<span id="incorrectMarks">0</span> Marks)</td>
                        </tr>
                        <tr>
                            <td><i class="fas fa-minus-circle" style="color: #ff9800; margin-right: 8px;"></i>Unattempted</td>
                            <td class="unattempted-val"><span id="unattemptedCount">0</span></td>
                        </tr>
                        <tr class="total-row">
                            <td><strong>Final Score</strong></td>
                            <td class="total-val"><strong><span id="finalScoreAnimated">0</span> / <span id="totalPossibleScore">0</span></strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="result-buttons">
              <button id="retestButton" class="submit-button btn-action"><i class="fas fa-redo"></i> Retest</button>
              <button id="reviewAnswersButton" class="submit-button btn-action"><i class="fas fa-search"></i> Review Answers</button>
            </div>

            <div class="performance-analysis-container">
                <h3>Topic-wise Performance</h3>
                <div class="table-wrapper"><table class="performance-table"><thead><tr><th>Topic</th><th>Correct</th><th>Attempted</th><th>Accuracy</th></tr></thead><tbody id="performanceTableBody"></tbody></table></div>
            </div>
            <div class="chart-container"><canvas id="performanceChart"></canvas></div>
        </div>
        <div id="reviewScreenWrapper">
          <div class="review-header"><h2 class="review-title">Review Your Answers</h2><button id="backToResultsBtn" class="submit-button btn-action"><i class="fas fa-arrow-left"></i> Back to Score</button></div>
          <div id="reviewContainer"></div>
        </div>
        <div id="answerWritingWrapper">
           <div><h2>Answer Writing Practice</h2><p>This section is for practicing descriptive answers after the mock test.</p></div>
        </div>
    </div>
    <div class="fixed-action-area" id="mcqFooter">
        <div class="action-buttons">
            <button class="btn-action" id="btnPrevQuestion"><i class="fas fa-arrow-left"></i><span>Previous</span></button>
            <button class="btn-action" id="btnClearResponse"><i class="fas fa-ban"></i><span>Clear</span></button>
            <button class="btn-action" id="btnMarkReview"><i class="fas fa-flag"></i><span>Mark</span></button>
            <button class="btn-action" id="btnSaveNext"><i class="fas fa-check"></i><span>Save & Next</span></button>
        </div>
    </div>
  </div>
  <div id="passwordModal" class="password-modal">
        <div class="modal-content">
            <span id="closeModal" class="close-modal">×</span>
            <h3>Enter Password to Retest</h3>
            <input type="password" id="passwordRetestInput" placeholder="Enter password...">
            <div id="passwordError"></div>
            <button id="verifyPasswordButton" class="submit-button btn-action">Verify</button>
            <p class="contact-admin-text">Don't have a password? <a id="whatsappLink" href="#" target="_blank">Contact Admin</a></p>
        </div>
  </div>

 <script>
    // ### CONFIGURATION ###
    const CORRECT_USER_ID = "UPSC2025";
    const CORRECT_PASSWORD = "UPSChub@123";
    const RETEST_PASSWORD = "UPSC2025";
    const TEST_DURATION_SECONDS = 150 * 60;
    const PER_QUESTION_TIME = 15;
const questions = [
    // Chapter 11: Amendment of the Constitution (100 Questions)
    {
        "topic": "Fundamental Duties",
        "text": "The Fundamental Duties were added to the Indian Constitution on the recommendation of which committee?",
        "options": ["Balwant Rai Mehta Committee", "Sarkaria Committee", "Sardar Swaran Singh Committee", "L.M. Singhvi Committee"],
        "answer": 2,
        "explanation": "The <strong>Sardar Swaran Singh Committee</strong> was set up in 1976 to make recommendations about fundamental duties, the need of which was felt during the internal emergency (1975–1977)."
    },
    {
        "topic": "Fundamental Duties",
        "text": "Which constitutional amendment added the Fundamental Duties to the Constitution?",
        "options": ["44th Amendment Act, 1978", "42nd Amendment Act, 1976", "24th Amendment Act, 1971", "52nd Amendment Act, 1985"],
        "answer": 1,
        "explanation": "The <strong>42nd Constitutional Amendment Act of 1976</strong> added a new part, Part IV-A, to the Constitution, which consists of only one Article, i.e., Article 51-A, specifying a code of ten fundamental duties."
    },
    {
        "topic": "Fundamental Duties",
        "text": "Fundamental Duties are enshrined in which Part of the Indian Constitution?",
        "options": ["Part III", "Part IV", "Part V", "Part IV-A"],
        "answer": 3,
        "explanation": "Fundamental Duties are contained in <strong>Part IV-A</strong> of the Indian Constitution. This part was added by the 42nd Amendment Act of 1976."
    },
    {
        "topic": "Fundamental Duties",
        "text": "Which article of the Constitution deals with Fundamental Duties?",
        "options": ["Article 51", "Article 51-A", "Article 32", "Article 19"],
        "answer": 1,
        "explanation": "<strong>Article 51-A</strong> is the single article in Part IV-A of the Constitution that specifies the eleven Fundamental Duties of the citizens of India."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The concept of Fundamental Duties in the Indian Constitution is borrowed from the Constitution of:",
        "options": ["USA", "Former USSR (Soviet Union)", "United Kingdom", "Ireland"],
        "answer": 1,
        "explanation": "The inspiration for including Fundamental Duties was drawn from the constitution of the <strong>former USSR (Soviet Union)</strong>. Notably, no major Western democratic constitution, like the USA or France, includes a specific list of duties for citizens."
    },
    {
        "topic": "Fundamental Duties",
        "text": "How many Fundamental Duties were originally included in the Constitution by the 42nd Amendment Act?",
        "options": ["8", "10", "11", "12"],
        "answer": 1,
        "explanation": "The 42nd Amendment Act of 1976 originally introduced <strong>10 Fundamental Duties</strong>. The 11th duty was added later in 2002."
    },
    {
        "topic": "Fundamental Duties",
        "text": "Which of the following Fundamental Duties was added by the 86th Constitutional Amendment Act, 2002?",
        "options": ["To safeguard public property and to abjure violence.", "To uphold and protect the sovereignty, unity and integrity of India.", "To provide opportunities for education to one's child or ward between the age of six and fourteen years.", "To develop scientific temper, humanism and the spirit of inquiry and reform."],
        "answer": 2,
        "explanation": "The <strong>86th Constitutional Amendment Act of 2002</strong> added the 11th Fundamental Duty under Article 51-A(k), which is 'to provide opportunities for education to his child or ward between the age of six and fourteen years.'"
    },
    {
        "topic": "Fundamental Duties",
        "text": "Which of the following statements about Fundamental Duties is correct?",
        "options": ["They are justiciable in nature.", "They are applicable to both citizens and foreigners.", "They can be enforced by the Parliament through legislation.", "They are included in the 'basic structure' of the Constitution."],
        "answer": 2,
        "explanation": "While Fundamental Duties are non-justiciable (not directly enforceable by courts), the <strong>Parliament is free to enforce them by suitable legislation</strong>. For instance, laws like the Prevention of Insults to National Honour Act, 1971, enforce some of the duties."
    },
    {
        "topic": "Fundamental Duties",
        "text": "Which of the following is NOT a Fundamental Duty listed in Article 51-A?",
        "options": ["To pay taxes.", "To protect and improve the natural environment.", "To cherish and follow the noble ideals that inspired the national struggle for freedom.", "To abide by the Constitution and respect its ideals and institutions."],
        "answer": 0,
        "explanation": "The duty <strong>to pay taxes</strong> was a recommendation of the Swaran Singh Committee but was not accepted and hence, not included in Article 51-A of the Constitution."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The Swaran Singh Committee made several recommendations for Fundamental Duties. Which of the following was NOT accepted and included in the Constitution?",
        "options": ["Duty to defend the country.", "Duty to pay taxes.", "Duty to promote harmony.", "Duty to value and preserve the rich heritage of our composite culture."],
        "answer": 1,
        "explanation": "The Swaran Singh Committee suggested that the <strong>duty to pay taxes</strong> should be a Fundamental Duty. However, the then-government did not accept this recommendation."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The Verma Committee on Fundamental Duties of the Citizens was set up in which year?",
        "options": ["1999", "1976", "2002", "1985"],
        "answer": 0,
        "explanation": "The J.S. Verma Committee was appointed in <strong>1999</strong>. Its purpose was not to suggest new duties but to identify the existing legal provisions for the implementation of the Fundamental Duties."
    },
    {
        "topic": "Fundamental Duties",
        "text": "What is the primary significance of Fundamental Duties?",
        "options": ["They give the judiciary power to punish citizens for non-performance.", "They serve as a reminder to citizens that while enjoying rights, they also have duties to perform.", "They are a prerequisite for enjoying Fundamental Rights.", "They make the Directive Principles of State Policy justiciable."],
        "answer": 1,
        "explanation": "The primary significance is that they <strong>serve as a constant reminder to every citizen</strong> that while the Constitution specifically confers on them certain fundamental rights, it also requires them to observe certain basic norms of democratic conduct and behaviour."
    },
    {
        "topic": "Fundamental Duties",
        "text": "'To uphold and protect the sovereignty, unity and integrity of India' is a provision made in the:",
        "options": ["Preamble of the Constitution", "Directive Principles of State Policy", "Fundamental Rights", "Fundamental Duties"],
        "answer": 3,
        "explanation": "This is one of the <strong>Fundamental Duties</strong> listed under Article 51-A (c) of the Constitution."
    },
    {
        "topic": "Fundamental Duties",
        "text": "Consider the following statements regarding Fundamental Duties: 1. Some of them are moral duties while others are civic duties. 2. They are confined to citizens only and do not extend to foreigners. 3. Like the Directive Principles, they are non-justiciable. Which statements are correct?",
        "options": ["1 and 2 only", "2 and 3 only", "1 and 3 only", "1, 2 and 3"],
        "answer": 3,
        "explanation": "<strong>All three statements are correct</strong>. For example, 'cherishing noble ideals' is a moral precept, while 'respecting the Constitution' is a civic duty. They apply only to citizens and are not enforceable through courts."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The duty to 'develop the scientific temper, humanism and the spirit of inquiry and reform' is a:",
        "options": ["Fundamental Right", "Directive Principle", "Fundamental Duty", "Legal Right"],
        "answer": 2,
        "explanation": "This is explicitly mentioned as a <strong>Fundamental Duty</strong> under Article 51-A (h) of the Constitution."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The Parliament can make laws for the enforcement of which of the following?",
        "options": ["Only Fundamental Rights", "Only Directive Principles", "Only Fundamental Duties", "Both Fundamental Rights and Fundamental Duties"],
        "answer": 3,
        "explanation": "Parliament can make laws to implement <strong>both Fundamental Rights</strong> (e.g., Article 17, Protection of Civil Rights Act) and <strong>Fundamental Duties</strong> (e.g., environmental protection laws)."
    },
    {
        "topic": "Fundamental Duties",
        "text": "Which of the following is a criticism often leveled against the chapter on Fundamental Duties?",
        "options": ["The list is too exhaustive and includes trivial duties.", "The list is not exhaustive and omits important duties like casting vote and paying taxes.", "The duties are too specific and leave no room for interpretation.", "They are superior to Fundamental Rights."],
        "answer": 1,
        "explanation": "A major criticism is that the <strong>list of duties is not exhaustive</strong>. It doesn't cover important duties like casting a vote, paying taxes, family planning and so on. In fact, the Swaran Singh Committee had recommended the duty to pay taxes."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The Fundamental Duty to provide educational opportunities for children was made in consonance with a change in which part of the Constitution?",
        "options": ["Part III (Fundamental Rights)", "Part IV (DPSP)", "Both A and B", "Preamble"],
        "answer": 2,
        "explanation": "The 86th Amendment Act (2002) was comprehensive. It added the Fundamental Duty in Part IV-A, but it also introduced Article 21-A in <strong>Part III (Fundamental Rights)</strong> making education a right and modified Article 45 in <strong>Part IV (DPSP)</strong>. Therefore, the change was made in consonance with changes in both parts."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The protection of which of the following is a Fundamental Duty of an Indian citizen?",
        "options": ["Village Panchayat", "National Flag and National Anthem", "Scheduled Castes and Scheduled Tribes", "President of India"],
        "answer": 1,
        "explanation": "Article 51-A(a) states that it shall be the duty of every citizen of India to abide by the Constitution and respect its ideals and institutions, the <strong>National Flag and the National Anthem</strong>."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The purpose of the Verma Committee (1999) was to:",
        "options": ["Identify new fundamental duties to be added.", "Identify the existence of legal provisions for the implementation of some of the Fundamental Duties.", "Make Fundamental Duties justiciable.", "Review the working of the Constitution."],
        "answer": 1,
        "explanation": "The Verma Committee on Fundamental Duties of the Citizens (1999) was tasked with <strong>identifying the existence of legal provisions</strong> for the implementation of some of the Fundamental Duties, thereby operationalizing them."
    },
    {
        "topic": "Fundamental Duties",
        "text": "Which Fundamental Duty obligates a citizen to defend the country and render national service when called upon to do so?",
        "options": ["Article 51-A (a)", "Article 51-A (b)", "Article 51-A (c)", "Article 51-A (d)"],
        "answer": 3,
        "explanation": "<strong>Article 51-A (d)</strong> explicitly states it is a fundamental duty 'to defend the country and render national service when called upon to do so'."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The non-justiciable nature of Fundamental Duties means:",
        "options": ["The Parliament cannot make laws to implement them.", "The courts cannot directly enforce them or issue writs.", "They are morally, but not legally, binding on the state.", "They have no significance in the constitutional framework."],
        "answer": 1,
        "explanation": "Being non-justiciable means their violation is not directly punishable by a court of law. The <strong>courts cannot issue writs</strong> like mandamus or certiorari for their enforcement, unlike Fundamental Rights."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The Supreme Court has held that the Fundamental Duties can be used by courts to:",
        "options": ["Strike down any law that is inconsistent with them.", "Determine the constitutionality of a law.", "Issue a writ of mandamus against the government.", "Punish citizens directly for their violation."],
        "answer": 1,
        "explanation": "The Supreme Court has ruled that while they are non-enforceable, Fundamental Duties can be used to <strong>determine the constitutional validity of a law</strong>. If a law seeks to promote a duty, it may be considered 'reasonable' in relation to Article 14 or 19."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The duty 'to strive towards excellence in all spheres of individual and collective activity' is aimed at:",
        "options": ["Ensuring the nation constantly rises to higher levels of endeavor and achievement.", "Promoting sports and culture.", "Encouraging citizens to win international awards.", "Focusing only on individual growth."],
        "answer": 0,
        "explanation": "Article 51-A(j) includes this duty so that 'the <strong>nation constantly rises to higher levels of endeavour and achievement</strong>.' It encompasses all fields of activity."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The Fundamental Duty to 'value and preserve the rich heritage of our composite culture' refers to:",
        "options": ["Preserving ancient monuments only.", "The diverse and pluralistic culture of India.", "The promotion of a single national culture.", "Learning classical languages."],
        "answer": 1,
        "explanation": "Composite culture refers to the <strong>diverse and rich culture of India</strong>, which is a blend of various cultures and traditions. It is a commitment to pluralism."
    },
    {
        "topic": "Fundamental Duties",
        "text": "Which of the following were among the original recommendations of the Swaran Singh Committee?",
        "options": ["1 only", "1 and 2 only", "1, 2 and 3", "1 and 3 only"],
        "answer": 2,
        "explanation": "The Swaran Singh Committee made all three recommendations: 1. Parliament can impose penalties for non-compliance, 2. No law imposing such penalty can be questioned in court, and 3. The duty to pay taxes should be a Fundamental Duty. <strong>All three were ultimately rejected</strong> by the government."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The inclusion of Fundamental Duties was a feature of the constitutional philosophy during the Prime Ministership of:",
        "options": ["Jawaharlal Nehru", "Lal Bahadur Shastri", "Indira Gandhi", "Morarji Desai"],
        "answer": 2,
        "explanation": "Fundamental Duties were added by the 42nd Amendment Act in 1976 during the Internal Emergency, when <strong>Indira Gandhi</strong> was the Prime Minister."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The Fundamental Duties serve as a source of inspiration for the citizens and promote a sense of:",
        "options": ["Entitlement and rights.", "Discipline and commitment.", "Political opposition.", "Legal litigation."],
        "answer": 1,
        "explanation": "The duties promote a sense of <strong>discipline and commitment</strong> towards the nation and society, reminding citizens that they are not just spectators but active participants in the realization of national goals."
    },
    {
        "topic": "Fundamental Duties",
        "text": "Which Fundamental Duty is directly related to environmental protection?",
        "options": ["Article 51-A (e)", "Article 51-A (f)", "Article 51-A (g)", "Article 51-A (h)"],
        "answer": 2,
        "explanation": "<strong>Article 51-A (g)</strong> states that it is a duty 'to protect and improve the natural environment including forests, lakes, rivers and wild life, and to have compassion for living creatures'."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The duty to 'promote harmony and the spirit of common brotherhood amongst all the people of India' explicitly asks citizens to renounce practices derogatory to the dignity of:",
        "options": ["Children", "The elderly", "Women", "Minorities"],
        "answer": 2,
        "explanation": "Article 51-A(e) requires citizens 'to promote harmony...and to renounce practices derogatory to the dignity of <strong>women</strong>.'"
    },
    {
        "topic": "Fundamental Duties",
        "text": "In which case did the Supreme Court state that the Fundamental Duties have to be read with the Fundamental Rights as they are two sides of the same coin?",
        "options": ["Minerva Mills Case", "Kesavananda Bharati Case", "AIIMS Students' Union vs AIIMS", "Golaknath Case"],
        "answer": 2,
        "explanation": "In the <strong>AIIMS Students' Union vs AIIMS (2001)</strong> case, the Supreme Court stated that Fundamental Duties and Fundamental Rights are not separate but are two sides of the same coin."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The phrases 'composite culture' and 'scientific temper' in the Fundamental Duties reflect a commitment to:",
        "options": ["Tradition and modernism.", "Pluralism and rationalism.", "Nationalism and globalism.", "Socialism and capitalism."],
        "answer": 1,
        "explanation": "'Composite culture' points towards India's diversity and <strong>pluralism</strong>, while 'scientific temper' emphasizes reason and <strong>rationalism</strong> as a way forward."
    },
    {
        "topic": "Fundamental Duties",
        "text": "Which of the following duties is both a Fundamental Duty of citizens and a Directive Principle for the State?",
        "options": ["To provide free legal aid.", "To protect and improve the natural environment.", "To promote cottage industries.", "To secure a uniform civil code."],
        "answer": 1,
        "explanation": "The duty 'to protect and improve the natural environment' is a Fundamental Duty under Article 51-A(g) and also a Directive Principle of State Policy under <strong>Article 48A</strong>."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The term 'noble ideals' in the duty 'to cherish and follow the noble ideals that inspired our national struggle for freedom' is:",
        "options": ["Clearly defined in the Constitution.", "Vague and susceptible to different interpretations.", "Limited to non-violence.", "Enforceable through criminal law."],
        "answer": 1,
        "explanation": "Critics argue that many of the duties are expressed in <strong>vague, ambiguous, and difficult to understand</strong> terms. What constitutes 'noble ideals' or 'composite culture' is open to interpretation."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The 86th Amendment Act, 2002, which added the 11th Fundamental Duty, also amended:",
        "options": ["Article 21 and Article 45", "Article 19 and Article 32", "Article 14 and Article 15", "Article 25 and Article 26"],
        "answer": 0,
        "explanation": "The 86th Amendment introduced Article 21-A (Right to Education) and also modified <strong>Article 45</strong> (Directive Principles) to state that the state shall endeavor to provide early childhood care and education for all children until they complete the age of six years."
    },
    {
        "topic": "Fundamental Duties",
        "text": "Failure to abide by the Fundamental Duties can be used by the state to justify:",
        "options": ["Revocation of citizenship.", "Reasonable restrictions on Fundamental Rights.", "Imposition of a state of emergency.", "Dissolution of the Parliament."],
        "answer": 1,
        "explanation": "The courts may uphold a law as a <strong>'reasonable restriction'</strong> on fundamental rights under Articles 14 and 19 if that law seeks to implement a fundamental duty."
    },
    {
        "topic": "Fundamental Duties",
        "text": "The Fundamental Duty to 'safeguard public property and to abjure violence' is particularly relevant in the context of:",
        "options": ["Tax evasion", "Environmental pollution", "Protests, bandhs, and riots", "Social media misuse"],
        "answer": 2,
        "explanation": "This duty under Article 51-A(i) is a direct appeal against the widespread destruction of public property and incitement to violence that often occurs during <strong>protests, bandhs, hartals, and riots</strong>."
    },
    {
        "topic": "Fundamental Duties",
        "text": "Overall, the chapter on Fundamental Duties is intended to bring the Indian Constitution in line with:",
        "options": ["The Universal Declaration of Human Rights (UDHR)", "The Constitutions of western liberal democracies", "The principle that rights and duties are correlative", "The demands of various social movements"],
        "answer": 2,
        "explanation": "The inclusion of fundamental duties recognizes that rights and duties are inseparable. It brings the Indian Constitution in line with Article 29 (1) of the Universal Declaration of Human Rights and the constitutions of several other countries that affirm the <strong>principle that rights and duties are correlative</strong>."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "Which Article of the Indian Constitution deals with the power of Parliament to amend the Constitution and its procedure?",
        "options": ["Article 352", "Article 360", "Article 368", "Article 370"],
        "answer": 2,
        "explanation": "<strong>Article 368</strong> in Part XX of the Constitution deals with the powers of Parliament to amend the Constitution and its procedure. It lays down two types of amendment procedures by a special majority."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "Which part of the Indian Constitution deals with its amendment?",
        "options": ["Part XVIII", "Part XX", "Part XXI", "Part XXII"],
        "answer": 1,
        "explanation": "<strong>Part XX</strong> of the Constitution is titled 'Amendment of the Constitution' and contains only one article, Article 368, which details the entire procedure."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "Who has the power to initiate the amendment of the Constitution?",
        "options": ["The President", "The Parliament", "The State Legislatures", "The Supreme Court"],
        "answer": 1,
        "explanation": "Only the <strong>Parliament</strong> has the constituent power to amend the Constitution. State legislatures cannot initiate a constitutional amendment bill, though their ratification is required in some cases."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "An amendment bill to the Constitution can be introduced in:",
        "options": ["Lok Sabha only", "Rajya Sabha only", "Either House of Parliament", "A joint sitting of Parliament"],
        "answer": 2,
        "explanation": "A bill for the purpose of amending the Constitution can be initiated in <strong>either House of Parliament</strong> (Lok Sabha or Rajya Sabha). The powers of both Houses are equal in this regard."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "A bill for the amendment of the Constitution requires:",
        "options": ["Prior permission of the President.", "Recommendation of the Cabinet.", "No prior permission of the President.", "Approval from the Chief Justice of India."],
        "answer": 2,
        "explanation": "An amendment bill can be introduced by a minister or a private member and does <strong>not require prior permission of the President</strong>."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "Which of the following is NOT required for a Constitutional Amendment Bill to become an Act?",
        "options": ["Passage in each House of Parliament by a special majority.", "Assent of the President.", "A joint sitting of both Houses in case of disagreement.", "Ratification by state legislatures, if required."],
        "answer": 2,
        "explanation": "In case of a disagreement between the two Houses, there is <strong>no provision for holding a joint sitting</strong> of the two Houses for the purpose of deliberation and passage of a constitutional amendment bill. Each House must pass the bill separately."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "What constitutes a 'special majority' for passing a Constitutional Amendment Bill in Parliament?",
        "options": ["A majority of the total membership of the House.", "A majority of two-thirds of the members of the House present and voting.", "Both (A) and (B).", "A majority of three-fourths of the members present and voting."],
        "answer": 2,
        "explanation": "A special majority under Article 368 requires both: (a) a majority (that is, more than 50 per cent) of the total membership of each House; and (b) a majority of two-thirds of the members of each House present and voting. So, <strong>Both (A) and (B)</strong> are required."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "Which of the following provisions of the Constitution can be amended by a simple majority of the Parliament?",
        "options": ["Directive Principles of State Policy", "Fundamental Rights", "Admission or establishment of new states", "Election of the President and its manner"],
        "answer": 2,
        "explanation": "Provisions related to the <strong>admission or establishment of new states</strong> (under Article 2, 3 and 4) can be amended by a simple majority. Such amendments are explicitly kept outside the scope of Article 368."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "Amendment of which of the following requires ratification by the legislatures of not less than one-half of the states?",
        "options": ["Fundamental Rights", "Creation of new Legislative Councils in states", "Any of the lists in the Seventh Schedule", "Rules of procedure in Parliament"],
        "answer": 2,
        "explanation": "Provisions related to the federal structure require a special majority plus ratification by half the states. Amending <strong>any of the lists in the Seventh Schedule</strong> (Union, State, Concurrent) falls under this category as it affects the distribution of powers."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "The President's assent to a Constitutional Amendment Bill is:",
        "options": ["Optional", "Obligatory", "Subject to veto power", "Subject to reconsideration by Parliament"],
        "answer": 1,
        "explanation": "The President must give his assent to the bill. He can neither withhold his assent to the bill nor return the bill for reconsideration of the Parliament. This was made <strong>obligatory</strong> by the 24th Amendment Act of 1971."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "Which Constitutional Amendment Act made it obligatory for the President to give his assent to a Constitutional Amendment Bill?",
        "options": ["1st Amendment Act, 1951", "42nd Amendment Act, 1976", "44th Amendment Act, 1978", "24th Amendment Act, 1971"],
        "answer": 3,
        "explanation": "The <strong>24th Amendment Act of 1971</strong> amended Article 368 to make it explicit that the President is bound to give his assent to a Constitutional Amendment Bill when it is presented to him."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "Consider the following statements: 1. The Indian Constitution is a blend of rigidity and flexibility. 2. Article 368 provides for two types of amendments. Which is/are correct?",
        "options": ["1 only", "2 only", "Both 1 and 2", "Neither 1 nor 2"],
        "answer": 2,
        "explanation": "<strong>Both statements are correct.</strong> The constitution is a 'blend of rigidity and flexibility' because some provisions can be amended by simple majority (flexibility) while others require a special majority (rigidity). Article 368 itself specifies two types of amendments: by special majority, and by special majority with state ratification."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "The provision for a joint sitting of both the Houses of Parliament is applicable to:",
        "options": ["Ordinary bills", "Money bills", "Constitutional Amendment bills", "Both (A) and (B)"],
        "answer": 0,
        "explanation": "The provision for a joint sitting under Article 108 is available only for <strong>ordinary bills</strong> or financial bills, and not for Money Bills or Constitutional Amendment Bills."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "Which of the following is considered a criticism of the amendment procedure of the Indian Constitution?",
        "options": ["The process is too rigid and difficult.", "The state legislatures have a very limited role in the amendment process.", "The judiciary has no power to review amendments.", "The President can veto an amendment bill."],
        "answer": 1,
        "explanation": "A key criticism is the <strong>limited role for state legislatures</strong>. They cannot initiate any bill for amendment, and for ratification, there's no prescribed time limit. Their role is largely passive."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "An amendment of the Constitution which affects the federal structure of India must be ratified by:",
        "options": ["A majority of state legislatures.", "Three-fourths of state legislatures.", "At least half of the state legislatures by a simple majority.", "At least half of the state legislatures by a special majority."],
        "answer": 2,
        "explanation": "The bill must be ratified by the legislatures of <strong>at least half of the states by a simple majority</strong> (i.e., a majority of the members of the House present and voting). There is no requirement for a special majority at the state level."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "Amending the provisions related to the Supreme Court and High Courts requires:",
        "options": ["A simple majority of Parliament.", "A special majority of Parliament.", "A special majority of Parliament and ratification by half of the states.", "An executive order by the President."],
        "answer": 2,
        "explanation": "Any amendment concerning the Supreme Court and high courts (e.g., their powers, jurisdiction) affects the federal structure and judicial independence. Hence, it requires a <strong>special majority of Parliament plus ratification by half of the states</strong>."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "To amend the 7th Schedule of the Indian Constitution, the bill must be passed by:",
        "options": ["A simple majority of Parliament.", "A special majority of Parliament.", "A special majority of Parliament and ratified by at least half of the states.", "A resolution passed by two-thirds of the states."],
        "answer": 2,
        "explanation": "The 7th Schedule deals with the distribution of legislative powers between the Centre and states. Any change to it is a federal matter and requires the most rigid amendment procedure: a <strong>special majority of Parliament and ratification by at least half of the states</strong>."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "The 'total membership' of a House, in the context of a special majority, refers to:",
        "options": ["The number of members present in the House.", "The total number of sanctioned seats in the House, irrespective of vacancies or absentees.", "The number of members present and voting.", "The quorum of the House."],
        "answer": 1,
        "explanation": "'Total membership' means the <strong>total number of members comprising the House as prescribed in the Constitution, irrespective of whether there are vacancies or absentees</strong> on any given day. For Lok Sabha, this is 543."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "The 99th Constitutional Amendment Act, which was later struck down by the Supreme Court, was related to:",
        "options": ["Goods and Services Tax (GST)", "National Judicial Appointments Commission (NJAC)", "Reservation in promotions", "Land boundary agreement with Bangladesh"],
        "answer": 1,
        "explanation": "The 99th Amendment Act of 2014 established the <strong>National Judicial Appointments Commission (NJAC)</strong>. However, in 2015, the Supreme Court struck it down as unconstitutional for violating the independence of the judiciary, which is part of the basic structure."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "The 101st Constitutional Amendment Act is related to:",
        "options": ["The introduction of the Goods and Services Tax (GST).", "Granting constitutional status to the National Commission for Backward Classes.", "A 10% reservation for Economically Weaker Sections (EWS).", "Extending reservation for SCs and STs in the Lok Sabha."],
        "answer": 0,
        "explanation": "The 101st Amendment Act of 2016 paved the way for the introduction of a nationwide <strong>Goods and Services Tax (GST)</strong>, a significant tax reform."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "In the *Golaknath case (1967)*, the Supreme Court ruled that:",
        "options": ["Parliament can amend any part of the Constitution.", "Fundamental Rights are not amenable to the parliamentary restriction.", "The Preamble is not a part of the Constitution.", "The 'basic structure' of the Constitution cannot be amended."],
        "answer": 1,
        "explanation": "In the *Golaknath case*, the Supreme Court reversed its earlier stand and declared that <strong>Fundamental Rights are 'transcendental and immutable'</strong> and Parliament cannot abridge or take away any of these rights."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "Which case established the 'Doctrine of Basic Structure,' limiting Parliament's amendment power?",
        "options": ["Shankari Prasad case (1951)", "Golaknath case (1967)", "Kesavananda Bharati case (1973)", "Minerva Mills case (1980)"],
        "answer": 2,
        "explanation": "The landmark <strong>Kesavananda Bharati case (1973)</strong> propounded the Doctrine of Basic Structure, ruling that while Parliament has the power to amend any part of the Constitution, it cannot alter its 'basic structure' or 'basic features'."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "There is no time limit within which the state legislatures should ratify or reject a constitutional amendment submitted to them. This statement is:",
        "options": ["True", "False", "True, but only for certain amendments.", "False, the Constitution specifies a six-month period."],
        "answer": 0,
        "explanation": "This statement is <strong>True</strong>. The Constitution does not prescribe any time limit within which the state legislatures should ratify or reject an amendment submitted to them. This is a noted loophole in the procedure."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "The process of amending the Indian Constitution is borrowed from the Constitution of:",
        "options": ["USA", "Australia", "South Africa", "Canada"],
        "answer": 2,
        "explanation": "The procedure of amendment laid down in Article 368 is modeled on the constitution of <strong>South Africa</strong>. The feature of having some amendments require state ratification is borrowed from Australia and USA."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "Which of the following subjects does NOT require the consent of states for amendment?",
        "options": ["Representation of states in Parliament.", "Power of Parliament to amend the Constitution (Article 368 itself).", "Fundamental Rights.", "Election of the President."],
        "answer": 2,
        "explanation": "Amendment of <strong>Fundamental Rights</strong> can be done by a special majority of the Parliament alone and does not require ratification by state legislatures."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "The 42nd Amendment Act, 1976 is often called the 'mini-Constitution' because:",
        "options": ["It was the longest amendment ever made.", "It made large-scale changes to the Constitution.", "It was passed during the Emergency.", "It added a new part to the Constitution."],
        "answer": 1,
        "explanation": "It is called a 'mini-Constitution' because it made the most comprehensive and <strong>large-scale changes</strong> to the Constitution, amending the Preamble and over 50 articles, and was aimed at altering the basic framework of the document."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "The 44th Amendment Act, 1978, restored some of the changes made by the 42nd Amendment. A key change was:",
        "options": ["Making the President's assent to amendment bills optional.", "Removing the Right to Property from Fundamental Rights.", "Adding the word 'Socialist' to the Preamble.", "Increasing the tenure of the Lok Sabha to six years."],
        "answer": 1,
        "explanation": "A major change made by the 44th Amendment was <strong>removing the Right to Property from the list of Fundamental Rights</strong> (Article 31) and converting it into a legal right under a new Article 300-A."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "Why is there no provision for a special body like a Constitutional Convention for amending the Constitution in India?",
        "options": ["The framers believed Parliament represents the will of the people.", "It was considered too expensive and cumbersome.", "The Constituent Assembly itself was meant to be that body.", "Both (A) and (B)."],
        "answer": 3,
        "explanation": "The framers deliberately gave the constituent power to the Parliament itself, which is a representative body. They also considered a separate convention or referendum as <strong>too difficult and expensive</strong> to operate in a large and diverse country like India. Therefore, both (A) and (B) are valid reasons."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "If an amendment bill seeking to change the name of a state is passed by a simple majority in Parliament, it is:",
        "options": ["Considered an amendment under Article 368.", "Not considered an amendment under Article 368.", "Unconstitutional, as it needs a special majority.", "Sent to the President for prior approval."],
        "answer": 1,
        "explanation": "Article 4 of the Constitution itself declares that laws made for admission or establishment of new states (Article 2) and formation of new states and alteration of areas, boundaries or names of existing states (Article 3) are <strong>not to be considered as amendments</strong> of the Constitution for the purposes of Article 368."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "The provision regarding the amendment of the constitution reflects the vision of the constitution makers to make it a:",
        "options": ["Rigid and unchangeable document.", "Completely flexible document.", "Living document that can adapt to changing times.", "Document amendable only by popular referendum."],
        "answer": 2,
        "explanation": "The blend of rigidity and flexibility in the amendment procedure reflects the framers' vision of the Constitution as a <strong>living document</strong> that should be able to adapt itself to the changing needs and conditions of society."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "The state legislatures can initiate a bill for which of the following constitutional processes?",
        "options": ["Amending the list of Fundamental Rights.", "Creating or abolishing the Legislative Council in the state.", "Altering the boundary of the state.", "None of the above."],
        "answer": 1,
        "explanation": "While state legislatures cannot initiate a constitutional amendment bill under Article 368, they can initiate the process for the <strong>creation or abolition of their Legislative Council</strong> by passing a resolution to that effect, upon which Parliament may legislate. This process is under Article 169."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "Which of the following is true about the ratification of an amendment bill by states?",
        "options": ["The bill must be passed by the state legislature with a special majority.", "The states must give their consent within a specified timeframe.", "The constitution is silent on whether states can withdraw their approval after giving it.", "All states must ratify the amendment."],
        "answer": 2,
        "explanation": "One of the procedural gaps identified by critics is that the <strong>Constitution is silent on the issue of whether a state can withdraw its approval</strong> after according the same."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "The 103rd Constitutional Amendment Act, 2019, provided for:",
        "options": ["Constitutional status to the NCBC.", "Introduction of GST.", "Reservation for Economically Weaker Sections (EWS) in education and jobs.", "Land boundary agreement with Bangladesh."],
        "answer": 2,
        "explanation": "The 103rd Amendment Act of 2019 enabled a 10% <strong>reservation for Economically Weaker Sections (EWS)</strong> of citizens in admissions to educational institutions and in government jobs."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "What happens if a state legislature takes no action on a constitutional amendment bill sent for ratification?",
        "options": ["It is deemed to be rejected.", "It is deemed to be approved after 6 months.", "The bill lapses.", "There is no provision; the process is stalled until they act."],
        "answer": 3,
        "explanation": "As the constitution does not prescribe a time limit for ratification, if a state takes no action, <strong>there is no clear provision on what happens next</strong>. The process effectively remains stalled as far as that state's ratification is concerned."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "The power of Parliament to amend the constitution is a:",
        "options": ["Constituent power.", "Legislative power.", "Executive power.", "Judicial power."],
        "answer": 0,
        "explanation": "The power to amend the constitution is known as a <strong>constituent power</strong>, which is distinct from its ordinary legislative power to make laws. This was clarified in the Kesavananda Bharati case."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "The procedure for amending the provision for the official language of the Union falls under:",
        "options": ["Simple majority.", "Special majority.", "Special majority plus ratification by states.", "Presidential order."],
        "answer": 1,
        "explanation": "Amending provisions related to the official language of the Union does not affect the federal structure in the manner specified by Article 368. Thus, it only requires a <strong>special majority</strong> of the Parliament."
    },
    {
        "topic": "Amendment of the Constitution",
        "text": "The final authority to interpret the Constitution and its amendments rests with:",
        "options": ["The Parliament", "The President", "The Prime Minister", "The Supreme Court"],
        "answer": 3,
        "explanation": "By virtue of its power of judicial review, the <strong>Supreme Court</strong> is the ultimate interpreter of the Constitution. It can determine if an amendment is valid and if it violates the basic structure."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The 'Doctrine of Basic Structure' of the Indian Constitution was propounded by the Supreme Court in which case?",
        "options": ["Golaknath v. State of Punjab", "Kesavananda Bharati v. State of Kerala", "Shankari Prasad v. Union of India", "Minerva Mills v. Union of India"],
        "answer": 1,
        "explanation": "The landmark 'Doctrine of Basic Structure' was laid down by the Supreme Court in the historic <strong>Kesavananda Bharati v. State of Kerala (1973)</strong> case."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "What is the core principle of the 'Basic Structure' doctrine?",
        "options": ["The Parliament has absolute power to amend the Constitution.", "Fundamental Rights cannot be amended under any circumstances.", "The Parliament's power to amend the Constitution is limited, and it cannot alter its basic framework.", "The Preamble is the only part of the Constitution that cannot be amended."],
        "answer": 2,
        "explanation": "The core of the doctrine is that while Parliament's power to amend under Article 368 is wide, it is not unlimited. It <strong>cannot be used to destroy or abrogate the 'basic structure' or 'fundamental features'</strong> of the Constitution."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "Which of the following is NOT considered a part of the 'Basic Structure' of the Constitution?",
        "options": ["Supremacy of the Constitution", "Judicial Review", "Federal Character", "The absolute right to property"],
        "answer": 3,
        "explanation": "The <strong>absolute right to property</strong> was removed from the list of Fundamental Rights by the 44th Amendment Act, 1978. All other options have been declared by the SC to be part of the basic structure at various points."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "In the *Shankari Prasad case (1951)*, the Supreme Court held that:",
        "options": ["Parliament cannot amend Fundamental Rights.", "The term 'law' in Article 13 does not include constitutional amendments.", "The Preamble is part of the basic structure.", "Parliament's amending power is limited."],
        "answer": 1,
        "explanation": "In the *Shankari Prasad case*, the Supreme Court upheld Parliament's power to amend Fundamental Rights, ruling that the word 'law' in Article 13 includes only ordinary laws and <strong>not constitutional amendment acts</strong> (constituent law)."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "What was the Supreme Court's stance in the *Golaknath case (1967)*?",
        "options": ["It upheld its earlier decision in the Shankari Prasad case.", "It ruled that Fundamental Rights have a 'transcendental and immutable' position.", "It introduced the concept of 'prospective overruling'.", "Both (B) and (C)."],
        "answer": 3,
        "explanation": "The Golaknath judgment reversed the earlier stand, stating that Fundamental Rights are <strong>transcendental and immutable</strong>. To avoid practical difficulties, it also introduced the doctrine of <strong>prospective overruling</strong>, meaning the decision would not affect past amendments."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "Which constitutional amendment was enacted by the Parliament in reaction to the *Golaknath case* judgment?",
        "options": ["21st Amendment Act", "24th Amendment Act", "26th Amendment Act", "31st Amendment Act"],
        "answer": 1,
        "explanation": "Parliament reacted to the Supreme Court's judgement in the *Golaknath case (1967)* by enacting the <strong>24th Amendment Act (1971)</strong> to restore its power to amend Fundamental Rights."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The 24th Amendment Act (1971) sought to:",
        "options": ["Affirm Parliament's power to amend any part of the Constitution, including Fundamental Rights.", "Make the President's assent to a Constitutional Amendment Bill compulsory.", "Both (A) and (B).", "Abolish privy purses."],
        "answer": 2,
        "explanation": "The 24th Amendment did two main things: it amended Articles 13 and 368 to <strong>affirm Parliament's power to amend any part of the Constitution</strong>, and it made it <strong>obligatory for the President to give assent</strong> to a Constitutional Amendment Bill."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The historic judgment in the *Kesavananda Bharati case (1973)* was delivered by a bench of how many judges, the largest ever?",
        "options": ["9", "11", "13", "15"],
        "answer": 2,
        "explanation": "The judgment was delivered by the largest-ever Constitution Bench, comprising <strong>13 judges</strong>, with a slender majority of 7:6."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "Which case is also known as the 'Fundamental Rights Case'?",
        "options": ["A.K. Gopalan case", "Maneka Gandhi case", "Kesavananda Bharati case", "Minerva Mills case"],
        "answer": 2,
        "explanation": "The <strong>Kesavananda Bharati case (1973)</strong> is also famously known as the 'Fundamental Rights Case' because it primarily dealt with the extent of Parliament's power to amend Fundamental Rights."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "In the *Indira Nehru Gandhi case (1975)*, the Supreme Court applied the doctrine of basic structure to strike down a clause of which amendment?",
        "options": ["38th Amendment", "39th Amendment", "41st Amendment", "42nd Amendment"],
        "answer": 1,
        "explanation": "In this case, also known as the Election Case, the Supreme Court invalidated a provision of the <strong>39th Amendment Act (1975)</strong> which kept the election disputes involving the Prime Minister outside the jurisdiction of all courts, as it violated the basic structure."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "Which element was added to the list of basic structure features in the *Indira Nehru Gandhi case*?",
        "options": ["Rule of Law", "Secularism", "Free and fair elections", "Federalism"],
        "answer": 2,
        "explanation": "The Supreme Court added '<strong>free and fair elections</strong>' to the list of basic features, stating that it is the bedrock of democracy, which was already identified as a basic feature."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "In the *Minerva Mills case (1980)*, the Supreme Court struck down provisions of the 42nd Amendment that:",
        "options": ["Gave unlimited amending power to the Parliament.", "Gave primacy to Directive Principles over certain Fundamental Rights.", "Both (A) and (B).", "Curtailed the power of judicial review."],
        "answer": 2,
        "explanation": "In the Minerva Mills case, the Supreme Court struck down two provisions of the 42nd Amendment Act: one that gave <strong>unlimited power to Parliament to amend</strong>, and another that placed <strong>all Directive Principles above Fundamental Rights under Articles 14 and 19</strong>."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The harmony and balance between Fundamental Rights and Directive Principles was declared a 'basic feature' in which case?",
        "options": ["Kesavananda Bharati case", "Waman Rao case", "S.R. Bommai case", "Minerva Mills case"],
        "answer": 3,
        "explanation": "In the <strong>Minerva Mills case (1980)</strong>, the Supreme Court held that the Indian Constitution is founded on the bedrock of the balance between the Fundamental Rights and the Directive Principles, and this balance is a basic feature."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "What did the Supreme Court clarify in the *Waman Rao case (1981)* regarding the basic structure doctrine?",
        "options": ["The doctrine would apply to all constitutional amendments, past and future.", "The doctrine would apply prospectively to constitutional amendments made after April 24, 1973.", "The doctrine was declared unconstitutional.", "The doctrine would not apply to amendments related to the 9th Schedule."],
        "answer": 1,
        "explanation": "The Supreme Court in the *Waman Rao case* clarified that the doctrine of basic structure would apply to constitutional amendments enacted <strong>after April 24, 1973</strong> (the date of the Kesavananda Bharati judgment)."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "Which of the following has been held by the Supreme Court to be a basic feature? 1. Sovereign, democratic, republican nature. 2. Separation of powers. 3. Parliamentary System. 4. Independence of Judiciary.",
        "options": ["1 and 2 only", "1, 2 and 4 only", "3 and 4 only", "1, 2, 3 and 4"],
        "answer": 3,
        "explanation": "<strong>All four elements</strong>—sovereign, democratic, republican nature; separation of powers; the parliamentary system; and the independence of the judiciary—have been judicially recognized as essential components of the Constitution's basic structure."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The concept of 'Judicial Review' is a part of the basic structure. This means:",
        "options": ["The judiciary can make laws.", "The judiciary can review its own judgements.", "The judiciary can review the constitutional validity of legislative and executive actions.", "The President can ask the judiciary for its opinion on any matter."],
        "answer": 2,
        "explanation": "Judicial review, as a basic feature, refers to the power of the <strong>judiciary to examine the constitutionality of legislative enactments and executive orders</strong> of both the Central and state governments and declare them void if they are found to be in violation of the Constitution."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The 'Secular character' of the Constitution was explicitly held to be a basic feature in which landmark case?",
        "options": ["Minerva Mills case", "S.R. Bommai case", "Indra Sawhney case", "Kihoto Hollohan case"],
        "answer": 1,
        "explanation": "Though the word 'Secular' was added to the Preamble in 1976, the Supreme Court in the <strong>S.R. Bommai case (1994)</strong> explicitly held that secularism is a basic feature of the Constitution."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The list of elements that form the 'basic structure' is:",
        "options": ["Explicitly mentioned in Article 368.", "An exhaustive list provided by the Supreme Court in 1973.", "Not exhaustive and is subject to evolution by the judiciary on a case-by-case basis.", "Final and cannot be expanded further."],
        "answer": 2,
        "explanation": "The Supreme Court has deliberately kept the list of basic features open-ended. It is <strong>not an exhaustive list</strong> and the court can add more elements to it as different cases come up for adjudication."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The doctrine of basic structure acts as a check on:",
        "options": ["The legislative power of the states.", "The ordinance-making power of the President.", "The constituent power of the Parliament.", "The discretionary power of the Governor."],
        "answer": 2,
        "explanation": "The primary function of the doctrine is to limit the otherwise vast <strong>constituent power of the Parliament</strong> under Article 368, ensuring that the fundamental identity of the Constitution is preserved."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "Consider the following: 'The power of the High Court under Article 226 and 227'. Is this considered part of the basic structure?",
        "options": ["Yes, as affirmed in the L. Chandra Kumar case.", "No, it can be amended by a simple majority.", "Only the power under Article 226 is basic, not 227.", "This question is yet to be decided by the Supreme Court."],
        "answer": 0,
        "explanation": "<strong>Yes</strong>, in the *L. Chandra Kumar case (1997)*, the Supreme Court held that the power of judicial review vested in the High Courts under Article 226 and the Supreme Court under Article 32 is an integral and essential feature of the Constitution, forming part of its basic structure."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The 'Principle of Equality' has been declared a part of the basic structure. This means Parliament cannot amend the constitution to:",
        "options": ["Abolish Article 14 completely.", "Make laws that are discriminatory in an arbitrary manner.", "Both (A) and (B).", "Introduce new grounds for reasonable classification."],
        "answer": 2,
        "explanation": "As the principle of equality is a basic feature, Parliament cannot <strong>abolish Article 14</strong>, nor can it enact laws that violate the essence of equality by being <strong>arbitrarily discriminatory</strong>. It is the core idea of equality, not the specific text, that is protected."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The significance of the basic structure doctrine lies in the fact that it:",
        "options": ["Establishes parliamentary sovereignty.", "Upholds constitutionalism and prevents autocratic use of amendment powers.", "Makes the Constitution extremely rigid.", "Weakens the principle of separation of powers."],
        "answer": 1,
        "explanation": "The doctrine is a cornerstone of Indian constitutionalism. It <strong>upholds the supremacy of the constitution</strong> and prevents the Parliament from using its amendment power autocratically to dismantle the foundational principles of the nation."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The 'Rule of Law' as a basic feature was emphasised in the:",
        "options": ["Shankari Prasad Case", "Indira Nehru Gandhi Case (Election Case)", "Maneka Gandhi Case", "A.K. Gopalan Case"],
        "answer": 1,
        "explanation": "While 'rule of law' has been a recurring theme, it was particularly emphasized in the <strong>Indira Nehru Gandhi Case (1975)</strong> when the Supreme Court struck down the 39th Amendment which attempted to place a specific individual (the PM) above the law."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The doctrine of basic structure is a product of:",
        "options": ["Parliamentary legislation", "Constitutional provision", "Judicial innovation", "Executive order"],
        "answer": 2,
        "explanation": "The doctrine is not mentioned anywhere in the text of the Constitution. It is a prime example of <strong>judicial innovation</strong> or judicial creativity, evolved by the Supreme Court through interpretation."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "If Parliament passes a constitutional amendment that violates the basic structure, the amendment can be:",
        "options": ["Sent back for reconsideration.", "Put to a referendum.", "Declared void by the Supreme Court.", "Ratified by a majority of states to make it valid."],
        "answer": 2,
        "explanation": "The very purpose of the doctrine is to empower the judiciary to strike down amendments that violate it. The Supreme Court, using its power of judicial review, can <strong>declare such an amendment null and void</strong>."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The date April 24, 1973, is significant in Indian constitutional history because:",
        "options": ["The Constitution of India came into force.", "The first general election was held.", "The Kesavananda Bharati judgment was delivered.", "The state of emergency was declared."],
        "answer": 2,
        "explanation": "April 24, 1973, is the date on which the Supreme Court <strong>delivered its landmark judgment in the Kesavananda Bharati case</strong>, forever changing the landscape of Indian constitutional law."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The concept of a 'Sovereign, Democratic, Republic' as part of the basic structure ensures that India cannot be constitutionally turned into a:",
        "options": ["Monarchy or a dependency of another nation.", "Presidential system of government.", "Unitary state.", "Capitalist economy."],
        "answer": 0,
        "explanation": "This basic feature ensures that India's sovereign status cannot be ceded, its republican nature cannot be replaced by a <strong>monarchy</strong>, and its democratic character cannot be eliminated."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The element of 'Federalism' as a basic feature implies that:",
        "options": ["States have the right to secede from the Union.", "The Centre cannot encroach upon the legislative domain of the states in an arbitrary manner.", "The office of the Governor must be abolished.", "The Rajya Sabha should be given more powers than the Lok Sabha."],
        "answer": 1,
        "explanation": "Federalism as a basic feature protects the division of powers. It implies that while the Centre is strong, it <strong>cannot arbitrarily destroy the legislative, executive, and financial powers of the states</strong> as laid down in the constitution."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "Which statement is the most accurate description of the basic structure doctrine?",
        "options": ["It is a list of articles that cannot be amended.", "It is a judicial principle that protects the fundamental identity of the Constitution from being destroyed by amendment.", "It is a political doctrine that gives the President veto power over amendments.", "It is a procedural requirement for constitutional amendments."],
        "answer": 1,
        "explanation": "The most accurate description is that it's a <strong>judicial principle that guards the core identity and philosophy of the Constitution</strong>. It's about the essence of the provisions, not just the text of specific articles."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "'Independence of Judiciary' as a basic feature was central to the Supreme Court's decision to strike down the:",
        "options": ["42nd Amendment Act", "44th Amendment Act", "99th Amendment Act (NJAC Act)", "101st Amendment Act (GST Act)"],
        "answer": 2,
        "explanation": "The Supreme Court struck down the <strong>99th Amendment Act and the NJAC Act</strong> in 2015 on the grounds that they gave the executive a significant role in judicial appointments, thereby compromising the 'independence of the judiciary', which is a basic feature."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The principle of 'Free and Fair Elections' as a basic feature was first judicially recognized in the:",
        "options": ["Kesavananda Bharati Case", "Minerva Mills Case", "Indira Nehru Gandhi Case", "Kihoto Hollohan Case"],
        "answer": 2,
        "explanation": "While democracy was identified as a basic feature in Kesavananda, the element of 'free and fair elections' as its essential component was explicitly stated and applied in the <strong>Indira Nehru Gandhi Case (1975)</strong>."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "By propounding the basic structure doctrine, the judiciary has positioned itself as the:",
        "options": ["Creator of the Constitution.", "An arm of the executive.", "The ultimate interpreter and guardian of the Constitution.", "A subordinate to the Parliament."],
        "answer": 2,
        "explanation": "The doctrine solidifies the judiciary's role as the <strong>ultimate interpreter and guardian of the Constitution's</strong> core principles, ensuring that no single organ of the state can subvert its fundamental identity."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The basic structure doctrine has been criticized on the ground that:",
        "options": ["It makes the judiciary an unelected 'super-legislature'.", "It is not explicitly mentioned in the Constitution.", "The elements of the basic structure are vague and subjective.", "All of the above."],
        "answer": 3,
        "explanation": "<strong>All of the above</strong> are common criticisms. Critics argue it is undemocratic (unelected judges overriding elected representatives), lacks a textual basis in the constitution, and is inherently vague, leading to uncertainty."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The 'limited amending power of Parliament' is itself considered a part of the:",
        "options": ["Preamble", "Basic Structure", "Seventh Schedule", "Directive Principles"],
        "answer": 1,
        "explanation": "In a self-referential conclusion in the *Minerva Mills case*, the Supreme Court held that Parliament's limited power to amend is itself a <strong>Basic Structure</strong>. Therefore, Parliament cannot amend Article 368 to expand its amending power to an unlimited extent."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The effect of the Kesavananda Bharati judgment was to:",
        "options": ["Overrule the Golaknath judgment.", "Uphold the validity of the 24th Amendment Act.", "Establish a balance between parliamentary power and constitutional integrity.", "All of the above."],
        "answer": 3,
        "explanation": "<strong>All of the above</strong> are correct. It overruled *Golaknath* (by stating FRs can be amended), upheld the 24th Amendment (affirming Parliament's power), but balanced this by introducing the Basic Structure doctrine to preserve the Constitution's integrity."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "'Effective access to justice' has been recognized as a component of the basic structure by the Supreme Court.",
        "options": ["True", "False", "Only for criminal cases", "Only for civil cases"],
        "answer": 0,
        "explanation": "This statement is <strong>True</strong>. In various judgements, the Supreme Court has held that 'effective access to justice' is a fundamental aspect of the rule of law and is considered a part of the basic structure."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The insertion of new laws into the Ninth Schedule after April 24, 1973, can be challenged in court if they:",
        "options": ["Relate to land reforms.", "Are passed by a state legislature.", "Violate the basic structure of the Constitution.", "Have not been approved by the President."],
        "answer": 2,
        "explanation": "In the *I.R. Coelho case (2007)*, the Supreme Court ruled that laws placed in the Ninth Schedule after April 24, 1973, are open to judicial review if they are found to <strong>violate the basic structure</strong> of the Constitution."
    },
    {
        "topic": "Basic Structure of the Constitution",
        "text": "The evolution of the basic structure doctrine highlights the ongoing tension between:",
        "options": ["The President and the Prime Minister.", "Parliamentary sovereignty and judicial supremacy.", "The Central government and State governments.", "The Lok Sabha and the Rajya Sabha."],
        "answer": 1,
        "explanation": "The entire history of the doctrine, from Shankari Prasad to Minerva Mills, is a story of the tussle between the Parliament, asserting its supreme power to amend (<strong>parliamentary sovereignty</strong>), and the Supreme Court, establishing its power to review and protect the constitution (<strong>judicial supremacy</strong>)."
    },
    {
        "topic": "Parliamentary System",
        "text": "The parliamentary system of government in India is based on the pattern of which country?",
        "options": ["USA", "France", "Britain", "Canada"],
        "answer": 2,
        "explanation": "The parliamentary system in India is largely based on the British parliamentary system, often referred to as the <strong>Westminster model</strong> of government."
    },
    {
        "topic": "Parliamentary System",
        "text": "Which of the following is a feature of the Parliamentary form of government?",
        "options": ["Strict separation of powers.", "President as the real executive.", "Collective responsibility of the executive to the legislature.", "Fixed tenure for the executive."],
        "answer": 2,
        "explanation": "The bedrock principle of a parliamentary system is the <strong>collective responsibility of the executive (the Council of Ministers) to the legislature</strong> (specifically the lower house). This is enshrined in Article 75(3)."
    },
    {
        "topic": "Parliamentary System",
        "text": "In a parliamentary system, the head of the government is the:",
        "options": ["President", "Prime Minister", "Monarch", "Chief Justice"],
        "answer": 1,
        "explanation": "In a parliamentary system, there's a distinction between the Head of State (President/Monarch) and the Head of Government. The <strong>Prime Minister</strong> is the head of the government and the real executive."
    },
    {
        "topic": "Parliamentary System",
        "text": "Who are the nominal and real executives in the Indian parliamentary system, respectively?",
        "options": ["Prime Minister and President", "President and Prime Minister", "The Council of Ministers and the Prime Minister", "The Parliament and the President"],
        "answer": 1,
        "explanation": "The <strong>President</strong> is the nominal, de jure, or titular executive head of the State. The <strong>Prime Minister</strong> is the real or de facto executive head of the Government."
    },
    {
        "topic": "Parliamentary System",
        "text": "The principle of 'collective responsibility' is the bedrock of parliamentary government. It is enshrined in which article of the Constitution?",
        "options": ["Article 74", "Article 75", "Article 77", "Article 78"],
        "answer": 1,
        "explanation": "<strong>Article 75(3)</strong> explicitly states that 'The Council of Ministers shall be collectively responsible to the House of the People (Lok Sabha).'"
    },
    {
        "topic": "Parliamentary System",
        "text": "'Double membership' in a parliamentary system means that:",
        "options": ["A person can be a member of two political parties.", "Ministers are members of both the legislature and the executive.", "A person can be a member of both Lok Sabha and Rajya Sabha simultaneously.", "A minister can hold two different portfolios."],
        "answer": 1,
        "explanation": "A key feature is 'double membership,' where <strong>ministers are simultaneously members of the legislature (Parliament) and the executive</strong> (Council of Ministers). An individual cannot be a minister without being an MP (or becoming one within 6 months)."
    },
    {
        "topic": "Parliamentary System",
        "text": "Which of the following is a characteristic of a Presidential system of government, as found in the USA?",
        "options": ["The executive is responsible to the legislature.", "The President is the head of the state as well as the head of the government.", "The President can dissolve the lower house.", "Ministers are chosen from within the legislature."],
        "answer": 1,
        "explanation": "In a presidential system, the President is both the <strong>head of the State and the head of the Government</strong>. He is not responsible to the legislature for his acts."
    },
    {
        "topic": "Parliamentary System",
        "text": "What was the primary reason for the Constituent Assembly adopting the parliamentary system in India?",
        "options": ["The system was already familiar to Indians due to British rule.", "To avoid conflicts between the legislature and the executive.", "The diversity of the country required a more representative form of government.", "All of the above."],
        "answer": 3,
        "explanation": "<strong>All of the above</strong> were cited as reasons. The framers were familiar with the system (familiarity), wanted to avoid legislative-executive conflict common in presidential systems (harmony), and believed it was more representative of India's diversity."
    },
    {
        "topic": "Parliamentary System",
        "text": "A key difference between the Indian parliamentary system and the British one is:",
        "options": ["The presence of a Prime Minister.", "The collective responsibility of the cabinet.", "The Indian Parliament is not a sovereign body like the British Parliament, and its laws are subject to judicial review.", "The lower house can be dissolved."],
        "answer": 2,
        "explanation": "A fundamental difference is that the British Parliament is sovereign (can make any law), whereas the <strong>Indian Parliament's power is limited</strong> by a written constitution, a federal system, fundamental rights, and the power of judicial review."
    },
    {
        "topic": "Parliamentary System",
        "text": "The Indian Prime Minister is 'appointed' by the President, whereas the British Prime Minister is:",
        "options": ["Elected directly by the people.", "Appointed by the Monarch.", "Elected by the House of Commons.", "Appointed by the House of Lords."],
        "answer": 1,
        "explanation": "In Britain, the head of state, the <strong>Monarch</strong>, appoints the Prime Minister. In practice, this is always the leader who commands the majority in the House of Commons, similar to the practice in India."
    },
    {
        "topic": "Parliamentary System",
        "text": "What does the term 'political homogeneity' in a parliamentary system usually imply?",
        "options": ["All members of the legislature belong to the same party.", "The members of the council of ministers belong to the same political party, sharing the same political ideology.", "The entire country has a single political ideology.", "The opposition parties are not allowed."],
        "answer": 1,
        "explanation": "Political homogeneity means that usually, all members of the Council of Ministers belong to the <strong>same political party</strong> and hence, share the same political ideology. In coalition governments, ministers are bound by consensus."
    },
    {
        "topic": "Parliamentary System",
        "text": "A 'shadow cabinet' is a unique feature of the parliamentary system in:",
        "options": ["India", "Britain", "Canada", "Japan"],
        "answer": 1,
        "explanation": "The 'shadow cabinet' is a unique institution of the <strong>British</strong> cabinet system. It is formed by the opposition party to balance the ruling cabinet and to prepare its members for future ministerial offices. This is not a formal institution in India."
    },
    {
        "topic": "Parliamentary System",
        "text": "Which of the following is considered a merit of the parliamentary system?",
        "options": ["Stable government", "Harmony between legislature and executive", "Strict adherence to separation of powers", "Continuity of policies"],
        "answer": 1,
        "explanation": "A key merit is the <strong>harmony between legislature and executive</strong>, as the executive is a part of the legislature and responsible to it. This reduces the risk of conflict and deadlock which is more common in a presidential system."
    },
    {
        "topic": "Parliamentary System",
        "text": "A major demerit often associated with the parliamentary system is:",
        "options": ["The government can become autocratic.", "The potential for instability due to no-confidence motions and coalition politics.", "The executive is not responsive to the people.", "It is not suitable for diverse countries."],
        "answer": 1,
        "explanation": "A primary demerit is the <strong>potential for instability</strong>. A government's survival depends on maintaining majority support. Multi-party coalitions and no-confidence motions can lead to frequent elections and unstable governments."
    },
    {
        "topic": "Parliamentary System",
        "text": "The Council of Ministers remains in office as long as it enjoys the confidence of the:",
        "options": ["President", "Prime Minister", "Rajya Sabha", "Lok Sabha"],
        "answer": 3,
        "explanation": "According to Article 75(3), the Council of Ministers is collectively responsible to the House of the People, meaning it must command a majority in the <strong>Lok Sabha</strong> to remain in power."
    },
    {
        "topic": "Parliamentary System",
        "text": "If a no-confidence motion is passed against the Council of Ministers in the Lok Sabha:",
        "options": ["Only the Prime Minister has to resign.", "Only the specific minister against whom it is moved resigns.", "The entire Council of Ministers has to resign.", "The President can refuse to accept the motion."],
        "answer": 2,
        "explanation": "Due to the principle of collective responsibility, if a no-confidence motion is passed, the <strong>entire Council of Ministers, including the Prime Minister, must resign</strong>. It signifies the loss of the confidence of the Lok Sabha."
    },
    {
        "topic": "Parliamentary System",
        "text": "A person who is not a member of either House of Parliament can be appointed as a minister, but he must become a member of either House within:",
        "options": ["Three months", "Six months", "Nine months", "One year"],
        "answer": 1,
        "explanation": "The Constitution allows a non-member of Parliament to be appointed as a minister, but he must get elected to either the Lok Sabha or Rajya Sabha within a period of <strong>six months</strong>, or else he ceases to be a minister."
    },
    {
        "topic": "Parliamentary System",
        "text": "The leadership of which of the following is a dominant feature of the cabinet system?",
        "options": ["The President", "The Speaker", "The Prime Minister", "The Chief Justice"],
        "answer": 2,
        "explanation": "The parliamentary system is characterized by the leadership of the <strong>Prime Minister</strong>. He/she is the leader of the council of ministers, the leader of the Parliament, and the leader of the party in power."
    },
    {
        "topic": "Parliamentary System",
        "text": "The power to dissolve the Lok Sabha rests with the:",
        "options": ["Speaker of the Lok Sabha.", "Prime Minister.", "President, on the advice of the Prime Minister/Council of Ministers.", "Election Commission."],
        "answer": 2,
        "explanation": "The lower house (Lok Sabha) can be dissolved by the <strong>President on the recommendation of the Prime Minister</strong>. This allows the government to call for fresh elections before the end of its term."
    },
    {
        "topic": "Parliamentary System",
        "text": "The parliamentary system is also known as:",
        "options": ["The Cabinet system", "The Responsible government", "The Westminster model of government", "All of the above"],
        "answer": 3,
        "explanation": "The parliamentary system is known by all these names: <strong>Cabinet system</strong> (due to the central role of the cabinet), <strong>Responsible government</strong> (due to its accountability to parliament), and <strong>Westminster model</strong> (after its place of origin)."
    },
    {
        "topic": "Parliamentary System",
        "text": "In contrast to the parliamentary system, the presidential system is based on the doctrine of:",
        "options": ["Fusion of powers", "Separation of powers", "Collective responsibility", "Sovereignty of the legislature"],
        "answer": 1,
        "explanation": "The presidential system is built on the doctrine of <strong>separation of powers</strong> between the executive, legislative, and judicial branches of government, with each organ being largely independent of the others."
    },
    {
        "topic": "Parliamentary System",
        "text": "The oath of secrecy to the ministers in a parliamentary system is administered by:",
        "options": ["The Prime Minister", "The Chief Justice of India", "The President", "The Speaker of the Lok Sabha"],
        "answer": 2,
        "explanation": "According to Article 75(4), before a minister enters upon his office, the <strong>President</strong> shall administer to him the oaths of office and of secrecy."
    },
    {
        "topic": "Parliamentary System",
        "text": "Why is the parliamentary system considered more 'responsible'?",
        "options": ["Ministers are directly responsible to the Parliament for their actions and policies.", "The head of state is elected.", "It has a written constitution.", "The judiciary is independent."],
        "answer": 0,
        "explanation": "It is called a 'responsible government' because the executive (Council of Ministers) is <strong>accountable to the Parliament</strong> for all its acts of omission and commission. The Parliament exercises control through questions, debates, and no-confidence motions."
    },
    {
        "topic": "Parliamentary System",
        "text": "Which of the following statements is true?",
        "options": ["In India, the legal responsibility of a minister does not exist.", "In Britain, every order of the King for any public act is countersigned by a minister.", "Both (A) and (B) are true.", "Both (A) and (B) are false."],
        "answer": 2,
        "explanation": "<strong>Both statements are true.</strong> Unlike in Britain where the Monarch's orders require a ministerial countersignature (legal responsibility), in India there is no provision for a system of legal responsibility of a minister. The courts cannot compel the disclosure of advice tendered to the President."
    },
    {
        "topic": "Parliamentary System",
        "text": "The 'dictatorship of the cabinet' is a potential demerit of the parliamentary system, especially when:",
        "options": ["There is a coalition government.", "The opposition is very strong.", "The ruling party enjoys an absolute majority in the legislature.", "The President is very assertive."],
        "answer": 2,
        "explanation": "When the <strong>ruling party has an absolute majority</strong> in Parliament, the cabinet can exercise near-autocratic powers, and the legislature's control can become weak. This is often termed the 'dictatorship of the cabinet'."
    },
    {
        "topic": "Parliamentary System",
        "text": "The Indian President is the head of the State, while the American President is:",
        "options": ["Only the head of the State.", "Only the head of the Government.", "Both the head of the State and the head of the Government.", "The head of the legislature."],
        "answer": 2,
        "explanation": "A key feature of the presidential system is that the president is <strong>both the head of the State</strong> (the ceremonial head) <strong>and the head of the Government</strong> (the real executive)."
    },
    {
        "topic": "Parliamentary System",
        "text": "What happens when the Lok Sabha is dissolved?",
        "options": ["The Council of Ministers is immediately dismissed.", "The Council of Ministers continues to hold office until new ministers are sworn in after elections.", "The President takes over the administration directly.", "The Rajya Sabha forms the government."],
        "answer": 1,
        "explanation": "Even after the dissolution of the Lok Sabha, the Council of Ministers does not cease to hold office. According to Article 74, there shall always be a council of ministers to aid and advise the President. So, the incumbent ministry acts as a <strong>caretaker government</strong> until a new one is formed."
    },
    {
        "topic": "Parliamentary System",
        "text": "The fundamental principle of the parliamentary system is the accountability of the:",
        "options": ["Executive to the Judiciary.", "Executive to the Legislature.", "Legislature to the Executive.", "Judiciary to the Executive."],
        "answer": 1,
        "explanation": "The core, fundamental principle that defines a parliamentary system is the responsibility and accountability of the <strong>Executive to the Legislature</strong>."
    },
    {
        "topic": "Parliamentary System",
        "text": "The system of government in India is parliamentary because:",
        "options": ["The Lok Sabha is elected directly by the people.", "The Parliament can amend the Constitution.", "The Rajya Sabha cannot be dissolved.", "The Council of Ministers is responsible to the Lok Sabha."],
        "answer": 3,
        "explanation": "The definitive feature that makes India's system parliamentary is that the real executive, the <strong>Council of Ministers, is collectively responsible to the lower house of the legislature, the Lok Sabha</strong>, and must resign if it loses its confidence."
    },
    {
        "topic": "Parliamentary System",
        "text": "Which article states that the Prime Minister shall be the head of the Council of Ministers to aid and advise the President?",
        "options": ["Article 74(1)", "Article 75(1)", "Article 76(1)", "Article 78(a)"],
        "answer": 0,
        "explanation": "<strong>Article 74(1)</strong> states that 'There shall be a Council of Ministers with the Prime Minister at the head to aid and advise the President who shall, in the exercise of his functions, act in accordance with such advice'."
    },
    {
        "topic": "Parliamentary System",
        "text": "The policy of the Government is shaped by the:",
        "options": ["Opposition Parties", "Cabinet", "President", "Civil Servants"],
        "answer": 1,
        "explanation": "The <strong>Cabinet</strong>, led by the Prime Minister, is the supreme policy-making body of the government. It formulates both domestic and foreign policy."
    },
    {
        "topic": "Parliamentary System",
        "text": "A key reason for not choosing the Presidential system was the framers' belief that it would:",
        "options": ["Be too expensive to operate.", "Lead to frequent conflicts between the executive and legislature, which a new nation could not afford.", "Not provide adequate representation to the diverse groups in India.", "Give too much power to the judiciary."],
        "answer": 1,
        "explanation": "The framers feared that the strict separation of powers in a presidential system could <strong>lead to continuous conflict and deadlock between the executive and the legislature</strong>. They felt that a nascent democracy like India needed harmony, not conflict, for its stability and growth."
    },
    {
        "topic": "Parliamentary System",
        "text": "A minister who is a member of the Rajya Sabha can:",
        "options": ["Not participate in the proceedings of the Lok Sabha.", "Participate in the proceedings of the Lok Sabha but cannot vote.", "Both participate and vote in the Lok Sabha.", "Not be appointed as the Prime Minister."],
        "answer": 1,
        "explanation": "A minister can participate in the proceedings of both Houses of Parliament. However, he or she can vote only in the House of which they are a member. So a Rajya Sabha minister can <strong>participate in Lok Sabha debates but cannot vote there</strong>."
    },
    {
        "topic": "Parliamentary System",
        "text": "The term 'kitchen cabinet' or 'inner cabinet' refers to:",
        "options": ["The official cabinet as per the constitution.", "An informal body of the Prime Minister and a few influential colleagues.", "The cabinet committee on political affairs.", "The council of ministers including deputy ministers."],
        "answer": 1,
        "explanation": "The 'kitchen cabinet' is an <strong>informal body consisting of the Prime Minister and two to four influential colleagues</strong> in whom he has faith and with whom he can discuss every problem. It is the real center of power."
    },
    {
        "topic": "Parliamentary System",
        "text": "The Indian model of parliamentary government differs from the British model in that:",
        "options": ["India has a republican system in place of the British monarchy.", "The Prime Minister in India must be a member of the lower house.", "India does not have a system of legal responsibility of the minister.", "Both (A) and (C)."],
        "answer": 3,
        "explanation": "<strong>Both (A) and (C) are correct differences</strong>. India's head of state is an elected President (a republic), unlike Britain's hereditary Monarch. Also, India does not have the British system of legal ministerial responsibility (where a minister must countersign royal acts)."
    },
    {
        "topic": "Parliamentary System",
        "text": "The parliamentary system provides for a wide representation of various sections and interests in the government. This is a:",
        "options": ["Merit of the system.", "Demerit of the system.", "Feature of the presidential system only.", "A constitutional fiction."],
        "answer": 0,
        "explanation": "This is considered a <strong>merit of the system</strong>. Since ministers are drawn from the legislature, which itself represents different regions, sections, and interests of the country, the executive has a widely representative character."
    },
    {
        "topic": "Parliamentary System",
        "text": "A government is considered unstable in a parliamentary system when:",
        "options": ["The President dissolves the house arbitrarily.", "It is a coalition government or has a thin majority, making it vulnerable to a no-confidence vote.", "The Prime Minister is from the upper house.", "The judiciary frequently strikes down its laws."],
        "answer": 1,
        "explanation": "Instability is a major demerit, particularly in an era of multi-party politics. <strong>Coalition governments or governments with a very thin majority</strong> are always at risk of losing their majority through a no-confidence vote, leading to their collapse."
    }
];

    // ### GLOBAL STATE & DOM ELEMENTS ###
    let state = {};
    let timerInterval, onTimerEnd, stopwatchInterval, animationInterval;
    let timeLeft = TEST_DURATION_SECONDS;
    let isTestCompleted = false;
    let performanceChart = null;
    let stopwatchTime = 0;
    let isStopwatchRunning = false;

    const dom = {
      body: document.body,
      loginScreen: document.getElementById('loginScreen'),
      loginBtn: document.getElementById('loginBtn'),
      userIdInput: document.getElementById('userIdInput'),
      passwordLoginInput: document.getElementById('passwordLoginInput'),
      loginError: document.getElementById('loginError'),
      instructionsScreen: document.getElementById('instructionsScreen'),
      startExamBtn: document.getElementById('startExamBtn'),
      offlineStatus: document.getElementById('offlineStatus'),
      agreementCheckbox: document.getElementById('agreementCheckbox'),
      startError: document.getElementById('startError'),
      totalQuestionsEl: document.getElementById('totalQuestionsEl'),
      examUIWrapper: document.getElementById('examUIWrapper'),
      siteHeader: document.getElementById('siteHeader'),
      topbar: document.getElementById('topbar'),
      sidebar: document.getElementById('sidebar'),
      mockTestWrapper: document.getElementById('mockTestWrapper'),
      mcqFooter: document.getElementById('mcqFooter'),
      questionText: document.getElementById('questionText'),
      questionNumber: document.getElementById('questionNumber'),
      questionTimerBar: document.getElementById('questionTimerBar'),
      optionsList: document.getElementById('optionsList'),
      questionPalette: document.getElementById('questionPalette'),
      btnSubmitTest: document.getElementById('btnSubmitTest'),
      btnPrevQuestion: document.getElementById('btnPrevQuestion'),
      btnSaveNext: document.getElementById('btnSaveNext'),
      btnMarkReview: document.getElementById('btnMarkReview'),
      btnClearResponse: document.getElementById('btnClearResponse'),
      timer: document.getElementById('timer'),
      darkModeToggle: document.getElementById('darkModeToggle'),
      toggleLabel: document.getElementById('toggleLabel'),
      sidebarToggle: document.getElementById('btnToggleSidebar'),
      summaryAnswered: document.getElementById('summaryAnswered'),
      summaryNotAnswered: document.getElementById('summaryNotAnswered'),
      summaryMarked: document.getElementById('summaryMarked'),
      summaryNotVisited: document.getElementById('summaryNotVisited'),
      resultScreenWrapper: document.getElementById('resultScreenWrapper'),
      reviewScreenWrapper: document.getElementById('reviewScreenWrapper'),
      performanceTableBody: document.getElementById('performanceTableBody'),
      reviewContainer: document.getElementById('reviewContainer'),
      finalScore: document.getElementById('finalScore'),
      retestButton: document.getElementById('retestButton'),
      reviewAnswersButton: document.getElementById('reviewAnswersButton'),
      backToResultsBtn: document.getElementById('backToResultsBtn'),
      passwordModal: document.getElementById('passwordModal'),
      closeModal: document.getElementById('closeModal'),
      verifyPasswordButton: document.getElementById('verifyPasswordButton'),
      passwordRetestInput: document.getElementById('passwordRetestInput'),
      passwordError: document.getElementById('passwordError'),
      whatsappLink: document.getElementById('whatsappLink'),
      showMockTestTab: document.getElementById('showMockTestTab'),
      showAnswerWritingTab: document.getElementById('showAnswerWritingTab'),
      answerWritingWrapper: document.getElementById('answerWritingWrapper'),
      stopwatchWrapper: document.getElementById('stopwatchWrapper'),
      stopwatchDisplay: document.getElementById('stopwatchDisplay'),
      stopwatchPlayPause: document.getElementById('stopwatchPlayPause'),
      stopwatchReset: document.getElementById('stopwatchReset'),
      correctCount: document.getElementById('correctCount'),
      correctMarks: document.getElementById('correctMarks'),
      incorrectCount: document.getElementById('incorrectCount'),
      incorrectMarks: document.getElementById('incorrectMarks'),
      unattemptedCount: document.getElementById('unattemptedCount'),
      finalScoreAnimated: document.getElementById('finalScoreAnimated'),
      totalPossibleScore: document.getElementById('totalPossibleScore'),
    };

    // ### STAGE 1 & 2: PRE-EXAM LOGIC ###

    function handleLogin() {
        if (dom.userIdInput.value === CORRECT_USER_ID && dom.passwordLoginInput.value === CORRECT_PASSWORD) {
            // ** CORRECTED LOGIC **
            // Add network listeners ONLY after successful login.
            window.addEventListener('online', validateStartConditions);
            window.addEventListener('offline', validateStartConditions);
            // Run once to set the initial state of the instructions screen.
            validateStartConditions(); 

            dom.loginScreen.style.display = 'none';
            dom.instructionsScreen.style.display = 'flex';
        } else {
            dom.loginError.textContent = 'Invalid User ID or Password.';
        }
    }

    function validateStartConditions() {
        const isOffline = !navigator.onLine;
        const isAgreed = dom.agreementCheckbox.checked;
        dom.startExamBtn.disabled = !(isOffline && isAgreed);

        let errorMsg = '';
        if (!isOffline && !isAgreed) errorMsg = 'Please agree to terms and enable Aeroplane Mode.';
        else if (!isOffline) errorMsg = 'Please enable Aeroplane Mode to continue.';
        else if (!isAgreed) errorMsg = 'Please agree to the instructions to start.';
        dom.startError.textContent = errorMsg;

        if (isOffline) {
            dom.offlineStatus.innerHTML = '<i class="fas fa-check-circle"></i> You are offline. Ready to begin.';
            dom.offlineStatus.className = 'status-ready';
        } else {
            dom.offlineStatus.innerHTML = '<i class="fas fa-wifi"></i> Please enable Aeroplane Mode.';
            dom.offlineStatus.className = 'status-waiting';
        }
    }
    
    function startExam() {
        if (dom.startExamBtn.disabled) return;
        dom.instructionsScreen.style.display = 'none';
        dom.examUIWrapper.style.display = 'flex';
        dom.body.classList.add('exam-active');
        updateSidebarPosition();
        window.removeEventListener('online', validateStartConditions);
        window.removeEventListener('offline', validateStartConditions);
        window.addEventListener('online', forceSubmitOnReconnect);
        initTest();
    }

    function forceSubmitOnReconnect() {
        if (!isTestCompleted) {
            alert("Internet connection detected. Submitting the test as per rules.");
            submitTest(true);
        }
    }

    // ### STAGE 3: MAIN TEST LOGIC ###

    function initTest() {
        resetState();
        timeLeft = TEST_DURATION_SECONDS;
        isTestCompleted = false;
        dom.showAnswerWritingTab.classList.add('locked');
        state.visited[0] = true;
        resetStopwatch();
        setView('mockTest');
        loadQuestion(0);
        startTimer();
    }

    function resetState() {
        state = { current: 0, answers: Array(questions.length).fill(null), marked: Array(questions.length).fill(false), visited: Array(questions.length).fill(false) };
    }

    function setView(viewName) {
        dom.mockTestWrapper.style.display = 'none';
        dom.resultScreenWrapper.style.display = 'none';
        dom.reviewScreenWrapper.style.display = 'none';
        dom.answerWritingWrapper.style.display = 'none';
        dom.mcqFooter.style.display = 'none';
        dom.sidebar.style.display = 'none';
        dom.timer.style.display = 'none';
        dom.stopwatchWrapper.style.display = 'none';
        dom.showMockTestTab.classList.remove('active');
        dom.showAnswerWritingTab.classList.remove('active');
        clearInterval(animationInterval);

        if (viewName === 'mockTest') {
            dom.showMockTestTab.classList.add('active');
            dom.timer.style.display = 'block';
            if (isTestCompleted) {
                const breakdown = JSON.parse(localStorage.getItem('scoreBreakdown'));
                const topicStats = JSON.parse(localStorage.getItem('topicStats'));
                showResultScreen(breakdown, topicStats);
            } else {
                dom.mockTestWrapper.style.display = 'flex';
                dom.mcqFooter.style.display = 'block';
                dom.sidebar.style.display = 'flex';
            }
        } else if (viewName === 'answerWriting') {
            if (dom.showAnswerWritingTab.classList.contains('locked')) return;
            dom.showAnswerWritingTab.classList.add('active');
            dom.stopwatchWrapper.style.display = 'flex';
            dom.answerWritingWrapper.style.display = 'flex';
        }
    }

    function loadQuestion(index) {
        state.current = index;
        if (!state.visited[index]) { state.visited[index] = true; }
        startQuestionTimer();
        const q = questions[index];
        dom.questionNumber.textContent = `Question ${index + 1}`;
        dom.questionText.textContent = q.text;
        dom.optionsList.innerHTML = '';
        q.options.forEach((opt, i) => {
            const li = document.createElement('li');
            li.className = 'option';
            if (state.answers[index] === i) li.classList.add('selected');
            li.innerHTML = `<span class="option-radio"></span><span class="option-text">${opt}</span>`;
            li.onclick = () => selectOption(i);
            dom.optionsList.appendChild(li);
        });
        dom.btnSubmitTest.style.display = (state.current === questions.length - 1) ? 'flex' : 'none';
        updatePalette();
        updateNavigationButtons();
    }

    function selectOption(optIndex) {
        state.answers[state.current] = optIndex;
        dom.optionsList.querySelectorAll('.option').forEach((opt, i) => opt.classList.toggle('selected', i === optIndex));
        updatePalette();
    }

    function handleSaveAndNext() {
      if (isTestCompleted) return;
      if (state.current < questions.length - 1) {
          loadQuestion(state.current + 1);
      } else {
          submitTest(true);
      }
    }

    function handleMarkAndNext() {
      if (isTestCompleted) return;
      state.marked[state.current] = true;
      handleSaveAndNext();
    }
    
    function handleClearResponse() {
        state.answers[state.current] = null;
        dom.optionsList.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
        updatePalette();
    }

    function submitTest(isForced = false) {
        if (isTestCompleted) return;
        if (!isForced) {
             if (!confirm('Are you sure you want to submit the test?')) return;
        }

        stopTimer();
        isTestCompleted = true;
        window.removeEventListener('online', forceSubmitOnReconnect);
        dom.showAnswerWritingTab.classList.remove('locked');
        
        const scoreBreakdown = calculateScoreBreakdown();
        const topicStats = calculateTopicStats();

        localStorage.setItem('testTaken', 'true');
        localStorage.setItem('lastAnswers', JSON.stringify(state.answers));
        localStorage.setItem('scoreBreakdown', JSON.stringify(scoreBreakdown));
        localStorage.setItem('topicStats', JSON.stringify(topicStats));

        showResultScreen(scoreBreakdown, topicStats);
    }
    
    function calculateScoreBreakdown() {
        let correctCount = 0, incorrectCount = 0;
        state.answers.forEach((ans, i) => {
            if (ans !== null) {
                if (ans === questions[i].answer) correctCount++;
                else incorrectCount++;
            }
        });
        const unattemptedCount = questions.length - correctCount - incorrectCount;
        const totalScore = correctCount - incorrectCount;

        return {
            correctCount,
            incorrectCount,
            unattemptedCount,
            totalScore,
            totalQuestions: questions.length,
            correctMarks: correctCount * 1,
            incorrectMarks: incorrectCount * -1,
        };
    }

    function updatePalette() {
        dom.questionPalette.innerHTML = '';
        let answered = 0, notAnswered = 0, marked = 0, notVisited = 0;
        questions.forEach((_, i) => {
            const btn = document.createElement('div');
            btn.className = 'question-number';
            const isAnswered = state.answers[i] !== null;
            const isMarked = state.marked[i];
            if(isAnswered && isMarked) btn.classList.add('marked-answered');
            else if(isAnswered) btn.classList.add('answered');
            else if(isMarked) btn.classList.add('marked');
            else if(state.visited[i]) btn.classList.add('not-answered');
            else btn.classList.add('not-visited');
            if (i === state.current) btn.classList.add('current');
            if (isAnswered) answered++;
            if (isMarked) marked++;
            if (!state.visited[i]) notVisited++;
            btn.textContent = i + 1;
            btn.onclick = () => { if (!isTestCompleted) loadQuestion(i); };
            dom.questionPalette.appendChild(btn);
        });
        notAnswered = state.visited.filter((v, i) => v && state.answers[i] === null && !state.marked[i]).length;
        dom.summaryAnswered.textContent = answered;
        dom.summaryMarked.textContent = marked;
        dom.summaryNotAnswered.textContent = notAnswered;
        dom.summaryNotVisited.textContent = notVisited;
    }

    function updateNavigationButtons() {
        dom.btnPrevQuestion.style.display = state.current === 0 ? 'none' : 'flex';
        dom.btnSaveNext.querySelector('span').textContent = (state.current === questions.length - 1) ? "Save & Finish" : "Save & Next";
    }

    function formatTime(totalSeconds) {
        const hours = Math.floor(totalSeconds / 3600);
        const minutes = Math.floor((totalSeconds % 3600) / 60);
        const seconds = totalSeconds % 60;
        return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    function startTimer() {
      clearInterval(timerInterval);
      timerInterval = setInterval(() => {
          if (timeLeft <= 0) {
              clearInterval(timerInterval);
              alert("Time's up! The test will be submitted automatically.");
              submitTest(true);
              return;
          }
          timeLeft--;
          dom.timer.textContent = formatTime(timeLeft);
      }, 1000);
    }
    
    function startQuestionTimer() {
        if (onTimerEnd) dom.questionTimerBar.removeEventListener('transitionend', onTimerEnd);
        onTimerEnd = () => handleSaveAndNext();
        dom.questionTimerBar.style.transition = 'none';
        dom.questionTimerBar.style.width = '100%';
        dom.questionTimerBar.offsetHeight;
        dom.questionTimerBar.style.transition = `width ${PER_QUESTION_TIME}s linear`;
        dom.questionTimerBar.style.width = '0%';
        dom.questionTimerBar.addEventListener('transitionend', onTimerEnd, { once: true });
    }

    function stopTimer() {
        clearInterval(timerInterval);
        if(onTimerEnd) dom.questionTimerBar.removeEventListener('transitionend', onTimerEnd);
    }
    
    function toggleStopwatch() {
        const icon = dom.stopwatchPlayPause.querySelector('i');
        if (isStopwatchRunning) {
            clearInterval(stopwatchInterval);
            icon.classList.replace('fa-pause', 'fa-play');
        } else {
            stopwatchInterval = setInterval(() => {
                stopwatchTime++;
                dom.stopwatchDisplay.textContent = formatTime(stopwatchTime);
            }, 1000);
            icon.classList.replace('fa-play', 'fa-pause');
        }
        isStopwatchRunning = !isStopwatchRunning;
    }

    function resetStopwatch() {
        clearInterval(stopwatchInterval);
        isStopwatchRunning = false;
        stopwatchTime = 0;
        dom.stopwatchDisplay.textContent = formatTime(0);
        const icon = dom.stopwatchPlayPause.querySelector('i');
        if(icon) {
           icon.classList.replace('fa-pause', 'fa-play');
        }
    }

    function toggleDarkMode(isDark) {
        dom.body.classList.toggle('dark', isDark);
        dom.toggleLabel.textContent = isDark ? 'Light' : 'Dark';
        if (isTestCompleted && performanceChart) {
            const topicStats = JSON.parse(localStorage.getItem('topicStats'));
            renderPerformanceChart(topicStats);
        }
    }
    
    function updateSidebarPosition() {
        const headerHeight = dom.siteHeader.offsetHeight;
        const topbarHeight = dom.topbar.offsetHeight;
        const totalHeaderHeight = headerHeight + topbarHeight;
        dom.sidebar.style.top = `${totalHeaderHeight}px`;
        dom.sidebar.style.height = `calc(100% - ${totalHeaderHeight}px)`;
    }

    // ### STAGE 4: RESULT & REVIEW FUNCTIONS ###
    function showResultScreen(breakdown, topicStats) {
        dom.mockTestWrapper.style.display = 'none';
        dom.reviewScreenWrapper.style.display = 'none';
        dom.mcqFooter.style.display = 'none';
        dom.sidebar.style.display = 'none';
        dom.btnSubmitTest.style.display = 'none';
        dom.resultScreenWrapper.style.display = 'flex';
        
        if (breakdown) {
             dom.totalPossibleScore.textContent = breakdown.totalQuestions;
             animateScorecard(breakdown);
        }

        populatePerformanceTable(topicStats);
        setTimeout(() => renderPerformanceChart(topicStats), 100);
    }
    
    function animateScorecard(data) {
        let current = { correctCount: 0, incorrectCount: 0, unattemptedCount: 0, correctMarks: 0, incorrectMarks: 0, totalScore: 0 };
        const animationSpeed = 20;
        const duration = 1200;
        const steps = duration / animationSpeed;
        
        const stepValues = {};
        for (const key in current) {
            stepValues[key] = data[key] / steps;
        }
        
        clearInterval(animationInterval);
        animationInterval = setInterval(() => {
            let finished = true;
            for (const key in current) {
                if (stepValues[key] > 0) { // Positive values
                    if (current[key] < data[key]) {
                        current[key] += stepValues[key];
                        finished = false;
                    } else {
                        current[key] = data[key];
                    }
                } else { // Negative or zero values
                     if (current[key] > data[key]) {
                        current[key] += stepValues[key]; 
                        finished = false;
                    } else {
                        current[key] = data[key];
                    }
                }
            }

            dom.correctCount.textContent = Math.round(current.correctCount);
            dom.correctMarks.textContent = `+${Math.round(current.correctMarks)}`;
            dom.incorrectCount.textContent = Math.round(current.incorrectCount);
            dom.incorrectMarks.textContent = Math.round(current.incorrectMarks);
            dom.unattemptedCount.textContent = Math.round(current.unattemptedCount);
            dom.finalScoreAnimated.textContent = Math.round(current.totalScore);

            if(finished) clearInterval(animationInterval);
        }, animationSpeed);
    }

    function calculateTopicStats() {
      const topicStats = {};
      questions.forEach((q, i) => {
        if (!topicStats[q.topic]) { topicStats[q.topic] = { correct: 0, attempted: 0 }; }
        if (state.answers[i] !== null) {
          topicStats[q.topic].attempted++;
          if (state.answers[i] === q.answer) { topicStats[q.topic].correct++; }
        }
      });
      return topicStats;
    }

    function populatePerformanceTable(topicStats) {
        dom.performanceTableBody.innerHTML = '';
        if (!topicStats) return;
        Object.keys(topicStats).forEach(topicName => {
            const stats = topicStats[topicName];
            const accuracy = stats.attempted > 0 ? Math.round((stats.correct / stats.attempted) * 100) : 0;
            const barColor = accuracy > 75 ? '#4caf50' : accuracy >= 40 ? '#ff9800' : '#f44336';
            const row = `
                <tr>
                    <td>${topicName}</td>
                    <td>${stats.correct}</td>
                    <td>${stats.attempted}</td>
                    <td>
                        <div class="accuracy-bar-container">
                            <div class="accuracy-bar" style="width: ${accuracy}%; background-color: ${barColor};"></div>
                            <span class="accuracy-text">${accuracy}%</span>
                        </div>
                    </td>
                </tr>`;
            dom.performanceTableBody.innerHTML += row;
        });
    }
    
    function renderPerformanceChart(topicStats) {
      if (performanceChart) performanceChart.destroy();
      if (!topicStats) return;
      
      const isDark = dom.body.classList.contains('dark');
      const gridColor = isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
      const textColor = isDark ? 'rgba(255, 255, 255, 0.7)' : '#666';

      const labels = Object.keys(topicStats);
      const marksData = labels.map(label => topicStats[label].correct);
      const accuracyData = labels.map(label => {
        const stats = topicStats[label];
        return stats.attempted > 0 ? Math.round((stats.correct / stats.attempted) * 100) : 0;
      });

      const ctx = document.getElementById('performanceChart').getContext('2d');
      performanceChart = new Chart(ctx, {
          type: 'bar', data: { labels: labels, datasets: [{ label: 'Correct Answers (Marks)', data: marksData, backgroundColor: '#3f51b5', yAxisID: 'y' }, { label: 'Accuracy (%)', data: accuracyData, type: 'line', borderColor: '#4caf50', tension: 0.1, yAxisID: 'y1' }] },
          options: { responsive: true, maintainAspectRatio: false, interaction: { mode: 'index', intersect: false }, scales: { x: { ticks: { color: textColor }, grid: { color: gridColor } }, y: { type: 'linear', position: 'left', title: { display: true, text: 'Correct Answers', color: textColor }, ticks: { color: textColor, precision: 0 }, grid: { color: gridColor }, beginAtZero: true }, y1: { type: 'linear', position: 'right', min: 0, max: 100, title: { display: true, text: 'Accuracy (%)', color: textColor }, ticks: { color: textColor }, grid: { drawOnChartArea: false } } }, plugins: { legend: { labels: { color: textColor } } } }
      });
    }

    function showReviewScreen() {
      dom.resultScreenWrapper.style.display = 'none';
      dom.reviewScreenWrapper.style.display = 'flex';
      populateReviewScreen();
    }

    function populateReviewScreen() {
        dom.reviewContainer.innerHTML = '';
        const userAnswers = JSON.parse(localStorage.getItem('lastAnswers'));
        if (!userAnswers) return;
        questions.forEach((q, index) => {
            const userAnswer = userAnswers[index];
            const correctAnswer = q.answer;
            const isCorrect = userAnswer === correctAnswer;
            
            let optionsHTML = '';
            q.options.forEach((opt, optIndex) => {
                let classes = 'review-option';
                let icon = '<i class="far fa-circle"></i>';
                if (optIndex === correctAnswer) { classes += ' review-correct'; icon = '<i class="fas fa-check-circle"></i>'; }
                if (optIndex === userAnswer && !isCorrect) { classes += ' review-incorrect'; icon = '<i class="fas fa-times-circle"></i>'; }
                optionsHTML += `<li class="${classes}">${icon}<span>${opt}</span></li>`;
            });

            let statusHTML = '';
            if (userAnswer === null) { statusHTML = '<div class="review-status unanswered">Status: Unanswered</div>'; } 
            else if (isCorrect) { statusHTML = '<div class="review-status correct">Status: Correct</div>'; } 
            else { statusHTML = '<div class="review-status incorrect">Status: Incorrect</div>'; }

            const explanationHTML = `<div class="review-explanation"><strong>Explanation:</strong> ${q.explanation}</div>`;

            const questionDiv = document.createElement('div');
            questionDiv.className = 'review-question';
            questionDiv.innerHTML = `
                <h4>Q${index + 1}: ${q.text}</h4>
                <ul class="review-option-list">${optionsHTML}</ul>
                ${statusHTML}
                ${explanationHTML}
            `;
            dom.reviewContainer.appendChild(questionDiv);
        });
    }

    // ** CORRECTED RETEST FUNCTION **
    function handleRetest() {
        // The user MUST be offline to retest. If they are online, show an error.
        if (navigator.onLine) {
            dom.passwordError.textContent = 'Please enable Aeroplane Mode to retest.';
            return;
        }
      
        // If offline, proceed with the password check.
        if (dom.passwordRetestInput.value === RETEST_PASSWORD) {
            localStorage.clear();
            location.reload(); 
        } else {
            dom.passwordError.textContent = 'Incorrect password.';
        }
    }

    // ### MASTER EVENT LISTENERS SETUP ###
    document.addEventListener('DOMContentLoaded', () => {
        const storedTheme = localStorage.getItem('theme');
        if (storedTheme === 'dark') {
            dom.darkModeToggle.checked = true;
            toggleDarkMode(true);
        }
        
        if (localStorage.getItem('testTaken') === 'true') {
            // This part is for users who have already completed the test and are returning to the page.
            isTestCompleted = true;
            dom.showAnswerWritingTab.classList.remove('locked');
            dom.loginScreen.style.display = 'none';
            dom.examUIWrapper.style.display = 'flex';
            dom.body.classList.add('exam-active');
            updateSidebarPosition();
            const breakdown = JSON.parse(localStorage.getItem('scoreBreakdown'));
            const topicStats = JSON.parse(localStorage.getItem('topicStats'));
            showResultScreen(breakdown, topicStats);
        } else {
            // This is for a fresh start or after a retest.
            // NO network listeners are added here. The login page will just display.
        }
        
        const phone = "918658567727";
        const message = "I need the password for the mock test.";
        dom.whatsappLink.href = `https://api.whatsapp.com/send?phone=${phone}&text=${encodeURIComponent(message)}`;
        
        dom.loginBtn.addEventListener('click', handleLogin);
        dom.startExamBtn.addEventListener('click', startExam);
        dom.agreementCheckbox.addEventListener('change', validateStartConditions);

        dom.btnSaveNext.addEventListener('click', handleSaveAndNext);
        dom.btnPrevQuestion.addEventListener('click', () => { if(state.current > 0 && !isTestCompleted) loadQuestion(state.current - 1); });
        dom.btnMarkReview.addEventListener('click', handleMarkAndNext);
        dom.btnClearResponse.addEventListener('click', handleClearResponse);
        dom.btnSubmitTest.addEventListener('click', () => submitTest(false));
        dom.sidebarToggle.addEventListener('click', () => dom.body.classList.toggle('sidebar-open'));
        dom.darkModeToggle.addEventListener('change', (e) => {
            toggleDarkMode(e.target.checked);
            localStorage.setItem('theme', e.target.checked ? 'dark' : 'light');
        });
        dom.retestButton.addEventListener('click', () => { dom.passwordModal.style.display = 'flex'; });
        dom.reviewAnswersButton.addEventListener('click', showReviewScreen);
        dom.backToResultsBtn.addEventListener('click', () => {
             const breakdown = JSON.parse(localStorage.getItem('scoreBreakdown'));
             const topicStats = JSON.parse(localStorage.getItem('topicStats'));
             showResultScreen(breakdown, topicStats);
        });
        dom.closeModal.addEventListener('click', () => { dom.passwordModal.style.display = 'none'; });
        dom.verifyPasswordButton.addEventListener('click', handleRetest);
        dom.stopwatchPlayPause.addEventListener('click', toggleStopwatch);
        dom.stopwatchReset.addEventListener('click', resetStopwatch);
        dom.showMockTestTab.addEventListener('click', () => setView('mockTest'));
        dom.showAnswerWritingTab.addEventListener('click', () => setView('answerWriting'));

        window.addEventListener('resize', updateSidebarPosition);
    });
  </script>
</body>
</html>
